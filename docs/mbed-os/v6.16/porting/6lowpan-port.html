<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/porting/6lowpan-port.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 14:16:59 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        
        
        <meta content="Porting guidelines for adding a new MCU target to Mbed OS and the Pelion IoT Platform and using HAL APIs" name="description"/>
        
        <title>IEEE 802.15.4 RF driver - Porting | Mbed OS 6 Documentation</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="../static/css/vendor/font-awesome-4.7.0/css/font-awesome.min.mbed-cache-269550530cc127b6aa5a35925a7de6ce.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-23ac288f803d41065f3596e4c6b08e94.css" rel="stylesheet"/>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="6lowpan-port.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/porting/6lowpan-port.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/porting/6lowpan-port.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="off-canvas-wrapper" id="docs-content">
            <div class="off-canvas-wrapper-inner full-height" data-off-canvas-wrapper="">
                <div class="off-canvas-content" data-off-canvas-content="">
                    <a href="#" id="nav-button">
                        <span>
                            <i class="fa fa-bars"></i>
                        </span>
                    </a>

                    <div class="toc-wrapper" id="navbar">
                        <div id="toc">
    
        
        <div class="toc-level top">
            <a class="toc-item introduction" href="../introduction/index.html">Introduction to Mbed OS 6</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item bare-metal" href="../bare-metal/index.html">Mbed OS bare metal profile</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item quick-start" href="../quick-start/index.html">Quick start</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item apis" href="../apis/index.html">API references and tutorials</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item program-setup" href="../program-setup/index.html">Program setup</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item build-tools" href="../build-tools/index.html">Build tools</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item debug-test" href="../debug-test/index.html">Debugging and testing</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item tutorials" href="../tutorials/index.html">Tutorials and examples</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item contributing" href="../contributing/index.html">Contributing</a>
        </div>
        

        

    
        
        <div class="toc-level top">
            <a class="toc-item porting active-doc" href="index.html">Porting</a>
        </div>
        

        
            <div class="toc-level one">
                <a class="toc-item" href="index.html">Port process overview</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="setting-up.html">Setting up</a>
                    
                    
                    <a class="toc-item" href="porting.html">Porting</a>
                    
                    
                    <a class="toc-item" href="testing.html">Testing</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="testing.html">Testing your port</a>
                        
                        <a class="toc-item" href="testing-with-the-demo-applications.html">Testing with the demo applications</a>
                        
                        <a class="toc-item" href="integration-tests.html">Integration tests</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-the-hal-apis.html">Porting the HAL APIs</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="static-pinmap-port.html">Static pin map extension</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#implementing-static-pin-map-extension">Implementing static pin map extension</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="serial-port.html">Serial</a>
                    
                    
                    <a class="toc-item" href="low-power-ticker.html">Low Power Ticker</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-low-power-ticker-api">Implementing the low power ticker API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="microsecond-ticker.html">Microsecond ticker</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-microsecond-ticker-api">Implementing the microsecond ticker API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="gpio.html">GPIO</a>
                    
                    
                    <a class="toc-item" href="standard-pin-names.html">Standard Pin Names</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#generic-pin-names">Generic Pin Names</a>
                        
                        <a class="toc-item" href="#arduino-uno-pin-names">Arduino Uno Pin Names</a>
                        
                        <a class="toc-item" href="#target-markers">Target markers</a>
                        
                        <a class="toc-item" href="#compliance-testing">Compliance Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="rtc-port.html">RTC</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-rtc-api">Implementing the RTC API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="spi-port.html">Serial Peripheral Interface (SPI)</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-spi-api">Implementing the SPI API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="quadspi-port.html">QuadSPI (QSPI) </a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#implementing-qspi">Implementing QSPI</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="i2c-port.html">Inter-integrated circuit (I2C) </a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#defined-behaviors">Defined behaviors</a>
                        
                        <a class="toc-item" href="#undefined-behaviors">Undefined behaviors</a>
                        
                        <a class="toc-item" href="#notes">Notes</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-i2c-api">Implementing the I2C API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="flash.html">Flash</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#linker-script-updates">Linker script updates</a>
                        
                        <a class="toc-item" href="#targets-json-metadata">targets.json metadata</a>
                        
                        <a class="toc-item" href="#start-application">Start application</a>
                        
                        <a class="toc-item" href="#flash-hal">Flash HAL</a>
                        
                        <a class="toc-item" href="#tests">Tests</a>
                        
                        <a class="toc-item" href="#troubleshooting">Troubleshooting</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="bootloader.html">Bootloader</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#porting-the-bootloader">Porting the bootloader</a>
                        
                        <a class="toc-item" href="#creating-and-using-a-new-bootloader">Creating and using a new bootloader</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="thread-safety-and-porting.html">Thread safety and porting</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#considerations-when-porting">Considerations when porting</a>
                        
                        <a class="toc-item" href="#hal-c-api">HAL C API</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="tickless-mode.html">Tickless mode</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#scheduling-and-sleep-modes-in-mbed-os">Scheduling and sleep modes in Mbed OS</a>
                        
                        <a class="toc-item" href="#tickless-mode">Tickless mode</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                        <a class="toc-item" href="#references">References</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="sleep.html">Sleep</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#implementing-the-sleep-api">Implementing the Sleep API</a>
                        
                        <a class="toc-item" href="#targets-that-disable-systick-in-sleep-mode">Targets that disable systick in sleep mode</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="resetreason-port.html">ResetReason</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependency">Dependency</a>
                        
                        <a class="toc-item" href="#implementing-resetreason">Implementing ResetReason</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="watchdog-port.html">Watchdog</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependency">Dependency</a>
                        
                        <a class="toc-item" href="#implementing-watchdog">Implementing Watchdog</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="itm-port.html">Instrumentation Trace Macrocell</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependencies">Dependencies</a>
                        
                        <a class="toc-item" href="#implementing-the-itm-api">Implementing the ITM API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="mpu-port.html">MPU</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependency">Dependency</a>
                        
                        <a class="toc-item" href="#implementing-the-mpu-api">Implementing the MPU API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="usb-device.html">USB device</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#implementing-usb">Implementing USB</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="hardware-crc.html">Hardware CRC</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#dependency">Dependency</a>
                        
                        <a class="toc-item" href="#implementing-the-crc-api">Implementing the CRC API</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-security.html">Porting security</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="porting-security.html">Porting PSA targets</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#glossary">Glossary</a>
                        
                        <a class="toc-item" href="#adding-new-psa-targets">Adding new PSA targets</a>
                        
                        <a class="toc-item" href="#build-and-validation">Build and validation</a>
                        
                        <a class="toc-item" href="#further-reading">Further reading</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="crypto-port.html">Mbed Crypto</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                        <a class="toc-item" href="#compile-and-run">Compile and run</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="entropy-sources.html">Entropy sources</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#why-entropy-is-necessary">Why entropy is necessary</a>
                        
                        <a class="toc-item" href="#which-entropy-source-to-choose">Which entropy source to choose</a>
                        
                        <a class="toc-item" href="#how-to-provide-entropy-from-a-hardware-entropy-source">How to provide entropy from a hardware entropy source</a>
                        
                        <a class="toc-item" href="#how-to-implement-the-trng-api">How to implement the TRNG API</a>
                        
                        <a class="toc-item" href="#how-to-implement-the-non-volatile-seed-entropy-source">How to implement the non-volatile seed entropy source</a>
                        
                        <a class="toc-item" href="#how-to-test-without-entropy-sources">How to test without entropy sources</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="hardware-accelerated-crypto.html">Hardware Accelerated Crypto</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#introduction">Introduction</a>
                        
                        <a class="toc-item" href="#adding-acceleration-by-replacing-functions">Adding acceleration by replacing functions</a>
                        
                        <a class="toc-item" href="#adding-acceleration-by-replacing-modules">Adding acceleration by replacing modules</a>
                        
                        <a class="toc-item" href="#mbed-tls-platform-context">Mbed TLS platform context</a>
                        
                        <a class="toc-item" href="#considerations-for-alternative-implementations">Considerations for alternative implementations</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="using-psa-enabled-mbed-tls.html">Using PSA-enabled Mbed TLS</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#building-psa-enabled-mbed-tls-from-git">Building PSA-enabled Mbed TLS from Git</a>
                        
                        <a class="toc-item" href="#using-psa-enabled-mbed-tls">Using PSA-enabled Mbed TLS</a>
                        
                        <a class="toc-item" href="#psa-based-apis-in-mbed-tls">PSA-based APIs in Mbed TLS</a>
                        
                        <a class="toc-item" href="#using-opaque-ecdsa-keys-for-tls-client-authentication">Using opaque ECDSA keys for TLS client authentication</a>
                        
                        <a class="toc-item" href="#using-opaque-ecdsa-keys-to-generate-certificate-signing-requests-csrs">Using opaque ECDSA keys to generate certificate signing requests (CSRs)</a>
                        
                        <a class="toc-item" href="#using-opaque-pre-shared-keys-with-tls-psk-ciphersuites">Using opaque pre-shared keys with TLS PSK ciphersuites</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-storage.html">Porting storage</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="blockdevice-port.html">Block Devices</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#implementing-blockdevice">Implementing BlockDevice</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-connectivity.html">Porting connectivity</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="porting-connectivity.html">Connectivity</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#the-network-socket-api-new-device">The network socket API - new device</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="l3-porting.html">IP Layer3 (L3IP) drivers</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#abstractions">Abstractions</a>
                        
                        <a class="toc-item" href="#l3ip-driver-core">L3IP driver core</a>
                        
                        <a class="toc-item" href="#the-ip-layer3-memory-manager">The IP Layer3 memory manager</a>
                        
                        <a class="toc-item" href="#ip-layer3-interface">IP Layer3 interface</a>
                        
                        <a class="toc-item" href="#being-the-default-interface">Being the default interface</a>
                        
                        <a class="toc-item" href="#cellular-interfaces">Cellular interfaces</a>
                        
                        <a class="toc-item" href="#onboardnetworkstack">OnboardNetworkStack</a>
                        
                        <a class="toc-item" href="#tuning-memory-allocations">Tuning memory allocations</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="ethernet-port.html">Ethernet MAC (EMAC) drivers</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#abstractions">Abstractions</a>
                        
                        <a class="toc-item" href="#the-emac-driver-core">The EMAC driver core</a>
                        
                        <a class="toc-item" href="#the-emac-memory-manager">The EMAC memory manager</a>
                        
                        <a class="toc-item" href="#ethernetinterface">EthernetInterface</a>
                        
                        <a class="toc-item" href="#being-the-default-emac-or-ethernetinterface">Being the default EMAC or EthernetInterface</a>
                        
                        <a class="toc-item" href="#wi-fi-interfaces">Wi-Fi interfaces</a>
                        
                        <a class="toc-item" href="#onboardnetworkstack">OnboardNetworkStack</a>
                        
                        <a class="toc-item" href="#device-emac">DEVICE_EMAC</a>
                        
                        <a class="toc-item" href="#tuning-memory-allocations">Tuning memory allocations</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="wifi-port.html">Wi-Fi</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#wifiinterface">WifiInterface</a>
                        
                        <a class="toc-item" href="#emac-driver">EMAC driver</a>
                        
                        <a class="toc-item" href="#external-ip-stack">External IP stack</a>
                        
                        <a class="toc-item" href="#assumptions">Assumptions</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="networkstack.html">NetworkStack</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#class-hierarchy">Class hierarchy</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                        <a class="toc-item" href="#case-study-esp8266-wi-fi-component">Case study: ESP8266 Wi-Fi component</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="cellular-device-porting.html">Cellular device porting</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#adding-cellular-on-an-mbed-os-target">Adding cellular on an Mbed OS target</a>
                        
                        <a class="toc-item" href="#adding-a-new-cellular-device-driver">Adding a new cellular device driver</a>
                        
                        <a class="toc-item" href="#socket-adaptation">Socket adaptation</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="6lowpan-port.html">IEEE 802.15.4 RF driver</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#porting-a-new-rf-driver">Porting a new RF driver</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                        <a class="toc-item" href="#implementing-the-phy-api">Implementing the PHY API</a>
                        
                        <a class="toc-item" href="#worker-thread-for-mbed-os">Worker thread for Mbed OS</a>
                        
                        <a class="toc-item" href="#example-rf-driver">Example RF driver</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="mac-port.html">Porting IEEE 802.15.4 MAC driver</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#sw-mac">SW MAC</a>
                        
                        <a class="toc-item" href="#initializing-sw-mac">Initializing SW MAC</a>
                        
                        <a class="toc-item" href="#example">Example</a>
                        
                        <a class="toc-item" href="#enabling-fhss">Enabling FHSS</a>
                        
                        <a class="toc-item" href="#ieee-802-15-4-mac-sublayer-apis">IEEE 802.15.4 MAC sublayer APIs</a>
                        
                        <a class="toc-item" href="#mcps-sap-interface">MCPS-SAP interface</a>
                        
                        <a class="toc-item" href="#mlme-sap-interface">MLME-SAP interface</a>
                        
                        <a class="toc-item" href="#mac-api-class-introduction">MAC API class introduction</a>
                        
                        <a class="toc-item" href="#ieee-802-15-4-mac-sublayer-extended-apis">IEEE 802.15.4 MAC sublayer extended APIs</a>
                        
                        <a class="toc-item" href="#mac-api-standard-extensions">MAC API standard extensions</a>
                        
                        <a class="toc-item" href="#hw-mac">HW MAC</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="lora-port.html">Porting LoRaWAN stack and LoRa RF drivers</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#porting-a-lora-rf-driver">Porting a LoRa RF driver</a>
                        
                        <a class="toc-item" href="#device-design-guide-for-lorawan-stack">Device design guide for LoRaWAN stack</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="NFC-port.html">NFC EEPROM driver porting guide</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#class-hierarchy">Class hierarchy</a>
                        
                        <a class="toc-item" href="#required-methods">Required methods</a>
                        
                        <a class="toc-item" href="#asynchronous-operation">Asynchronous operation</a>
                        
                        <a class="toc-item" href="#testing">Testing</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-bootstrap.html">Porting bootstrap</a>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-exporter-targets.html">Porting exporter targets</a>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-tools.html">Porting tools</a>
                
                <div class="toc-level two sub">
                    
                    <a class="toc-item" href="build-tools.html">Build tools</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#postbuild-scripts">Postbuild scripts</a>
                        
                        <a class="toc-item" href="#implementation">Implementation</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="mbed-ls.html">Mbed-ls</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#defined-behavior">Defined behavior</a>
                        
                        <a class="toc-item" href="#implementation">Implementation</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="adding-exporters.html">Adding exporters</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#what-is-an-exporter">What is an exporter</a>
                        
                        <a class="toc-item" href="#export-subsystem-structure">Export subsystem structure</a>
                        
                        <a class="toc-item" href="#implementing-an-example-plugin">Implementing an example plugin</a>
                        
                        <a class="toc-item" href="#suggested-implementation">Suggested implementation</a>
                        
                    </div>
                    
                    
                    <a class="toc-item" href="arm-mbed-hdk.html">Arm Mbed HDK</a>
                    
                    <div class="toc-level three sub closed">
                        
                        <a class="toc-item" href="#hdk-content-per-project">HDK content per project</a>
                        
                        <a class="toc-item" href="#repository-content-and-projects">Repository content and projects</a>
                        
                    </div>
                    
                    
                </div>
                
            </div>
        
            <div class="toc-level one">
                <a class="toc-item" href="porting-custom-boards.html">Porting custom boards</a>
                
            </div>
        

    
        
        <div class="toc-level top">
            <a class="toc-item mbed-os-pelion" href="../mbed-os-pelion/index.html">Reference designs and end-to-end information</a>
        </div>
        

        

    
</div>
                    </div>

                    <div class="page-wrapper" id="page">
                        <div class="row">
                            <div class="content large-12 medium-12 columns" id="content">
                                <div class="breadcrumbs">
                                    
                                    <a href="../index.html">Docs</a>
                                      
                                    
                                    <a href="index.html">Porting</a>
                                      
                                    
                                    <a href="porting-connectivity.html">Porting connectivity</a>
                                      
                                    
                                    <a href="6lowpan-port.html">IEEE 802.15.4 RF driver</a>
                                    
                                    
                                </div>
                                <h1 id="6lowpan-port">IEEE 802.15.4 RF driver</h1><h2 id="porting-a-new-rf-driver">Porting a new RF driver</h2><p>The following steps describe how you can create a new RF driver:</p><ol>
<li>
<p>Please see the <a href="https://github.com/ARMmbed/mbed-os/blob/master/features/nanostack/sal-stack-nanostack/nanostack/platform/arm_hal_phy.h">Nanostack PHY API</a>.</p>
</li>
<li>
<p>Please read through the <a href="#example-rf-driver"><em>Example RF driver</em></a> section. You can use this example code to start.</p>
</li>
<li>
<p>Please see the reference implementations for <a href="https://github.com/ARMmbed/mbed-os/blob/master/components/802.15.4_RF/atmel-rf-driver/source/NanostackRfPhyAtmel.cpp">simple</a> and <a href="https://github.com/ARMmbed/mbed-os/blob/master/components/802.15.4_RF/stm-s2lp-rf-driver/source/NanostackRfPhys2lp.cpp">extended</a> RF drivers.</p>
</li>
<li>
<p>Please read usage of the worker thread <a href="#worker-thread-for-mbed-os"><em>Worker thread for Mbed OS</em></a>.</p>
</li>
<li>
<p>Please see <a href="#implementing-phy-api"><em>Implementing PHY API</em></a> for details how to implement callbacks and API functions:</p>
<ul>
<li>Global time stamp functionality.</li>
<li>RF driver registration.</li>
<li>Address write callback.</li>
<li>State control callback.</li>
<li>RF extension callback.</li>
<li>TX functionality.</li>
<li>RX functionality.</li>
</ul>
</li>
</ol><h2 id="testing">Testing</h2><p>To verify the implementation of the RF driver, please create a working Mesh network and run the full set of Mbed OS Socket tests from <a href="https://github.com/ARMmbed/mbed-os/blob/master/TESTS/netsocket/README.md">TESTS/netsocket</a>.</p><h2 id="implementing-the-phy-api">Implementing the PHY API</h2><p>PHY API guidance is separated into <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementations, which depend on the configuration you use:</p><ul>
<li>
<p>You can use the <em><strong>simple</strong></em> implementation with 6LoWPAN without frequency hopping.</p>
</li>
<li>
<p>You can use the <em><strong>extended</strong></em> implementation with:</p>
<ul>
<li>6LoWPAN with and without frequency hopping.</li>
<li>Wi-SUN.</li>
</ul>
</li>
</ul><h3 id="global-time-stamp-functionality">Global time stamp functionality</h3><p>This functionality is necessary only with the <em><strong>extended</strong></em> implementation.</p><p>The RF driver must implement a timer with a one-microsecond resolution to return a 32-bit time stamp value. The driver must be able to return the current time stamp when Nanostack requests it. The driver must store the time stamp of received packets where the time is referenced to the first byte after the SFD of the received frame.</p><h3 id="rf-driver-registration">RF driver registration</h3><p>Use <code>arm_net_phy_register</code> to register the RF driver to Nanostack. The function returns the driver ID, which you must use when creating the MAC instance. Registration is similar for both the <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementations. You must fill the structure of <code>phy_driver</code>:</p><table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>link_type</code></td>
<td><code>PHY_LINK_15_4_2_4GHZ_TYPE</code> or <code>PHY_LINK_15_4_SUBGHZ_TYPE</code>.</td>
</tr>
<tr>
<td><code>PHY_MAC</code></td>
<td>PHY driver must deliver a unique 64-bit MAC address.</td>
</tr>
<tr>
<td><code>driver_description</code></td>
<td>Name of the driver.</td>
</tr>
<tr>
<td><code>phy_channel_pages</code></td>
<td>Default RF configurations.</td>
</tr>
<tr>
<td><code>phy_MTU</code></td>
<td>MTU size. Typical values: 127 for 802.15.4-2006, 2047 for 802.15.4g-2012.</td>
</tr>
<tr>
<td><code>phy_header_length</code></td>
<td>Extra header to be allocated for transmitted packet by MAC. Typically 0.</td>
</tr>
<tr>
<td><code>phy_tail_length</code></td>
<td>Extra tail to be allocated for transmitted packet by MAC. Typically 0.</td>
</tr>
<tr>
<td><code>address_write</code></td>
<td>RF address write callback function.</td>
</tr>
<tr>
<td><code>extension</code></td>
<td>RF extension callback function.</td>
</tr>
<tr>
<td><code>state_control</code></td>
<td>RF state control callback function.</td>
</tr>
<tr>
<td><code>tx</code></td>
<td>RF packet transmit callback function.</td>
</tr>
</tbody>
</table><p>Any other callbacks and parameters must be nullified.</p><h3 id="address-write-callback">Address write callback</h3><p>Nanostack calls the address write callback <code>int8_t (*address_write)(phy_address_type_e, uint8_t *)</code> to set addresses for RF receive filtering. This callback is similar for both the <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementations.</p><table>
<thead>
<tr>
<th>Address type</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PHY_MAC_64BIT</code></td>
<td>Driver must set given 64-bit address as the receive address filter.</td>
</tr>
<tr>
<td><code>PHY_MAC_16BIT</code></td>
<td>Driver must set given 16-bit address as the receive address filter.</td>
</tr>
<tr>
<td><code>PHY_MAC_PANID</code></td>
<td>Driver must set given 16-bit PAN ID as the receive PAN ID filter.</td>
</tr>
</tbody>
</table><h3 id="state-control-callback">State control callback</h3><p>Nanostack calls the state control callback <code>int8_t (*state_control)(phy_interface_state_e, uint8_t)</code> to change the RF state. This callback is similar for both the <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementations.</p><table>
<thead>
<tr>
<th>State</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PHY_INTERFACE_RESET</code></td>
<td>Driver must stop any active TX and RX processes and set radio to idle state.</td>
</tr>
<tr>
<td><code>PHY_INTERFACE_DOWN</code></td>
<td>Driver must stop any active TX and RX processes and set radio to sleep or idle state.</td>
</tr>
<tr>
<td><code>PHY_INTERFACE_UP</code></td>
<td>Driver must wake up the radio and enable receiver on a channel that was given as parameter.</td>
</tr>
<tr>
<td><code>PHY_INTERFACE_RX_ENERGY_STATE</code></td>
<td>Driver must initialize energy detection on a channel that was given as parameter. Nanostack reads the ED result using RF extension <code>PHY_EXTENSION_READ_CHANNEL_ENERGY</code>.</td>
</tr>
<tr>
<td><code>PHY_INTERFACE_SNIFFER_STATE</code></td>
<td>Driver must enable receiver on a channel that was given as parameter. All filtering must be disabled. This state is used only if device is set as Sniffer.</td>
</tr>
</tbody>
</table><h3 id="rf-extension-callback">RF extension callback</h3><p>Nanostack calls the RF extension callback <code>int8_t (*extension)(phy_extension_type_e, uint8_t *)</code> to set or get various PHY parameters. Some of the extensions are needed only with <em><strong>extended</strong></em> implementations.</p><p>Mandatory for <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementations:</p><table>
<thead>
<tr>
<th>Extension type</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PHY_EXTENSION_CTRL_PENDING_BIT</code></td>
<td>Driver must set frame pending bit of the Ack frames high or low depending on the value of given (uint8_t *) parameter. If parameter &gt; 0, set frame pending bit to 1 and otherwise to 0.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_READ_LAST_ACK_PENDING_STATUS</code></td>
<td>Driver must return the state of the frame pending bit used in last transmitted Ack frame. State (0 or 1) must be written to given (uint8_t *) parameter.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_READ_CHANNEL_ENERGY</code></td>
<td>Driver must return the read channel energy. Value must be written in given (uint8_t *) parameter as an 8-bit integer.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_ACCEPT_ANY_BEACON</code></td>
<td>Driver must stop filtering received 802.15.4 Beacon frames and accept them all if the given (uint8_t *) parameter is &gt; 0.</td>
</tr>
</tbody>
</table><p>Mandatory for <em><strong>extended</strong></em> implementation:</p><table>
<thead>
<tr>
<th>Extension type</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PHY_EXTENSION_SET_CHANNEL</code></td>
<td>Driver must enable receiver on a channel which was given as parameter. If radio is currently receiving or transmitting a frame, channel should be changed after the TX/RX process.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_READ_RX_TIME</code></td>
<td>Driver must return the time stamp of last received packet. Time stamp must be referenced to first byte after SFD field of the received packet.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_DYNAMIC_RF_SUPPORTED</code></td>
<td>Driver must return 1 if it supports <em><strong>extended</strong></em> RF driver implementation. By default, Nanostack assumes <em><strong>simple</strong></em> implementation is used. Value (0 or 1) must be written to given (<code>uint8_t *</code>) parameter.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_GET_TIMESTAMP</code></td>
<td>Driver must return 32-bit time stamp by writing it to given (<code>uint8_t *</code>) parameter.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_SET_CSMA_PARAMETERS</code></td>
<td>Driver must read <code>phy_csma_params_t</code> type structure behind given (<code>uint8_t *</code>) parameter. If parameter <code>backoff_time</code> is 0, any on-going transmission must be canceled and radio set to receive state on the current channel. 32-bit <code>backoff_time</code> and boolean <code>cca_enabled</code> must be stored because they will be used for next packet transmission.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_GET_SYMBOLS_PER_SECOND</code></td>
<td>Driver must return symbol rate as symbols per second. 32-bit value must be written to given (<code>uint8_t *</code>) parameter.</td>
</tr>
<tr>
<td><code>PHY_EXTENSION_SET_RF_CONFIGURATION</code></td>
<td>Driver must read <code>phy_rf_channel_configuration_s</code> type structure behind given (<code>uint8_t *</code>) parameter. Driver must start using given RF configuration as soon as possible. If radio is currently receiving or transmitting a frame, configuration should be changed after the TX/RX process.</td>
</tr>
</tbody>
</table><p>Optional:</p><table>
<thead>
<tr>
<th>Extension type</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PHY_EXTENSION_FILTERING_SUPPORT</code></td>
<td>If RF driver can support filtering and acking certain MAC frame types, it can set the corresponding bit in a given (<code>uint8_t *</code>) parameter to 1, which disables the filtering of this frame type from Nanostack.</td>
</tr>
</tbody>
</table><h3 id="tx-functionality">TX functionality</h3><p>Nanostack calls the TX callback <code>int8_t (*tx)(uint8_t *, uint16_t, uint8_t, data_protocol_e)</code> to start packet transmission. To implement the TX callback, follow either the <em><strong>simple</strong></em> or <em><strong>extended</strong></em> implementation path:</p><ol>
<li>Driver must return -1 if it is currently busy (already transmitting or receiving) or 0 if it can start transmission.</li>
<li>When TX callback allows starting the transmission by returning 0, it must tell to Nanostack when the transmission is done by calling <code>phy_tx_done_cb</code> with proper TX done status. Parameter <code>tx_handle</code> in a TX done call must be set to same value as in a corresponding TX (start) call.</li>
<li>Copy transmitted data from behind given first (<code>uint8_t *</code>) parameter to radio TX FIFO and prepare radio ready for transmission. Data behind this pointer is valid and unchanged until the driver calls the <code>phy_tx_done_cb</code>, which allows data to be copied to TX FIFO also when RF driver has returned from the TX function.</li>
</ol><p><em><strong>Simple</strong></em> implementation:</p><ol>
<li>
<p>Start optional CSMA-CA period or check CCA immediately. Using a short (1-5 ms) randomly generated CSMA-CA period significantly reduces the number of collisions when network size increases.</p>
</li>
<li>
<p>If the channel is not available, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_CCA_FAIL</code>. If the RF driver performs several CCA attempts, the <code>cca_retry</code> parameter must list the number of attempts.</p>
</li>
<li>
<p>If channel is available, start transmission immediately.</p>
</li>
<li>
<p>When transmission is finished, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_TX_SUCCESS</code>.</p>
</li>
<li>
<p>If the Ack frame was received for transmitted packet, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_TX_DONE</code> or <code>PHY_LINK_TX_DONE_PENDING</code> depending on the state of frame pending field in the Ack frame.</p>
<p><span class="notes"><strong>Note:</strong> It is the RF driver's responsibility to compare the sequence number of the transmitted data and received Ack frame.</span></p>
</li>
<li>
<p>If the driver performed MAC retransmissions, the <code>tx_retry</code> parameter must list the number of retry attempt.</p>
</li>
</ol><p><em><strong>Extended</strong></em> implementation:</p><ol>
<li>
<p>Read the stored CCA mode (<code>cca_enabled</code>), which Nanostack set with the <code>PHY_EXTENSION_SET_CSMA_PARAMETERS</code> event just before the current transmission. If <code>cca_enabled</code> equals to <code>false</code>, the driver must not check CCA but proceed to next step as if the channel was available.</p>
</li>
<li>
<p>Read the stored backoff time, which Nanostack set with the <code>PHY_EXTENSION_SET_CSMA_PARAMETERS</code> event just before the current transmission. If the backoff time is 0, cancel the transmission.</p>
</li>
<li>
<p>Calculate the length of the CSMA-CA period using the time stamp and given backoff time: <code>csma_ca = backoff_time - current_time</code>.</p>
</li>
<li>
<p>Start the CSMA-CA timer with the calculated <code>csma_ca</code>. This timer must operate with 1 microsecond resolution. If <code>csma_ca</code> is larger than 65000 us, start the CSMA-CA timer with a minimum possible timeout value (1 us).</p>
</li>
<li>
<p>When the CSMA-CA timeout has passed, the driver must call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_CCA_PREPARE</code> to read the state of the CSMA-CA process. State is given as a return value of the <code>phy_tx_done_cb</code> call.</p>
</li>
<li>
<p>If the state is <code>PHY_TX_NOT_ALLOWED</code>, cancel the transmission. There is no need for an additional <code>phy_tx_done_cb</code> call. Ensure the receiver is enabled.</p>
</li>
<li>
<p>If the state is <code>PHY_RESTART_CSMA</code>, check the CCA immediately. If the channel is not available, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_CCA_FAIL</code>. If the channel is available, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_CCA_OK</code>, and return to step 4. Note that Nanostack has updated CCA mode and backoff time with the <code>PHY_EXTENSION_SET_CSMA_PARAMETERS</code> event.</p>
</li>
<li>
<p>If the state is <code>PHY_TX_ALLOWED</code>, check the CCA immediately. If the channel is not available, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_CCA_FAIL</code>. If the channel is available, start transmission of the packet immediately.</p>
</li>
<li>
<p>When transmission finishes, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_TX_SUCCESS</code>.</p>
</li>
<li>
<p>If Ack frame was received for the transmitted packet, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_TX_DONE</code> or <code>PHY_LINK_TX_DONE_PENDING</code>, depending on the state of frame pending field in Ack.</p>
<p><span class="notes"><strong>Note:</strong> It is the RF driver's responsibility to compare the sequence number of the transmitted data and received Ack frame unless the IEEE 802.15.4-2015 frames are used.</span></p>
</li>
<li>
<p>The driver must not generate additional CSMA-CA or MAC retransmission attempts with <em><strong>extended</strong></em> implementation because the transmitted frame contains timing critical information, which Nanostack needs to update before every attempt.</p>
</li>
</ol><h3 id="rx-functionality">RX functionality</h3><p>When Nanostack has called <code>PHY_INTERFACE_UP</code> RF state, the receiver must be kept enabled on a channel given by the <code>PHY_INTERFACE_UP</code> or <code>PHY_EXTENSION_SET_CHANNEL</code> event unless transmission is active until the <code>PHY_INTERFACE_RESET</code> or <code>PHY_INTERFACE_DOWN</code> RF state is called. RX functionality is similar for both <em><strong>simple</strong></em> and <em><strong>extended</strong></em> implementation. Depending on your application, the driver only needs to handle the wanted frame type (for example, 802.15.4-2006 or 802.15.4-2015).</p><p>Nanostack is capable of filtering and acking IEEE 802.15.4-2015 frames. The RF driver must filter and ack any other frame version. For a received frame, the driver must call the RX callback <code>arm_net_phy_rx_fn *phy_rx_cb(const uint8_t *data_ptr, uint16_t data_len, uint8_t link_quality, int8_t dbm, int8_t driver_id)</code>, where:</p><ul>
<li><code>data_ptr</code> - Pointer to the beginning of received MAC frame.</li>
<li><code>data_len</code> - MAC frame length.</li>
<li><code>link_quality</code> - LQI of the received frame.</li>
<li><code>dbm</code> - RSSI of the received frame.</li>
<li><code>driver_id</code> - ID of the RF driver.</li>
</ul><p>To handle the received frame, check the frame version of a received packet. For IEEE 802.15.4-2015 frames, call <code>phy_rx_cb</code>.</p><p>For other frame types:</p><ol>
<li>
<p>Check if the received frame is Ack. If true, check if the received frame is Ack for a packet the driver previously sent. If true, call <code>phy_tx_done_cb</code> with status <code>PHY_LINK_TX_DONE</code> or <code>PHY_LINK_TX_DONE_PENDING</code>, depending on the state of frame pending field in Ack.</p>
</li>
<li>
<p>Otherwise, filter PAN ID and MAC address:</p>
<ul>
<li>
<p>Drop packet by PAN ID filter if all conditions below are true:</p>
<ul>
<li>Received destination PAN id ID not broadcast (0xffff).</li>
<li>Nodes own PAN ID is set (not 0xffff).</li>
<li>Received destination PAN ID does not equal to nodes PAN ID.</li>
</ul>
</li>
<li>
<p>Frame is not IEEE 802.15.4 Beacon frame. This condition is necessary only if <code>PHY_EXTENSION_ACCEPT_ANY_BEACON</code> is set by Nanostack.</p>
</li>
<li>
<p>Drop packet by address filter if all conditions below are true:</p>
<ul>
<li>Received destination address is not broadcast address.</li>
<li>Received destiantion address does not equal to nodes 16-bit or 64-bit MAC address.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>If received frame passes the filtering, check if ack is required, and transmit it immediately.</p>
</li>
<li>
<p>If received frame passes the filtering, call <code>phy_rx_cb</code>.</p>
</li>
</ol><h2 id="worker-thread-for-mbed-os">Worker thread for Mbed OS</h2><p>Nanostack's interfaces use mutexes for protecting the access from multiple threads. In Mbed OS, you cannot use the mutex from an interrupt. The same applies to all APIs that have internal locking and multithread support. Therefore, each driver must implement its own worker thread to handle the interrupt requests.</p><p>Example: Use the worker thread and signals from an interrupt.</p><pre><code>// Signals from interrupt routines
#define SIG_RADIO       1
#define SIG_TIMER       2

// Worker thread
Thread irq_thread;

// Interrupt routines
static void rf_interrupt(void)
{
    irq_thread.signal_set(SIG_RADIO);
}

static void rf_timer_interrupt(void)
{
    irq_thread.signal_set(SIG_TIMER);
}


// Worker thread
void rf_worker_thread(void)
{
    for (;;) {
        osEvent event = irq_thread.signal_wait(0);
        if (event.status != osEventSignal) {
            continue;
        }

        if (event.value.signals &amp; SIG_RADIO) {
            rf_process_irq();
        }
        if (event.value.signals &amp; SIG_TIMER) {
            rf_process_timer();
        }
    }
}

...
// Somewhere in the initialization code
irq_thread.start(rf_worker_thread);

</code></pre><h2 id="example-rf-driver">Example RF driver</h2><p>The following code example is not a complete driver but shows you how to use the API to create a RF driver:</p><pre><code>static uint8_t mac_address[8];
static phy_device_driver_s device_driver;
static int8_t rf_radio_driver_id = -1;

const phy_rf_channel_configuration_s phy_2_4ghz = {2405000000, 5000000, 250000, 16, M_OQPSK, MODULATION_INDEX_UNDEFINED};
const phy_rf_channel_configuration_s phy_subghz = {868300000, 2000000, 250000, 11, M_OQPSK, MODULATION_INDEX_UNDEFINED};

static phy_device_channel_page_s phy_channel_pages[] = {
	{CHANNEL_PAGE_0, &amp;phy_2_4ghz},
	{CHANNEL_PAGE_0, NULL}
};

int8_t rf_device_register(void)
{
    /* Do some initialization */
    rf_init();
    /* Set pointer to MAC address */
    device_driver.PHY_MAC = mac_address;
    /* Set driver Name */
    device_driver.driver_description = "Example";

    if(subghz_radio) /* Configuration for Sub GHz Radio */
    {
        /*Type of RF PHY is SubGHz*/
        device_driver.link_type = PHY_LINK_15_4_SUBGHZ_TYPE;
        phy_channel_pages[0].channel_page = CHANNEL_PAGE_2;
        phy_channel_pages[0].rf_channel_configuration = &amp;phy_subghz;
    }
    else /* Configuration for 2.4 GHz Radio */
    {
        /*Type of RF PHY is 2.4 GHz*/
        device_driver.link_type = PHY_LINK_15_4_2_4GHZ_TYPE;
        phy_channel_pages[0].channel_page = CHANNEL_PAGE_0;
        phy_channel_pages[0].rf_channel_configuration = &amp;phy_2_4ghz;
    }

    /*Maximum size of payload is 127*/
    device_driver.phy_MTU = 127;
    /*No header in PHY*/
    device_driver.phy_header_length = 0;
    /*No tail in PHY*/
    device_driver.phy_tail_length = 0;

    /*Set up driver functions*/
    device_driver.address_write = &amp;rf_address_write;
    device_driver.extension = &amp;rf_extension;
    device_driver.state_control = &amp;rf_interface_state_control;
    device_driver.tx = &amp;rf_start_cca;
    /*Set supported channel pages*/
    device_driver.phy_channel_pages = phy_channel_pages;
    //Nullify rx/tx callbacks
    device_driver.phy_rx_cb = NULL;
    device_driver.phy_tx_done_cb = NULL;
    device_driver.arm_net_virtual_rx_cb = NULL;
    device_driver.arm_net_virtual_tx_cb = NULL;

    /*Register device driver*/
    rf_radio_driver_id = arm_net_phy_register(&amp;device_driver);

    return rf_radio_driver_id;
}

void rf_handle_rx_end(void)
{
    uint8_t rf_lqi;
    int8_t rf_rssi;
    uint16_t rf_buffer_len;
    uint8_t *rf_buffer;

    /* Get received data */
    rf_buffer_len = rf_get_rf_buffer(rf_buffer);
    if(!rf_buffer_len)
        return;

    /* If waiting for ACK, check here if the packet is an ACK to a message previously sent (non IEEE 802.15.4-2015). Remember to call phy_tx_done_cb with either PHY_LINK_TX_DONE or PHY_LINK_TX_DONE_PENDING status */

    /* Filter the packet here unless it was already done by the hardware (non IEEE 802.15.4-2015) */

    /* Send Ack here if needed unless it was already done by the hardware (non IEEE 802.15.4-2015) */

    /* Get link information */
    rf_rssi = rf_get_rssi();
    rf_lqi = rf_get_lqi();

    /* Note: Checksum of the packet must be checked and removed before entering here */

    /* Send received data and link information to the network stack */
    if( device_driver.phy_rx_cb ){
    	device_driver.phy_rx_cb(rf_buffer, rf_buffer_len, rf_lqi, rf_rssi, rf_radio_driver_id);
    }
}

int8_t rf_start_cca(uint8_t *data_ptr, uint16_t data_length, uint8_t tx_handle, data_protocol_e data_protocol)
{
    /*Check if transmitter is busy*/
    if(transmitter_busy)
    {
        /*Return busy*/
        return -1;
    }
    else
    {
        /*Check if transmitted data needs to be ACKed*/
        if(*data_ptr &amp; 0x20)
            need_ack = 1;
        else
            need_ack = 0;
        /*Store the sequence number for ACK handling*/
        tx_sequence = *(data_ptr + 2);

        /* Store data and start CCA process here */
        /* When the CCA process is ready send the packet */
        /* Note: Before sending the packet you need to calculate and add a checksum to it, unless done automatically by the radio */
        /* Note: phy_tx_done_cb must be called when transmission is done (PHY_LINK_TX_SUCCESS) or when CCA returns unavailable channel (PHY_LINK_CCA_FAIL) */
    }

    /*Return success*/
    return 0;
}

static int8_t rf_interface_state_control(phy_interface_state_e new_state, uint8_t rf_channel)
{
    int8_t ret_val = 0;
    switch (new_state)
    {
        /*Reset PHY driver and set to idle*/
        case PHY_INTERFACE_RESET:
            rf_reset();
            break;
        /*Disable PHY Interface driver*/
        case PHY_INTERFACE_DOWN:
            rf_shutdown();
            break;
        /*Enable PHY Interface driver*/
        case PHY_INTERFACE_UP:
            rf_channel_set(rf_channel);
            rf_receive();
            break;
        /*Enable wireless interface ED scan mode*/
        case PHY_INTERFACE_RX_ENERGY_STATE:
            break;
        /*Enable Sniffer state*/
        case PHY_INTERFACE_SNIFFER_STATE:
            rf_setup_sniffer(rf_channel);
            break;
    }
    return ret_val;
}

static int8_t rf_extension(phy_extension_type_e extension_type, uint8_t *data_ptr)
{
    switch (extension_type)
    {
        /*Control MAC pending bit for Indirect data transmission*/
        case PHY_EXTENSION_CTRL_PENDING_BIT:
        /*Return frame pending status*/
        case PHY_EXTENSION_READ_LAST_ACK_PENDING_STATUS:
            *data_ptr = rf_if_last_acked_pending();
            break;
        /*Set channel, used for setting channel for energy scan*/
        case PHY_EXTENSION_SET_CHANNEL:
            rf_channel_set(rf_channel);
            rf_receive();
            break;
        /*Read energy on the channel*/
        case PHY_EXTENSION_READ_CHANNEL_ENERGY:
            *data_ptr = rf_get_channel_energy();
            break;
        /*Read status of the link*/
        case PHY_EXTENSION_READ_LINK_STATUS:
            *data_ptr = rf_get_link_status();
            break;
    }
    return 0;
}

static int8_t rf_address_write(phy_address_type_e address_type, uint8_t *address_ptr)
{

    switch (address_type)
    {
        /*Set 48-bit address*/
        case PHY_MAC_48BIT:
            /* Not used in this example */
            break;
        /*Set 64-bit address*/
        case PHY_MAC_64BIT:
            rf_set_mac_address(address_ptr);
            break;
        /*Set 16-bit address*/
        case PHY_MAC_16BIT:
            rf_set_short_adr(address_ptr);
            break;
        /*Set PAN Id*/
        case PHY_MAC_PANID:
            rf_set_pan_id(address_ptr);
            break;
    }

    return 0;
}
</code></pre>
                            </div>
                        </div>

                        
                        <div class="row">
                            <div class="next-prev-links large-12 medium-12 small-12 columns">
                                
                                <a class="prev-link" href="cellular-device-porting.html"><i aria-hidden="true" class="fa fa-arrow-circle-left"></i> Previous</a>
                                

                                
                                <a class="next-link" href="mac-port.html">Next <i aria-hidden="true" class="fa fa-arrow-circle-right"></i></a>
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="../static/js/toc.mbed-cache-261a3b3a8a10e9d430f4bb5fdd0e5b5c.js"></script>
        <script src="../static/js/vendor/foundation-6.2.4.min.mbed-cache-9f0af735cc1c2011ddd8e8a94273129a.js"></script>
        <script>
            $('#docs-content').foundation();
            $(document).ready(function() {
                initToC();
            });
        </script>
    

        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright  <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/porting/6lowpan-port.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 14:16:59 GMT -->
</html>
