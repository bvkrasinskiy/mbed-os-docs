<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/feature-i2c-doxy/_lo_ra_p_h_y_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 16:07:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | LoRaPHY.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="_lo_ra_p_h_y_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/feature-i2c-doxy/_lo_ra_p_h_y_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/feature-i2c-doxy/_lo_ra_p_h_y_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_c6fb7cfc6dd92a7f08bce53368056667.html">features</a></li><li class="navelem"><a class="el" href="dir_cdc70d4ef701944efac0a567ecdcada8.html">lorawan</a></li><li class="navelem"><a class="el" href="dir_b6b3e4dcb601c8d8b713daccee6070df.html">lorastack</a></li><li class="navelem"><a class="el" href="dir_c395c5e9a4a6c2f334cc9cb8a1d0d573.html">phy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoRaPHY.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_lo_ra_p_h_y_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/**</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> *  @file LoRaPHY.h</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> *  @brief An abstract class providing radio object to children and</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> *         provide base for implementing LoRa PHY layer</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> *</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> *  \code</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> *   ______                              _</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> *  / _____)             _              | |</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> * ( (____  _____ ____ _| |_ _____  ____| |__</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> *  \____ \| ___ |    (_   _) ___ |/ ___)  _ \</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> *  _____) ) ____| | | || |_| ____( (___| | | |</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * (______/|_____)_|_|_| \__)_____)\____)_| |_|</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> *   (C)2013 Semtech</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> *  ___ _____ _   ___ _  _____ ___  ___  ___ ___</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> * / __|_   _/_\ / __| |/ / __/ _ \| _ \/ __| __|</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="comment"> * \__ \ | |/ _ \ (__| ' &lt;| _| (_) |   / (__| _|</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="comment"> * |___/ |_/_/ \_\___|_|\_\_| \___/|_|_\\___|___|</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="comment"> * embedded.connectivity.solutions===============</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> <span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="comment"> * \endcode</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="comment"> * Description: LoRa PHY layer</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="comment"> *</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="comment"> * License: Revised BSD License, see LICENSE.TXT file include in the project</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="comment"> *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="comment"> * Maintainer: Miguel Luis ( Semtech ), Gregory Cristian ( Semtech ) and Daniel Jaeckle ( STACKFORCE )</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="comment"> *</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="comment"> * Copyright (c) 2017, Arm Limited and affiliates.</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="comment"> * SPDX-License-Identifier: BSD-3-Clause</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="comment"> *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="comment"> */</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="preprocessor">#ifndef MBED_OS_LORAPHY_BASE_</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="preprocessor">#define MBED_OS_LORAPHY_BASE_</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="preprocessor">#include "platform/NonCopyable.h"</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> </div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="preprocessor">#include "system/LoRaWANTimer.h"</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="preprocessor">#include "LoRaRadio.h"</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="preprocessor">#include "<a class="code" href="lora__phy__ds_8h.html">lora_phy_ds.h</a>"</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="comment"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment">/** LoRaPHY Class</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment"> * Parent class for LoRa regional PHY implementations</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> */</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_lo_ra_p_h_y.html">   46</a></span> <span class="keyword">class </span><a class="code" href="class_lo_ra_p_h_y.html">LoRaPHY</a> : <span class="keyword">private</span> <a class="code" href="classmbed_1_1_non_copyable.html">mbed::NonCopyable</a>&lt;LoRaPHY&gt; {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> </div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="keyword">public</span>:</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>     <span class="keyword">virtual</span> ~<a class="code" href="class_lo_ra_p_h_y.html">LoRaPHY</a>();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="comment">    /** Initialize LoRaPHY</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="comment">     *</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="comment">     *  LoRaMac calls this to initialize LoRaPHY.</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="comment">     *</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="comment">     * @param lora_time a pointer to LoRaWANTimeHandler object</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="comment">     */</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a44b81e38207e306ee45ea33cbf013832">initialize</a>(<a class="code" href="class_lo_ra_w_a_n_time_handler.html">LoRaWANTimeHandler</a> *lora_time);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="comment">    /** Stores a reference to Radio object.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> <span class="comment">     *</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="comment">     * Application is responsible for constructing a 'LoRaRadio' object</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="comment">     * which is passed down to the PHY layer.</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> <span class="comment">     *</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> <span class="comment">     * @param radio    a reference to radio driver object</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="comment">     */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a3cf8afbe8a60575f8bea06760f0a5d8e">set_radio_instance</a>(<a class="code" href="class_lo_ra_radio.html">LoRaRadio</a> &amp;radio);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="comment"></span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> <span class="comment">    /** Puts radio in sleep mode.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment">     *</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment">     * Requests the radio driver to enter sleep mode.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment">     */</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a1c58d7708ee03db9f64fac2cd2eb2ac4">put_radio_to_sleep</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment">    /** Puts radio in standby mode.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="comment">     *</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment">     * Requests the radio driver to enter standby mode.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment">     */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a98b3f57889049eefdbb05eed70dbc577">put_radio_to_standby</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="comment">    /** Puts radio in receive mode.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment">     *</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment">     * Requests the radio driver to enter receive mode.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment">     */</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#ac90fbfb16154d2a7ebaa499d246b5ee4">handle_receive</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment">    /** Delegates MAC layer request to transmit packet.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment">     *</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment">     * @param buf    a pointer to the data which needs to be transmitted</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment">     *</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment">     * @param size   size of the data in bytes</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment">     */</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a18a3ee5e14d0a1b83c5c9b51482a3cb3">handle_send</a>(uint8_t *buf, uint8_t size);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment">    /** Enables/Disables public network mode.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment">     *</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment">     * Public and private LoRaWAN network constitute different preambles and</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment">     * Net IDs. This API isused to tell the radio which network mode is in use.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment">     *</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment">     * @param set    true or false</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="comment">     */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#aad45c000c3542ab550e810f880b8a783">setup_public_network_mode</a>(<span class="keywordtype">bool</span> <span class="keyword">set</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment">    /** Provides a random number from radio.</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment">     *</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment">     * Returns a 32-bit random unsigned integer value based upon RSSI</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment">     * measurements.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment">     *</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment">     * @return    a 32-bit long random number</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment">     *</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment">     */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>     uint32_t <a class="code" href="class_lo_ra_p_h_y.html#a49c8f76e530c74246c475a9f8d92269b">get_radio_rng</a>();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="comment">    /**</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment">     * @brief calculate_backoff Calculates and applies duty cycle back-off time.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment">     *                          Explicitly updates the band time-off.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment">     *</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment">     * @param joined                Set to true, if the node has already joined a network, otherwise false.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment">     * @param last_tx_was_join_req  Set to true, if the last uplink was a join request.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment">     * @param dc_enabled            Set to true, if the duty cycle is enabled, otherwise false.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment">     * @param channel               The current channel index.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment">     * @param elapsed_time          Elapsed time since the start of the node.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> <span class="comment">     * @param tx_toa                Time-on-air of the last transmission.</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment">     */</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#af9d4fa69df838cd28e3d7ab856563f43">calculate_backoff</a>(<span class="keywordtype">bool</span> joined, <span class="keywordtype">bool</span> last_tx_was_join_req, <span class="keywordtype">bool</span> dc_enabled, uint8_t channel,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>                            <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> elapsed_time, <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> tx_toa);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment"></span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment">    /**</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment">      * Tests if a channel is on or off in the channel mask</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment">      */</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a925f621bb9b203f60c846fd80040f4ca">mask_bit_test</a>(<span class="keyword">const</span> uint16_t *mask, <span class="keywordtype">unsigned</span> bit);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment"></span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment">    /**</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment">      * Tests if a channel is on or off in the channel mask</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment">      */</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a83b6c3bb24e64f3d42862464cf195c58">mask_bit_set</a>(uint16_t *mask, <span class="keywordtype">unsigned</span> bit);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment">    /**</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment">      * Tests if a channel is on or off in the channel mask</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment">      */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a590fe6c4b8d5f2dc468acc81cd80e00d">mask_bit_clear</a>(uint16_t *mask, <span class="keywordtype">unsigned</span> bit);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment">    /** Entertain a new channel request MAC command.</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="comment">     *</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment">     * MAC command subsystem processes the new channel request coming form</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment">     * the network server and then MAC layer asks the PHY layer to entertain</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment">     * the request.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment">     *</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment">     * @param channel_id The channel ID.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span> <span class="comment">     * @param new_channel A pointer to the new channel's parameters.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span> <span class="comment">     *</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span> <span class="comment">     * @return bit mask, according to the LoRaWAN spec 1.0.2.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> <span class="comment">     */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>     <span class="keyword">virtual</span> uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a68c1e80eaadcc46f1677e85957a289b3">request_new_channel</a>(int8_t channel_id, <a class="code" href="structchannel__params__t.html">channel_params_t</a> *new_channel);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment"></span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment">    /** Process PHY layer state after a successful transmission.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment">     * @brief set_last_tx_done Updates times of the last transmission for the particular channel and</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="comment">     *                         band upon which last transmission took place.</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span> <span class="comment">     * @param channel The channel in use.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span> <span class="comment">     * @param joined Boolean telling if node has joined the network.</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span> <span class="comment">     * @param last_tx_done_time The last TX done time.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span> <span class="comment">     */</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a04163f6cc7c3e4b6659ac4ff46e08450">set_last_tx_done</a>(uint8_t channel, <span class="keywordtype">bool</span> joined, <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> last_tx_done_time);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> <span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> <span class="comment">    /** Enables default channels only.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="comment">     *</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment">     * Falls back to a channel mask where only default channels are enabled, all</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment">     * other channels are disabled.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment">     */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a202618818cc9b0a0b9f3387fd81a7733">restore_default_channels</a>();</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment">    /** Processes the incoming CF-list.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment">     *</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment">     * Handles the payload containing CF-list and enables channels defined</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment">     * therein.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">     *</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span> <span class="comment">     * @param payload Payload to process.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment">     * @param size Size of the payload.</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span> <span class="comment">     *</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment">     */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a38dd3d6dcc9d83483d9ca6c2d40bfb14">apply_cf_list</a>(<span class="keyword">const</span> uint8_t *payload, uint8_t size);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> <span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment">    /** Calculates the next datarate to set, when ADR is on or off.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> <span class="comment">     *</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment">     * @param restore_channel_mask    A boolean set restore channel mask in case</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment">     *                                of failure.</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span> <span class="comment">     *</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span> <span class="comment">     * @param dr_out                  The calculated datarate for the next TX.</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> <span class="comment">     *</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> <span class="comment">     * @param tx_power_out            The TX power for the next TX.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span> <span class="comment">     *</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> <span class="comment">     * @param adr_ack_counter         The calculated ADR acknowledgement counter.</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment">     *</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment">     * @return True, if an ADR request should be performed.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment">     */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#af101dd2c04000f1b25fb377491be4a2f">get_next_ADR</a>(<span class="keywordtype">bool</span> restore_channel_mask, int8_t &amp;dr_out,</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>                       int8_t &amp;tx_power_out, uint32_t &amp;adr_ack_counter);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment"></span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span> <span class="comment">    /** Configure radio reception.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="comment">     *</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="comment">     * @param [in] config    A pointer to the RX configuration.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> <span class="comment">     *</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> <span class="comment">     * @return True, if the configuration was applied successfully.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment">     */</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#ab8ce25e895c569b141ae5167b2ce1589">rx_config</a>(<a class="code" href="structrx__config__params__t.html">rx_config_params_t</a> *config);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment">    /** Computing Receive Windows</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment">     *</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment">     * The algorithm tries to calculate the length of receive windows (i.e.,</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> <span class="comment">     * the minimum time it should remain to acquire a lock on the Preamble</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment">     * for synchronization) and the error offset which compensates for the system</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment">     * timing errors. Basic idea behind the algorithm is to optimize for the</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment">     * reception of last 'min_rx_symbols' symbols out of transmitted Premable</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment">     * symbols. The algorithm compensates for the clock drifts, tick granularity</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">     * and system wake up time (from sleep state) by opening the window early for</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment">     * the lower SFs. For higher SFs, the symbol time is large enough that we can</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment">     * afford to open late (hence the positive offset).</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment">     * The table below shows the calculated values for SF7 to SF12 with 125 kHz</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment">     * bandwidth.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment">     *</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment">     * +----+-----+----------+---------+-------------------------+----------------------+-------------------------+</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment">     * | SF | BW (kHz) | rx_error (ms) | wake_up (ms) | min_rx_symbols | window_timeout(symb) | window_offset(ms) |</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="comment">     * +----+-----+----------+---------+-------------------------+----------------------+-------------------------+</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> <span class="comment">     * |  7 |      125 |             5 |            5 |              5 |                   18 |                -7 |</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment">     * |  8 |      125 |             5 |            5 |              5 |                   10 |                -4 |</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment">     * |  9 |      125 |             5 |            5 |              5 |                    6 |                 2 |</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment">     * | 10 |      125 |             5 |            5 |              5 |                    6 |                14 |</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment">     * | 11 |      125 |             5 |            5 |              5 |                    6 |                39 |</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment">     * | 12 |      125 |             5 |            5 |              5 |                    6 |                88 |</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment">     * +----+-----+----------+---------+-------------------------+----------------------+-------------------------+</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment">     *</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment">     * For example for SF7, the receive window will open at downlink start time</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="comment">     * plus the offset calculated and will remain open for the length window_timeout.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment">     *</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment">     *             Symbol time = 1.024 ms</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment">     *             Downlink start: T = Tx + 1s (+/- 20 us)</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment">     *                               |</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment">     *                               |</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment">     *                               |</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment">     *                               |</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment">     *                               |</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment">     *                               +---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment">     *                               |       8 Preamble Symbols      |</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment">     *                               +---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment">     *   | RX Window start time = T +/- Offset</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment">     *   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">     *   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |   |</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment">     *   +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment">     *</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment">     * Similarly for SF12:</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="comment">     *</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment">     *             Symbol time = 32.768 ms</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment">     *             Downlink start: T = Tx + 1s (+/- 20 us)</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment">     *                |</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment">     *                |</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment">     *                |</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span> <span class="comment">     *                |</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment">     *                |</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="comment">     *                +---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment">     *                |       8 Preamble Symbols      |</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">     *                +---+---+---+---+---+---+---+---+</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">     *                           | RX Window start time = T +/- Offset</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment">     *                           +---+---+---+---+---+---+</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment">     *                           |   |   |   |   |   |   |</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span> <span class="comment">     *                           +---+---+---+---+---+---+</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> <span class="comment">     */</span><span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> <span class="comment">    /*!</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment">     * Computes the RX window timeout and offset.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment">     *</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment">     * @param [in] datarate         The RX window datarate index to be used.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment">     *</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">     * @param [in] min_rx_symbols   The minimum number of symbols required to</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> <span class="comment">     *                              detect an RX frame.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment">     *</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment">     * @param [in] rx_error         The maximum timing error of the receiver</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">     *                              in milliseconds. The receiver will turn on</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment">     *                              in a [-rxError : +rxError] ms interval around</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment">     *                              RxOffset.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="comment">     *</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> <span class="comment">     * @param [out] rx_conf_params  Pointer to the structure that needs to be</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="comment">     *                              filled with receive window parameters.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment">     *</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment">     */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a7f3d375c0d0d2e274019c6b3ef2b9966">compute_rx_win_params</a>(int8_t datarate, uint8_t min_rx_symbols,</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>                                        uint32_t rx_error,</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>                                        <a class="code" href="structrx__config__params__t.html">rx_config_params_t</a> *rx_conf_params);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> <span class="comment"></span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="comment">    /** Configure radio transmission.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment">     *</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment">     * @param [in]  tx_config    Structure containing tx parameters.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment">     *</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment">     * @param [out] tx_power     The TX power which will be set.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment">     *</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment">     * @param [out] tx_toa       The time-on-air of the frame.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="comment">     *</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment">     * @return True, if the configuration was applied successfully.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment">     */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#adb63181933fd7cdd815ecd2d303c5335">tx_config</a>(<a class="code" href="structtx__config__params__t.html">tx_config_params_t</a> *<a class="code" href="class_lo_ra_p_h_y.html#adb63181933fd7cdd815ecd2d303c5335">tx_config</a>, int8_t *tx_power,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>                            <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> *tx_toa);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment"></span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> <span class="comment">    /** Processes a Link ADR Request.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> <span class="comment">     *</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment">     * @param [in]  params          A pointer ADR request parameters.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment">     *</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment">     * @param [out] dr_out          The datarate applied.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment">     *</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment">     * @param [out] tx_power_out    The TX power applied.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="comment">     *</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="comment">     * @param [out] nb_rep_out      The number of repetitions to apply.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> <span class="comment">     *</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="comment">     * @param [out] nb_bytes_parsed The number of bytes parsed.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> <span class="comment">     *</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment">     * @return The status of the operation, according to the LoRaMAC specification.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment">     */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>     <span class="keyword">virtual</span> uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a6e892b11fc350f00b75a3243ff270f6b">link_ADR_request</a>(<a class="code" href="structadr__req__params__t.html">adr_req_params_t</a> *params,</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>                                      int8_t *dr_out, int8_t *tx_power_out,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>                                      uint8_t *nb_rep_out,</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>                                      uint8_t *nb_bytes_parsed);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment">    /** Accept or rejects RxParamSetupReq MAC command</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment">     *</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> <span class="comment">     * The function processes a RX parameter setup request in response to</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment">     * server MAC command for RX setup.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment">     *</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment">     * @param [in] params    A pointer to rx parameter setup request.</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment">     *</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment">     * @return The status of the operation, according to the LoRaWAN specification.</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment">     */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>     <span class="keyword">virtual</span> uint8_t <a class="code" href="class_lo_ra_p_h_y.html#afec1a2e11a71b2d1d1db0597b8a82b72">accept_rx_param_setup_req</a>(<a class="code" href="structrx__param__setup__req__s.html">rx_param_setup_req_t</a> *params);</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span> <span class="comment"></span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> <span class="comment">    /**</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> <span class="comment">     * @brief accept_tx_param_setup_req Makes decision whether to accept or reject TxParamSetupReq MAC command.</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> <span class="comment">     *</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment">     * @param ul_dwell_time The uplink dwell time.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment">     * @param dl_dwell_time The downlink dwell time.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment">     *</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment">     * @return True to let the MAC know that the request is</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment">     *         accepted and MAC can apply TX parameters received</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment">     *         form Network Server. Otherwise false is returned.</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment">     */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a17bbbbf79b3f784695100da19cffc539">accept_tx_param_setup_req</a>(uint8_t ul_dwell_time, uint8_t dl_dwell_time);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment"></span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> <span class="comment">    /** Processes a DlChannelReq MAC command.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span> <span class="comment">     *</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> <span class="comment">     * @param channel_id The channel ID to add the frequency.</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> <span class="comment">     * @param rx1_frequency The alternative frequency for the Rx1 window.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment">     *</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment">     * @return The status of the operation, according to the LoRaWAN specification.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment">     */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>     <span class="keyword">virtual</span> uint8_t <a class="code" href="class_lo_ra_p_h_y.html#adfa3d26e30e6996b4737dd2b47dc9136">dl_channel_request</a>(uint8_t channel_id, uint32_t rx1_frequency);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment"></span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment">    /** Alternates the datarate of the channel for the join request.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment">     *</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment">     * @param nb_trials    Number of trials to be made on one given data rate.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment">     *</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment">     * @return             The datarate to apply .</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment">     */</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>     <span class="keyword">virtual</span> int8_t <a class="code" href="class_lo_ra_p_h_y.html#ab1655198dc4a705dae9ad6e6fce4542f">get_alternate_DR</a>(uint8_t nb_trials);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment"></span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment">    /** Searches and sets the next available channel.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment">     *</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment">     * If there are multiple channels found available, one of them is selected</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment">     * randomly.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment">     *</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment">     * @param [in]  nextChanParams Parameters for the next channel.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment">     *</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment">     * @param [out] channel The next channel to use for TX.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment">     *</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment">     * @param [out] time The time to wait for the next transmission according to the duty cycle.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment">     *</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment">     * @param [out] aggregatedTimeOff Updates the aggregated time off.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment">     *</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> <span class="comment">     * @return Function status [1: OK, 0: Unable to find a channel on the current datarate].</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment">     */</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>     <span class="keyword">virtual</span> <a class="code" href="lorawan__types_8h.html#a9efa78377307e6772301c80921b56872">lorawan_status_t</a> <a class="code" href="class_lo_ra_p_h_y.html#a70df2b7a0fe3ad03902bb481583f9a5b">set_next_channel</a>(<a class="code" href="structchannel__selection__params__s.html">channel_selection_params_t</a> *nextChanParams,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>                                               uint8_t *channel, <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> *time,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>                                               <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> *aggregatedTimeOff);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment"></span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment">    /** Adds a channel to the channel list.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment">     *</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment">     * Verifies the channel parameters and if everything is found legitimate,</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment">     * adds that particular channel to the channel list and updates the channel</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment">     * mask.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment">     *</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment">     * @param [in] new_channel A pointer to the parameters for the new channel.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment">     * @param [in] id          Channel ID</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="comment">     *</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment">     * @return LORAWAN_STATUS_OK if everything goes fine, negative error code</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment">     *         otherwise.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment">     */</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>     <span class="keyword">virtual</span> <a class="code" href="lorawan__types_8h.html#a9efa78377307e6772301c80921b56872">lorawan_status_t</a> <a class="code" href="class_lo_ra_p_h_y.html#ae8910bcb2c9aaade429c2d7ccc804df6">add_channel</a>(<span class="keyword">const</span> <a class="code" href="structchannel__params__t.html">channel_params_t</a> *new_channel, uint8_t <span class="keywordtype">id</span>);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment"></span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment">    /** Removes a channel from the channel list.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment">     *</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment">     * @param [in] channel_id Index of the channel to be removed</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment">     *</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment">     * @return True, if the channel was removed successfully.</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment">     */</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#acc79998b47bf343da8d945b6988e11a8">remove_channel</a>(uint8_t channel_id);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment">    /** Puts the radio into continuous wave mode.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment">     *</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment">     * @param [in] continuous_wave   A pointer to the function parameters.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment">     *</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment">     * @param [in] frequency         Frequency to transmit at</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> <span class="comment">     */</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a1858c5b42dbbd4ae93218d254b178efa">set_tx_cont_mode</a>(<a class="code" href="structcontinuous__wave__mode__params__s.html">cw_mode_params_t</a> *continuous_wave,</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>                                   uint32_t frequency = 0);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment"></span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment">    /** Computes new data rate according to the given offset</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment">     *</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment">     * @param [in] dr The current datarate.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment">     *</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment">     * @param [in] dr_offset The offset to be applied.</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> <span class="comment">     *</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span> <span class="comment">     * @return     The computed datarate.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="comment">     */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>     <span class="keyword">virtual</span> uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a891523085f1fc57a2ef6eb0bc7eb0f4b">apply_DR_offset</a>(int8_t dr, int8_t dr_offset);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span> <span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span> <span class="comment">    /**</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment">     * @brief reset_to_default_values resets some parameters to default values</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment">     * @param params Pointer to MAC protocol parameters which will be reset</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="comment">     * @param init If true, most of the values will be modified</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment">     */</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a22b072fa02b1ffc77a1f4f0a0e0a315d">reset_to_default_values</a>(<a class="code" href="structloramac__protocol__params.html">loramac_protocol_params</a> *params, <span class="keywordtype">bool</span> init = <span class="keyword">false</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span> </div><div class="line"><a name="l00426"></a><span class="lineno">  426</span> <span class="keyword">public</span>:<span class="comment"></span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span> <span class="comment">    /**</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> <span class="comment">     * @brief get_next_lower_tx_datarate Gets the next lower datarate</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span> <span class="comment">     * @param datarate Current TX datarate</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> <span class="comment">     * @return Lower datarate than given one or minimum if lower cannot be found anymore</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span> <span class="comment">     */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>     int8_t <a class="code" href="class_lo_ra_p_h_y.html#a22efd2137fa5e372d7e0515e078eba31">get_next_lower_tx_datarate</a>(int8_t datarate);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="comment"></span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment">    /**</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment">     * @brief get_minimum_rx_datarate Gets the minimum RX datarate supported by a device</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment">     * @return Minimum RX datarate</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment">     */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#abd37cda9f0ec20e3842b34957f98d599">get_minimum_rx_datarate</a>();</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment"></span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span> <span class="comment">    /**</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> <span class="comment">     * @brief get_minimum_tx_datarate Gets the minimum TX datarate supported by a device</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span> <span class="comment">     * @return Minimum TX datarate</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span> <span class="comment">     */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a1c44dc7ea420577b0ff3faaed8842c9f">get_minimum_tx_datarate</a>();</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span> <span class="comment"></span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span> <span class="comment">    /**</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> <span class="comment">     * @brief get_default_tx_datarate Gets the default TX datarate</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment">     * @return default TX datarate</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment">     */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a1a5157c1820fdd238b85ca9b43bb48fc">get_default_tx_datarate</a>();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment">    /**</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment">     * @brief get_default_max_tx_datarate Gets the maximum achievable data rate for</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment">     *        LoRa modulation. This will always be the highest data rate achievable with</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment">     *        LoRa as defined in the regional specifications.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment">     * @return Maximum achievable data rate with LoRa modulation.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span> <span class="comment">     */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#ade00bb38a6207da775a2329fd19aa11e">get_default_max_tx_datarate</a>();</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span> <span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span> <span class="comment">    /**</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span> <span class="comment">     * @brief get_default_tx_power Gets the default TX power</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span> <span class="comment">     * @return Default TX power</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span> <span class="comment">     */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a92fde44d19b02724217a51f56c6b7aa2">get_default_tx_power</a>();</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> <span class="comment"></span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span> <span class="comment">    /**</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span> <span class="comment">     * @brief get_max_payload Gets maximum amount in bytes which device can send</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span> <span class="comment">     * @param datarate A datarate to use</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span> <span class="comment">     * @param use_repeater If true repeater table is used, otherwise payloads table is used</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span> <span class="comment">     * @return Maximum number of bytes for payload</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span> <span class="comment">     */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#ad90b24d66e3681172e49411b19c52c67">get_max_payload</a>(uint8_t datarate, <span class="keywordtype">bool</span> use_repeater = <span class="keyword">false</span>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> <span class="comment"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span> <span class="comment">    /**</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> <span class="comment">     * @brief get_maximum_frame_counter_gap Gets maximum frame counter gap</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> <span class="comment">     * @return Maximum frame counter gap</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment">     */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>     uint16_t <a class="code" href="class_lo_ra_p_h_y.html#a695c7d137229e3f1eeacdcdd369a76c0">get_maximum_frame_counter_gap</a>();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="comment"></span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> <span class="comment">    /**</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="comment">     * @brief get_ack_timeout Gets timeout value for ACK to be received</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment">     * @return ACK timeout</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span> <span class="comment">     */</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>     uint32_t <a class="code" href="class_lo_ra_p_h_y.html#a8e9eb37df16b8e0e54dbec61bf283f61">get_ack_timeout</a>();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span> <span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span> <span class="comment">    /**</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span> <span class="comment">     * @brief get_default_rx2_frequency Gets default RX2 frequency</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span> <span class="comment">     * @return RX2 frequency</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment">     */</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>     uint32_t <a class="code" href="class_lo_ra_p_h_y.html#a5cd45dbe60a858342a6ea756be27276e">get_default_rx2_frequency</a>();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment">    /**</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment">     * @brief get_default_rx2_datarate Gets default RX2 datarate</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment">     * @return RX2 datarate</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment">     */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#ab9fa5f9f71aceec34473aaf6eb70d4b8">get_default_rx2_datarate</a>();</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment">    /**</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="comment">     * @brief get_channel_mask Gets the channel mask</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span> <span class="comment">     * @param get_default If true the default mask is returned, otherwise the current mask is returned</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment">     * @return A channel mask</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment">     */</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>     uint16_t *<a class="code" href="class_lo_ra_p_h_y.html#a877e01c0926ff01f7b6f501a9a9429b6">get_channel_mask</a>(<span class="keywordtype">bool</span> get_default = <span class="keyword">false</span>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="comment"></span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span> <span class="comment">    /**</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span> <span class="comment">     * @brief get_max_nb_channels Gets maximum number of channels supported</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span> <span class="comment">     * @return Number of channels</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span> <span class="comment">     */</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a742353027188566784e29eb43b67af56">get_max_nb_channels</a>();</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span> <span class="comment"></span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span> <span class="comment">    /**</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span> <span class="comment">     * @brief get_phy_channels Gets PHY channels</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> <span class="comment">     * @return PHY channels</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span> <span class="comment">     */</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>     <a class="code" href="structchannel__params__t.html">channel_params_t</a> *<a class="code" href="class_lo_ra_p_h_y.html#aa54c67cdfda8d73102ca84f676893a61">get_phy_channels</a>();</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> <span class="comment"></span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span> <span class="comment">    /**</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span> <span class="comment">     * @brief is_custom_channel_plan_supported Checks if custom channel plan is supported</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> <span class="comment">     * @return True if custom channel plan is supported, false otherwise</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span> <span class="comment">     */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a15352f7ce8edf9f7d8a011dcd490031f">is_custom_channel_plan_supported</a>();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span> <span class="comment"></span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span> <span class="comment">    /**</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span> <span class="comment">     * @brief get_rx_time_on_air(...) calculates the time the received spent on air</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span> <span class="comment">     * @return time spent on air in milliseconds</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span> <span class="comment">     */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>     uint32_t <a class="code" href="class_lo_ra_p_h_y.html#ae4e3b24b3134fdf0e9be9d6b6ad7803e">get_rx_time_on_air</a>(uint8_t modem, uint16_t pkt_len);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span> </div><div class="line"><a name="l00529"></a><span class="lineno">  529</span> <span class="keyword">public</span>: <span class="comment">//Verifiers</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span> <span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span> <span class="comment">    /**</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span> <span class="comment">     * @brief verify_rx_datarate Verifies that given RX datarate is valid</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span> <span class="comment">     * @param datarate Datarate to check</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span> <span class="comment">     * @return true if given datarate is valid, false otherwise</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span> <span class="comment">     */</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a9fa9608b78cf9e0f3783f0916771089f">verify_rx_datarate</a>(uint8_t datarate);</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span> <span class="comment"></span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span> <span class="comment">    /**</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span> <span class="comment">     * @brief verify_tx_datarate Verifies that given TX datarate is valid</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span> <span class="comment">     * @param datarate Datarate to check</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span> <span class="comment">     * @param use_default If true validation is done against default value</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span> <span class="comment">     * @return true if given datarate is valid, false otherwise</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span> <span class="comment">     */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a1a741287f159bf96cf801fcb012f9df1">verify_tx_datarate</a>(uint8_t datarate, <span class="keywordtype">bool</span> use_default = <span class="keyword">false</span>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span> <span class="comment"></span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span> <span class="comment">    /**</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span> <span class="comment">     * @brief verify_tx_power Verifies that given TX power is valid</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span> <span class="comment">     * @param tx_power Power to check</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span> <span class="comment">     * @return True if valid, false otherwise</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span> <span class="comment">     */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#af7dc2768341714066454e6d4dbc72bad">verify_tx_power</a>(uint8_t tx_power);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span> <span class="comment"></span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span> <span class="comment">    /**</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span> <span class="comment">     * @brief verify_duty_cycle Verifies that given cycle is valid</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span> <span class="comment">     * @param cycle Cycle to check</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span> <span class="comment">     * @return True if valid, false otherwise</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span> <span class="comment">     */</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a5ef28ebd0bce667d88bc925e5f3f0f21">verify_duty_cycle</a>(<span class="keywordtype">bool</span> cycle);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span> <span class="comment"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span> <span class="comment">    /**</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span> <span class="comment">     * @brief verify_nb_join_trials Verifies that given number of trials is valid</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span> <span class="comment">     * @param nb_join_trials Number to check</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span> <span class="comment">     * @return True if valid, false otherwise</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span> <span class="comment">     */</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#ae4461258978d5bfe701e3838472f96ed">verify_nb_join_trials</a>(uint8_t nb_join_trials);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span> </div><div class="line"><a name="l00567"></a><span class="lineno">  567</span> <span class="keyword">protected</span>:</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>     <a class="code" href="class_lo_ra_p_h_y.html">LoRaPHY</a>();</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span> <span class="comment"></span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span> <span class="comment">    /**</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span> <span class="comment">     * Looks up corresponding band for a frequency. Returns -1 if not in any band.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span> <span class="comment">     */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>     <span class="keywordtype">int</span> <a class="code" href="class_lo_ra_p_h_y.html#a447b7c52a2f11443a8994ed849d64729">lookup_band_for_frequency</a>(uint32_t freq) <span class="keyword">const</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span> <span class="comment"></span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span> <span class="comment">    /**</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span> <span class="comment">     * Verifies, if a frequency is within a given band.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span> <span class="comment">     */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a57076e8ef304dcd7a5d382f81e286920">verify_frequency_for_band</a>(uint32_t freq, uint8_t band) <span class="keyword">const</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span> <span class="comment"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span> <span class="comment">    /**</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span> <span class="comment">     * Verifies, if a value is in a given range.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span> <span class="comment">     */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a619182fe64af1f6d4f2caebfebe62ecb">val_in_range</a>(int8_t value, int8_t min, int8_t max);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span> <span class="comment"></span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span> <span class="comment">    /**</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span> <span class="comment">     * Verifies, if a datarate is available on an active channel.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span> <span class="comment">     */</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a0ec605910332c7e737870644a45ee318">verify_channel_DR</a>(uint16_t *channelsMask, int8_t dr);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span> <span class="comment"></span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span> <span class="comment">    /**</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span> <span class="comment">     * Disables a channel in a given channels mask.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span> <span class="comment">     */</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>     <span class="keywordtype">bool</span> <a class="code" href="class_lo_ra_p_h_y.html#a94df7040812166a007c7bd88e0d22ffb">disable_channel</a>(uint16_t *channel_mask, uint8_t <span class="keywordtype">id</span>, uint8_t max_channels);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span> <span class="comment"></span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span> <span class="comment">    /**</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span> <span class="comment">     * Counts number of bits on in a given mask</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span> <span class="comment">     */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a3ca7c373fdce90055973146513686b67">count_bits</a>(uint16_t mask, uint8_t nb_bits);</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span> <span class="comment"></span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span> <span class="comment">    /**</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span> <span class="comment">     * Counts the number of active channels in a given channels mask.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span> <span class="comment">     */</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#ae9acb65a404976d53fc5f92678e5e39f">num_active_channels</a>(uint16_t *channel_mask, uint8_t start_idx,</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>                                 uint8_t stop_idx);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span> <span class="comment"></span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span> <span class="comment">    /**</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span> <span class="comment">     * Copy channel masks.</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span> <span class="comment">     */</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#a3c1a16faeb860fdb34960243286379b9">copy_channel_mask</a>(uint16_t *dest_mask, uint16_t *src_mask, uint8_t len);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span> <span class="comment"></span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span> <span class="comment">    /**</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span> <span class="comment">     * Updates the time-offs of the bands.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span> <span class="comment">     */</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>     <a class="code" href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a> <a class="code" href="class_lo_ra_p_h_y.html#a29ded733e3a187d5de76f84b0e969cc9">update_band_timeoff</a>(<span class="keywordtype">bool</span> joined, <span class="keywordtype">bool</span> dutyCycle, <a class="code" href="structband__t.html">band_t</a> *bands,</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>                                        uint8_t nb_bands);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span> <span class="comment"></span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span> <span class="comment">    /**</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span> <span class="comment">     * Parses the parameter of an LinkAdrRequest.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span> <span class="comment">     */</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#afaa250caa3486d8ed6375998199e0c84">parse_link_ADR_req</a>(<span class="keyword">const</span> uint8_t *payload, uint8_t payload_size,</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>                                <a class="code" href="structlink__adr__params__s.html">link_adr_params_t</a> *adr_params);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span> <span class="comment"></span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span> <span class="comment">    /**</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span> <span class="comment">     * Verifies and updates the datarate, the TX power and the number of repetitions</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span> <span class="comment">     * of a LinkAdrRequest.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span> <span class="comment">     */</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a25181864bb180afc316e9af0f5b5368d">verify_link_ADR_req</a>(<a class="code" href="structverify__adr__params__s.html">verify_adr_params_t</a> *verify_params, int8_t *dr,</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>                                 int8_t *tx_pow, uint8_t *nb_rep);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span> <span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span> <span class="comment">    /**</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span> <span class="comment">     * Computes the RX window timeout and the RX window offset.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span> <span class="comment">     */</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>     <span class="keywordtype">void</span> <a class="code" href="class_lo_ra_p_h_y.html#af17d969d0b29f4f091554a63b9fa6514">get_rx_window_params</a>(<span class="keywordtype">float</span> t_symbol, uint8_t min_rx_symbols,</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>                               <span class="keywordtype">float</span> rx_error, <span class="keywordtype">float</span> wakeup_time,</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>                               uint32_t *window_length, uint32_t *window_length_ms,</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>                               int32_t *window_offset,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>                               uint8_t phy_dr);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span> <span class="comment"></span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span> <span class="comment">    /**</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span> <span class="comment">     * Computes the txPower, based on the max EIRP and the antenna gain.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span> <span class="comment">     */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>     int8_t <a class="code" href="class_lo_ra_p_h_y.html#a51ce201f79f950777f82ec3820e01c28">compute_tx_power</a>(int8_t txPowerIndex, <span class="keywordtype">float</span> maxEirp, <span class="keywordtype">float</span> antennaGain);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span> <span class="comment"></span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span> <span class="comment">    /**</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span> <span class="comment">     * Provides a random number in the range provided.</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span> <span class="comment">     */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>     int32_t <a class="code" href="class_lo_ra_p_h_y.html#a4a306d6de542263e45574a9cfbfed6fc">get_random</a>(int32_t min, int32_t max);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span> <span class="comment"></span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span> <span class="comment">    /**</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span> <span class="comment">     * Get next lower data rate</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span> <span class="comment">     */</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>     int8_t <a class="code" href="class_lo_ra_p_h_y.html#aff549fe34418555e72ea138acda7b591">get_next_lower_dr</a>(int8_t dr, int8_t min_dr);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span> <span class="comment"></span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span> <span class="comment">    /**</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span> <span class="comment">     * Get channel bandwidth depending upon data rate table index</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span> <span class="comment">     */</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>     uint8_t <a class="code" href="class_lo_ra_p_h_y.html#a99244f3214ddd654a2cb3218b5b8f5dc">get_bandwidth</a>(uint8_t dr_index);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span> </div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>     uint8_t enabled_channel_count(uint8_t datarate,</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>                                   <span class="keyword">const</span> uint16_t *mask, uint8_t *enabledChannels,</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>                                   uint8_t *delayTx);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span> </div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>     <span class="keywordtype">bool</span> is_datarate_supported(<span class="keyword">const</span> int8_t datarate) <span class="keyword">const</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span> </div><div class="line"><a name="l00665"></a><span class="lineno">  665</span> <span class="keyword">private</span>:</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span> <span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span> <span class="comment">    /**</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span> <span class="comment">     * Computes the symbol time for LoRa modulation.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span> <span class="comment">     */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>     <span class="keywordtype">float</span> compute_symb_timeout_lora(uint8_t phy_dr, uint32_t bandwidth);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span> <span class="comment"></span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span> <span class="comment">    /**</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span> <span class="comment">     * Computes the symbol time for FSK modulation.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span> <span class="comment">     */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>     <span class="keywordtype">float</span> compute_symb_timeout_fsk(uint8_t phy_dr);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span> </div><div class="line"><a name="l00677"></a><span class="lineno">  677</span> <span class="keyword">protected</span>:</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>     <a class="code" href="class_lo_ra_radio.html">LoRaRadio</a> *_radio;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>     <a class="code" href="class_lo_ra_w_a_n_time_handler.html">LoRaWANTimeHandler</a> *_lora_time;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>     <a class="code" href="structloraphy__params__t.html">loraphy_params_t</a> phy_params;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span> };</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span> </div><div class="line"><a name="l00683"></a><span class="lineno">  683</span> <span class="preprocessor">#endif </span><span class="comment">/* MBED_OS_LORAPHY_BASE_ */</span><span class="preprocessor"></span></div><div class="ttc" id="class_lo_ra_p_h_y_html_a619182fe64af1f6d4f2caebfebe62ecb"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a619182fe64af1f6d4f2caebfebe62ecb">LoRaPHY::val_in_range</a></div><div class="ttdeci">bool val_in_range(int8_t value, int8_t min, int8_t max)</div><div class="ttdoc">Verifies, if a value is in a given range. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ab9fa5f9f71aceec34473aaf6eb70d4b8"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ab9fa5f9f71aceec34473aaf6eb70d4b8">LoRaPHY::get_default_rx2_datarate</a></div><div class="ttdeci">uint8_t get_default_rx2_datarate()</div><div class="ttdoc">get_default_rx2_datarate Gets default RX2 datarate </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_af7dc2768341714066454e6d4dbc72bad"><div class="ttname"><a href="class_lo_ra_p_h_y.html#af7dc2768341714066454e6d4dbc72bad">LoRaPHY::verify_tx_power</a></div><div class="ttdeci">bool verify_tx_power(uint8_t tx_power)</div><div class="ttdoc">verify_tx_power Verifies that given TX power is valid </div></div>
<div class="ttc" id="structrx__config__params__t_html"><div class="ttname"><a href="structrx__config__params__t.html">rx_config_params_t</a></div><div class="ttdef"><b>Definition:</b> <a href="lorawan__data__structures_8h_source.html#l00996">lorawan_data_structures.h:996</a></div></div>
<div class="ttc" id="structtx__config__params__t_html"><div class="ttname"><a href="structtx__config__params__t.html">tx_config_params_t</a></div><div class="ttdoc">TX configuration parameters. </div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00275">lora_phy_ds.h:275</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a18a3ee5e14d0a1b83c5c9b51482a3cb3"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a18a3ee5e14d0a1b83c5c9b51482a3cb3">LoRaPHY::handle_send</a></div><div class="ttdeci">void handle_send(uint8_t *buf, uint8_t size)</div><div class="ttdoc">Delegates MAC layer request to transmit packet. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_abd37cda9f0ec20e3842b34957f98d599"><div class="ttname"><a href="class_lo_ra_p_h_y.html#abd37cda9f0ec20e3842b34957f98d599">LoRaPHY::get_minimum_rx_datarate</a></div><div class="ttdeci">uint8_t get_minimum_rx_datarate()</div><div class="ttdoc">get_minimum_rx_datarate Gets the minimum RX datarate supported by a device </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ae9acb65a404976d53fc5f92678e5e39f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ae9acb65a404976d53fc5f92678e5e39f">LoRaPHY::num_active_channels</a></div><div class="ttdeci">uint8_t num_active_channels(uint16_t *channel_mask, uint8_t start_idx, uint8_t stop_idx)</div><div class="ttdoc">Counts the number of active channels in a given channels mask. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a1a5157c1820fdd238b85ca9b43bb48fc"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a1a5157c1820fdd238b85ca9b43bb48fc">LoRaPHY::get_default_tx_datarate</a></div><div class="ttdeci">uint8_t get_default_tx_datarate()</div><div class="ttdoc">get_default_tx_datarate Gets the default TX datarate </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ad90b24d66e3681172e49411b19c52c67"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ad90b24d66e3681172e49411b19c52c67">LoRaPHY::get_max_payload</a></div><div class="ttdeci">uint8_t get_max_payload(uint8_t datarate, bool use_repeater=false)</div><div class="ttdoc">get_max_payload Gets maximum amount in bytes which device can send </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a38dd3d6dcc9d83483d9ca6c2d40bfb14"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a38dd3d6dcc9d83483d9ca6c2d40bfb14">LoRaPHY::apply_cf_list</a></div><div class="ttdeci">virtual void apply_cf_list(const uint8_t *payload, uint8_t size)</div><div class="ttdoc">Processes the incoming CF-list. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a1858c5b42dbbd4ae93218d254b178efa"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a1858c5b42dbbd4ae93218d254b178efa">LoRaPHY::set_tx_cont_mode</a></div><div class="ttdeci">virtual void set_tx_cont_mode(cw_mode_params_t *continuous_wave, uint32_t frequency=0)</div><div class="ttdoc">Puts the radio into continuous wave mode. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ab1655198dc4a705dae9ad6e6fce4542f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ab1655198dc4a705dae9ad6e6fce4542f">LoRaPHY::get_alternate_DR</a></div><div class="ttdeci">virtual int8_t get_alternate_DR(uint8_t nb_trials)</div><div class="ttdoc">Alternates the datarate of the channel for the join request. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a0ec605910332c7e737870644a45ee318"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a0ec605910332c7e737870644a45ee318">LoRaPHY::verify_channel_DR</a></div><div class="ttdeci">bool verify_channel_DR(uint16_t *channelsMask, int8_t dr)</div><div class="ttdoc">Verifies, if a datarate is available on an active channel. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_aad45c000c3542ab550e810f880b8a783"><div class="ttname"><a href="class_lo_ra_p_h_y.html#aad45c000c3542ab550e810f880b8a783">LoRaPHY::setup_public_network_mode</a></div><div class="ttdeci">void setup_public_network_mode(bool set)</div><div class="ttdoc">Enables/Disables public network mode. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_acc79998b47bf343da8d945b6988e11a8"><div class="ttname"><a href="class_lo_ra_p_h_y.html#acc79998b47bf343da8d945b6988e11a8">LoRaPHY::remove_channel</a></div><div class="ttdeci">virtual bool remove_channel(uint8_t channel_id)</div><div class="ttdoc">Removes a channel from the channel list. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a04163f6cc7c3e4b6659ac4ff46e08450"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a04163f6cc7c3e4b6659ac4ff46e08450">LoRaPHY::set_last_tx_done</a></div><div class="ttdeci">virtual void set_last_tx_done(uint8_t channel, bool joined, lorawan_time_t last_tx_done_time)</div><div class="ttdoc">Process PHY layer state after a successful transmission. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a1a741287f159bf96cf801fcb012f9df1"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a1a741287f159bf96cf801fcb012f9df1">LoRaPHY::verify_tx_datarate</a></div><div class="ttdeci">bool verify_tx_datarate(uint8_t datarate, bool use_default=false)</div><div class="ttdoc">verify_tx_datarate Verifies that given TX datarate is valid </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_adb63181933fd7cdd815ecd2d303c5335"><div class="ttname"><a href="class_lo_ra_p_h_y.html#adb63181933fd7cdd815ecd2d303c5335">LoRaPHY::tx_config</a></div><div class="ttdeci">virtual bool tx_config(tx_config_params_t *tx_config, int8_t *tx_power, lorawan_time_t *tx_toa)</div><div class="ttdoc">Configure radio transmission. </div></div>
<div class="ttc" id="structloraphy__params__t_html"><div class="ttname"><a href="structloraphy__params__t.html">loraphy_params_t</a></div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00506">lora_phy_ds.h:506</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a6e892b11fc350f00b75a3243ff270f6b"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a6e892b11fc350f00b75a3243ff270f6b">LoRaPHY::link_ADR_request</a></div><div class="ttdeci">virtual uint8_t link_ADR_request(adr_req_params_t *params, int8_t *dr_out, int8_t *tx_power_out, uint8_t *nb_rep_out, uint8_t *nb_bytes_parsed)</div><div class="ttdoc">Processes a Link ADR Request. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a25181864bb180afc316e9af0f5b5368d"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a25181864bb180afc316e9af0f5b5368d">LoRaPHY::verify_link_ADR_req</a></div><div class="ttdeci">uint8_t verify_link_ADR_req(verify_adr_params_t *verify_params, int8_t *dr, int8_t *tx_pow, uint8_t *nb_rep)</div><div class="ttdoc">Verifies and updates the datarate, the TX power and the number of repetitions of a LinkAdrRequest...</div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a3ca7c373fdce90055973146513686b67"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a3ca7c373fdce90055973146513686b67">LoRaPHY::count_bits</a></div><div class="ttdeci">uint8_t count_bits(uint16_t mask, uint8_t nb_bits)</div><div class="ttdoc">Counts number of bits on in a given mask. </div></div>
<div class="ttc" id="classmbed_1_1_non_copyable_html"><div class="ttname"><a href="classmbed_1_1_non_copyable.html">mbed::NonCopyable</a></div><div class="ttdoc">Prevents generation of copy constructor and copy assignment operator in derived classes. </div><div class="ttdef"><b>Definition:</b> <a href="_non_copyable_8h_source.html#l00169">NonCopyable.h:169</a></div></div>
<div class="ttc" id="lorawan__data__structures_8h_html_ac4d7b9e2b0448787d12d6a397eb800db"><div class="ttname"><a href="lorawan__data__structures_8h.html#ac4d7b9e2b0448787d12d6a397eb800db">lorawan_time_t</a></div><div class="ttdeci">uint32_t lorawan_time_t</div><div class="ttdoc">Timer time variable definition. </div><div class="ttdef"><b>Definition:</b> <a href="lorawan__data__structures_8h_source.html#l00044">lorawan_data_structures.h:44</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a70df2b7a0fe3ad03902bb481583f9a5b"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a70df2b7a0fe3ad03902bb481583f9a5b">LoRaPHY::set_next_channel</a></div><div class="ttdeci">virtual lorawan_status_t set_next_channel(channel_selection_params_t *nextChanParams, uint8_t *channel, lorawan_time_t *time, lorawan_time_t *aggregatedTimeOff)</div><div class="ttdoc">Searches and sets the next available channel. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a590fe6c4b8d5f2dc468acc81cd80e00d"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a590fe6c4b8d5f2dc468acc81cd80e00d">LoRaPHY::mask_bit_clear</a></div><div class="ttdeci">void mask_bit_clear(uint16_t *mask, unsigned bit)</div><div class="ttdoc">Tests if a channel is on or off in the channel mask. </div></div>
<div class="ttc" id="structverify__adr__params__s_html"><div class="ttname"><a href="structverify__adr__params__s.html">verify_adr_params_s</a></div><div class="ttdoc">Structure used to store ADR values received from network for verification (legality) purposes...</div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00368">lora_phy_ds.h:368</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ae4e3b24b3134fdf0e9be9d6b6ad7803e"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ae4e3b24b3134fdf0e9be9d6b6ad7803e">LoRaPHY::get_rx_time_on_air</a></div><div class="ttdeci">uint32_t get_rx_time_on_air(uint8_t modem, uint16_t pkt_len)</div><div class="ttdoc">get_rx_time_on_air(...) calculates the time the received spent on air </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html"><div class="ttname"><a href="class_lo_ra_p_h_y.html">LoRaPHY</a></div><div class="ttdoc">LoRaPHY Class Parent class for LoRa regional PHY implementations. </div><div class="ttdef"><b>Definition:</b> <a href="_lo_ra_p_h_y_8h_source.html#l00046">LoRaPHY.h:46</a></div></div>
<div class="ttc" id="structlink__adr__params__s_html"><div class="ttname"><a href="structlink__adr__params__s.html">link_adr_params_s</a></div><div class="ttdoc">Structure containing data for local ADR settings. </div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00341">lora_phy_ds.h:341</a></div></div>
<div class="ttc" id="class_lo_ra_w_a_n_time_handler_html"><div class="ttname"><a href="class_lo_ra_w_a_n_time_handler.html">LoRaWANTimeHandler</a></div><div class="ttdoc">/ _____) _ | | ( (____ _____ ____ _| |_ _____ ____| |__ ____ | ___ | (_ _) ___ |/ ___) _ \ _____) ) _...</div><div class="ttdef"><b>Definition:</b> <a href="_lo_ra_w_a_n_timer_8h_source.html#l00029">LoRaWANTimer.h:29</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a5cd45dbe60a858342a6ea756be27276e"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a5cd45dbe60a858342a6ea756be27276e">LoRaPHY::get_default_rx2_frequency</a></div><div class="ttdeci">uint32_t get_default_rx2_frequency()</div><div class="ttdoc">get_default_rx2_frequency Gets default RX2 frequency </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ae8910bcb2c9aaade429c2d7ccc804df6"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ae8910bcb2c9aaade429c2d7ccc804df6">LoRaPHY::add_channel</a></div><div class="ttdeci">virtual lorawan_status_t add_channel(const channel_params_t *new_channel, uint8_t id)</div><div class="ttdoc">Adds a channel to the channel list. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a1c58d7708ee03db9f64fac2cd2eb2ac4"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a1c58d7708ee03db9f64fac2cd2eb2ac4">LoRaPHY::put_radio_to_sleep</a></div><div class="ttdeci">void put_radio_to_sleep(void)</div><div class="ttdoc">Puts radio in sleep mode. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a57076e8ef304dcd7a5d382f81e286920"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a57076e8ef304dcd7a5d382f81e286920">LoRaPHY::verify_frequency_for_band</a></div><div class="ttdeci">virtual bool verify_frequency_for_band(uint32_t freq, uint8_t band) const </div><div class="ttdoc">Verifies, if a frequency is within a given band. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ade00bb38a6207da775a2329fd19aa11e"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ade00bb38a6207da775a2329fd19aa11e">LoRaPHY::get_default_max_tx_datarate</a></div><div class="ttdeci">uint8_t get_default_max_tx_datarate()</div><div class="ttdoc">get_default_max_tx_datarate Gets the maximum achievable data rate for LoRa modulation. </div></div>
<div class="ttc" id="lorawan__types_8h_html_a9efa78377307e6772301c80921b56872"><div class="ttname"><a href="lorawan__types_8h.html#a9efa78377307e6772301c80921b56872">lorawan_status_t</a></div><div class="ttdeci">enum lorawan_status lorawan_status_t</div><div class="ttdoc">lorawan_status_t contains status codes in response to stack operations </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a83b6c3bb24e64f3d42862464cf195c58"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a83b6c3bb24e64f3d42862464cf195c58">LoRaPHY::mask_bit_set</a></div><div class="ttdeci">void mask_bit_set(uint16_t *mask, unsigned bit)</div><div class="ttdoc">Tests if a channel is on or off in the channel mask. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a3c1a16faeb860fdb34960243286379b9"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a3c1a16faeb860fdb34960243286379b9">LoRaPHY::copy_channel_mask</a></div><div class="ttdeci">void copy_channel_mask(uint16_t *dest_mask, uint16_t *src_mask, uint8_t len)</div><div class="ttdoc">Copy channel masks. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a202618818cc9b0a0b9f3387fd81a7733"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a202618818cc9b0a0b9f3387fd81a7733">LoRaPHY::restore_default_channels</a></div><div class="ttdeci">virtual void restore_default_channels()</div><div class="ttdoc">Enables default channels only. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a44b81e38207e306ee45ea33cbf013832"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a44b81e38207e306ee45ea33cbf013832">LoRaPHY::initialize</a></div><div class="ttdeci">void initialize(LoRaWANTimeHandler *lora_time)</div><div class="ttdoc">Initialize LoRaPHY. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a51ce201f79f950777f82ec3820e01c28"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a51ce201f79f950777f82ec3820e01c28">LoRaPHY::compute_tx_power</a></div><div class="ttdeci">int8_t compute_tx_power(int8_t txPowerIndex, float maxEirp, float antennaGain)</div><div class="ttdoc">Computes the txPower, based on the max EIRP and the antenna gain. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a877e01c0926ff01f7b6f501a9a9429b6"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a877e01c0926ff01f7b6f501a9a9429b6">LoRaPHY::get_channel_mask</a></div><div class="ttdeci">uint16_t * get_channel_mask(bool get_default=false)</div><div class="ttdoc">get_channel_mask Gets the channel mask </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a15352f7ce8edf9f7d8a011dcd490031f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a15352f7ce8edf9f7d8a011dcd490031f">LoRaPHY::is_custom_channel_plan_supported</a></div><div class="ttdeci">bool is_custom_channel_plan_supported()</div><div class="ttdoc">is_custom_channel_plan_supported Checks if custom channel plan is supported </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a1c44dc7ea420577b0ff3faaed8842c9f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a1c44dc7ea420577b0ff3faaed8842c9f">LoRaPHY::get_minimum_tx_datarate</a></div><div class="ttdeci">uint8_t get_minimum_tx_datarate()</div><div class="ttdoc">get_minimum_tx_datarate Gets the minimum TX datarate supported by a device </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_adfa3d26e30e6996b4737dd2b47dc9136"><div class="ttname"><a href="class_lo_ra_p_h_y.html#adfa3d26e30e6996b4737dd2b47dc9136">LoRaPHY::dl_channel_request</a></div><div class="ttdeci">virtual uint8_t dl_channel_request(uint8_t channel_id, uint32_t rx1_frequency)</div><div class="ttdoc">Processes a DlChannelReq MAC command. </div></div>
<div class="ttc" id="structchannel__selection__params__s_html"><div class="ttname"><a href="structchannel__selection__params__s.html">channel_selection_params_s</a></div><div class="ttdoc">The parameter structure for the function RegionNextChannel. </div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00430">lora_phy_ds.h:430</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_afaa250caa3486d8ed6375998199e0c84"><div class="ttname"><a href="class_lo_ra_p_h_y.html#afaa250caa3486d8ed6375998199e0c84">LoRaPHY::parse_link_ADR_req</a></div><div class="ttdeci">uint8_t parse_link_ADR_req(const uint8_t *payload, uint8_t payload_size, link_adr_params_t *adr_params)</div><div class="ttdoc">Parses the parameter of an LinkAdrRequest. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a68c1e80eaadcc46f1677e85957a289b3"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a68c1e80eaadcc46f1677e85957a289b3">LoRaPHY::request_new_channel</a></div><div class="ttdeci">virtual uint8_t request_new_channel(int8_t channel_id, channel_params_t *new_channel)</div><div class="ttdoc">Entertain a new channel request MAC command. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a4a306d6de542263e45574a9cfbfed6fc"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a4a306d6de542263e45574a9cfbfed6fc">LoRaPHY::get_random</a></div><div class="ttdeci">int32_t get_random(int32_t min, int32_t max)</div><div class="ttdoc">Provides a random number in the range provided. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a8e9eb37df16b8e0e54dbec61bf283f61"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a8e9eb37df16b8e0e54dbec61bf283f61">LoRaPHY::get_ack_timeout</a></div><div class="ttdeci">uint32_t get_ack_timeout()</div><div class="ttdoc">get_ack_timeout Gets timeout value for ACK to be received </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_af9d4fa69df838cd28e3d7ab856563f43"><div class="ttname"><a href="class_lo_ra_p_h_y.html#af9d4fa69df838cd28e3d7ab856563f43">LoRaPHY::calculate_backoff</a></div><div class="ttdeci">void calculate_backoff(bool joined, bool last_tx_was_join_req, bool dc_enabled, uint8_t channel, lorawan_time_t elapsed_time, lorawan_time_t tx_toa)</div><div class="ttdoc">calculate_backoff Calculates and applies duty cycle back-off time. </div></div>
<div class="ttc" id="structrx__param__setup__req__s_html"><div class="ttname"><a href="structrx__param__setup__req__s.html">rx_param_setup_req_s</a></div><div class="ttdoc">Contains rx parameter setup request coming from network server. </div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00412">lora_phy_ds.h:412</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_af17d969d0b29f4f091554a63b9fa6514"><div class="ttname"><a href="class_lo_ra_p_h_y.html#af17d969d0b29f4f091554a63b9fa6514">LoRaPHY::get_rx_window_params</a></div><div class="ttdeci">void get_rx_window_params(float t_symbol, uint8_t min_rx_symbols, float rx_error, float wakeup_time, uint32_t *window_length, uint32_t *window_length_ms, int32_t *window_offset, uint8_t phy_dr)</div><div class="ttdoc">Computes the RX window timeout and the RX window offset. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_af101dd2c04000f1b25fb377491be4a2f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#af101dd2c04000f1b25fb377491be4a2f">LoRaPHY::get_next_ADR</a></div><div class="ttdeci">bool get_next_ADR(bool restore_channel_mask, int8_t &amp;dr_out, int8_t &amp;tx_power_out, uint32_t &amp;adr_ack_counter)</div><div class="ttdoc">Calculates the next datarate to set, when ADR is on or off. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ab8ce25e895c569b141ae5167b2ce1589"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ab8ce25e895c569b141ae5167b2ce1589">LoRaPHY::rx_config</a></div><div class="ttdeci">virtual bool rx_config(rx_config_params_t *config)</div><div class="ttdoc">Configure radio reception. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a94df7040812166a007c7bd88e0d22ffb"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a94df7040812166a007c7bd88e0d22ffb">LoRaPHY::disable_channel</a></div><div class="ttdeci">bool disable_channel(uint16_t *channel_mask, uint8_t id, uint8_t max_channels)</div><div class="ttdoc">Disables a channel in a given channels mask. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a742353027188566784e29eb43b67af56"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a742353027188566784e29eb43b67af56">LoRaPHY::get_max_nb_channels</a></div><div class="ttdeci">uint8_t get_max_nb_channels()</div><div class="ttdoc">get_max_nb_channels Gets maximum number of channels supported </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_aa54c67cdfda8d73102ca84f676893a61"><div class="ttname"><a href="class_lo_ra_p_h_y.html#aa54c67cdfda8d73102ca84f676893a61">LoRaPHY::get_phy_channels</a></div><div class="ttdeci">channel_params_t * get_phy_channels()</div><div class="ttdoc">get_phy_channels Gets PHY channels </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a22efd2137fa5e372d7e0515e078eba31"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a22efd2137fa5e372d7e0515e078eba31">LoRaPHY::get_next_lower_tx_datarate</a></div><div class="ttdeci">int8_t get_next_lower_tx_datarate(int8_t datarate)</div><div class="ttdoc">get_next_lower_tx_datarate Gets the next lower datarate </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_aff549fe34418555e72ea138acda7b591"><div class="ttname"><a href="class_lo_ra_p_h_y.html#aff549fe34418555e72ea138acda7b591">LoRaPHY::get_next_lower_dr</a></div><div class="ttdeci">int8_t get_next_lower_dr(int8_t dr, int8_t min_dr)</div><div class="ttdoc">Get next lower data rate. </div></div>
<div class="ttc" id="lora__phy__ds_8h_html"><div class="ttname"><a href="lora__phy__ds_8h.html">lora_phy_ds.h</a></div><div class="ttdoc">Data structures relating to PHY layer. </div></div>
<div class="ttc" id="structcontinuous__wave__mode__params__s_html"><div class="ttname"><a href="structcontinuous__wave__mode__params__s.html">continuous_wave_mode_params_s</a></div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00456">lora_phy_ds.h:456</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ae4461258978d5bfe701e3838472f96ed"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ae4461258978d5bfe701e3838472f96ed">LoRaPHY::verify_nb_join_trials</a></div><div class="ttdeci">bool verify_nb_join_trials(uint8_t nb_join_trials)</div><div class="ttdoc">verify_nb_join_trials Verifies that given number of trials is valid </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a447b7c52a2f11443a8994ed849d64729"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a447b7c52a2f11443a8994ed849d64729">LoRaPHY::lookup_band_for_frequency</a></div><div class="ttdeci">int lookup_band_for_frequency(uint32_t freq) const </div><div class="ttdoc">Looks up corresponding band for a frequency. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a891523085f1fc57a2ef6eb0bc7eb0f4b"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a891523085f1fc57a2ef6eb0bc7eb0f4b">LoRaPHY::apply_DR_offset</a></div><div class="ttdeci">virtual uint8_t apply_DR_offset(int8_t dr, int8_t dr_offset)</div><div class="ttdoc">Computes new data rate according to the given offset. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_afec1a2e11a71b2d1d1db0597b8a82b72"><div class="ttname"><a href="class_lo_ra_p_h_y.html#afec1a2e11a71b2d1d1db0597b8a82b72">LoRaPHY::accept_rx_param_setup_req</a></div><div class="ttdeci">virtual uint8_t accept_rx_param_setup_req(rx_param_setup_req_t *params)</div><div class="ttdoc">Accept or rejects RxParamSetupReq MAC command. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_ac90fbfb16154d2a7ebaa499d246b5ee4"><div class="ttname"><a href="class_lo_ra_p_h_y.html#ac90fbfb16154d2a7ebaa499d246b5ee4">LoRaPHY::handle_receive</a></div><div class="ttdeci">void handle_receive(void)</div><div class="ttdoc">Puts radio in receive mode. </div></div>
<div class="ttc" id="structadr__req__params__t_html"><div class="ttname"><a href="structadr__req__params__t.html">adr_req_params_t</a></div><div class="ttdoc">This structure contains parameters for ADR request coming from network server. </div><div class="ttdef"><b>Definition:</b> <a href="lora__phy__ds_8h_source.html#l00306">lora_phy_ds.h:306</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a3cf8afbe8a60575f8bea06760f0a5d8e"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a3cf8afbe8a60575f8bea06760f0a5d8e">LoRaPHY::set_radio_instance</a></div><div class="ttdeci">void set_radio_instance(LoRaRadio &amp;radio)</div><div class="ttdoc">Stores a reference to Radio object. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a49c8f76e530c74246c475a9f8d92269b"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a49c8f76e530c74246c475a9f8d92269b">LoRaPHY::get_radio_rng</a></div><div class="ttdeci">uint32_t get_radio_rng()</div><div class="ttdoc">Provides a random number from radio. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a17bbbbf79b3f784695100da19cffc539"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a17bbbbf79b3f784695100da19cffc539">LoRaPHY::accept_tx_param_setup_req</a></div><div class="ttdeci">virtual bool accept_tx_param_setup_req(uint8_t ul_dwell_time, uint8_t dl_dwell_time)</div><div class="ttdoc">accept_tx_param_setup_req Makes decision whether to accept or reject TxParamSetupReq MAC command...</div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a9fa9608b78cf9e0f3783f0916771089f"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a9fa9608b78cf9e0f3783f0916771089f">LoRaPHY::verify_rx_datarate</a></div><div class="ttdeci">bool verify_rx_datarate(uint8_t datarate)</div><div class="ttdoc">verify_rx_datarate Verifies that given RX datarate is valid </div></div>
<div class="ttc" id="structloramac__protocol__params_html"><div class="ttname"><a href="structloramac__protocol__params.html">loramac_protocol_params</a></div><div class="ttdef"><b>Definition:</b> <a href="lorawan__data__structures_8h_source.html#l01135">lorawan_data_structures.h:1135</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a98b3f57889049eefdbb05eed70dbc577"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a98b3f57889049eefdbb05eed70dbc577">LoRaPHY::put_radio_to_standby</a></div><div class="ttdeci">void put_radio_to_standby(void)</div><div class="ttdoc">Puts radio in standby mode. </div></div>
<div class="ttc" id="class_lo_ra_radio_html"><div class="ttname"><a href="class_lo_ra_radio.html">LoRaRadio</a></div><div class="ttdoc">Interface for the radios, containing the main functions that a radio needs, and five callback functio...</div><div class="ttdef"><b>Definition:</b> <a href="_lo_ra_radio_8h_source.html#l00440">LoRaRadio.h:440</a></div></div>
<div class="ttc" id="structchannel__params__t_html"><div class="ttname"><a href="structchannel__params__t.html">channel_params_t</a></div><div class="ttdoc">DO NOT MODIFY, WILL BREAK THE API! </div><div class="ttdef"><b>Definition:</b> <a href="lorawan__types_8h_source.html#l00314">lorawan_types.h:314</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a925f621bb9b203f60c846fd80040f4ca"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a925f621bb9b203f60c846fd80040f4ca">LoRaPHY::mask_bit_test</a></div><div class="ttdeci">bool mask_bit_test(const uint16_t *mask, unsigned bit)</div><div class="ttdoc">Tests if a channel is on or off in the channel mask. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a99244f3214ddd654a2cb3218b5b8f5dc"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a99244f3214ddd654a2cb3218b5b8f5dc">LoRaPHY::get_bandwidth</a></div><div class="ttdeci">uint8_t get_bandwidth(uint8_t dr_index)</div><div class="ttdoc">Get channel bandwidth depending upon data rate table index. </div></div>
<div class="ttc" id="structband__t_html"><div class="ttname"><a href="structband__t.html">band_t</a></div><div class="ttdoc">Default user application maximum data size for transmission. </div><div class="ttdef"><b>Definition:</b> <a href="lorawan__data__structures_8h_source.html#l00085">lorawan_data_structures.h:85</a></div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a29ded733e3a187d5de76f84b0e969cc9"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a29ded733e3a187d5de76f84b0e969cc9">LoRaPHY::update_band_timeoff</a></div><div class="ttdeci">lorawan_time_t update_band_timeoff(bool joined, bool dutyCycle, band_t *bands, uint8_t nb_bands)</div><div class="ttdoc">Updates the time-offs of the bands. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a7f3d375c0d0d2e274019c6b3ef2b9966"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a7f3d375c0d0d2e274019c6b3ef2b9966">LoRaPHY::compute_rx_win_params</a></div><div class="ttdeci">virtual void compute_rx_win_params(int8_t datarate, uint8_t min_rx_symbols, uint32_t rx_error, rx_config_params_t *rx_conf_params)</div><div class="ttdoc">Computing Receive Windows. </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a695c7d137229e3f1eeacdcdd369a76c0"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a695c7d137229e3f1eeacdcdd369a76c0">LoRaPHY::get_maximum_frame_counter_gap</a></div><div class="ttdeci">uint16_t get_maximum_frame_counter_gap()</div><div class="ttdoc">get_maximum_frame_counter_gap Gets maximum frame counter gap </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a22b072fa02b1ffc77a1f4f0a0e0a315d"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a22b072fa02b1ffc77a1f4f0a0e0a315d">LoRaPHY::reset_to_default_values</a></div><div class="ttdeci">void reset_to_default_values(loramac_protocol_params *params, bool init=false)</div><div class="ttdoc">reset_to_default_values resets some parameters to default values </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a5ef28ebd0bce667d88bc925e5f3f0f21"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a5ef28ebd0bce667d88bc925e5f3f0f21">LoRaPHY::verify_duty_cycle</a></div><div class="ttdeci">bool verify_duty_cycle(bool cycle)</div><div class="ttdoc">verify_duty_cycle Verifies that given cycle is valid </div></div>
<div class="ttc" id="class_lo_ra_p_h_y_html_a92fde44d19b02724217a51f56c6b7aa2"><div class="ttname"><a href="class_lo_ra_p_h_y.html#a92fde44d19b02724217a51f56c6b7aa2">LoRaPHY::get_default_tx_power</a></div><div class="ttdeci">uint8_t get_default_tx_power()</div><div class="ttdoc">get_default_tx_power Gets the default TX power </div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/feature-i2c-doxy/_lo_ra_p_h_y_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 16:07:48 GMT -->
</html>
