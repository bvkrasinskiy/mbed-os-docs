<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/feature-i2c-doxy/i2c__api_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 16:07:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | i2c_api.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="i2c__api_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/feature-i2c-doxy/i2c__api_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/feature-i2c-doxy/i2c__api_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_0a35604a9686a5c61e943d0c488f7389.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">i2c_api.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/* mbed Microcontroller Library</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> * Copyright (c) 2006-2019 ARM Limited</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> * SPDX-License-Identifier: Apache-2.0</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> */</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="comment">/** \addtogroup hal */</span><span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="comment">/** @{*/</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="preprocessor">#ifndef MBED_I2C_API_H</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="preprocessor">#define MBED_I2C_API_H</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> </div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="preprocessor">#include "device.h"</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="preprocessor">#include "pinmap.h"</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="preprocessor">#include "hal/buffer.h"</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> </div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="preprocessor">#if DEVICE_I2C_ASYNCH</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="preprocessor">#include "hal/dma_api.h"</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="preprocessor">#if DEVICE_I2C</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment"></span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment">/**</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment"> * \defgroup hal_i2c I2C hal</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment"> *</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment"> * The I2C hal provides a low level interface to the I2C interface of a target.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="comment"> * # Defined behavior</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="comment"> * * The function ::i2c_init initializes the peripheral pins specified in the input parameters,</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment"> * initializes the peripheral in master mode if `is_slave` is false,</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment"> * initializes the peripheral in slave mode if `is_slave` is true and `supports_slave_mode` is true  - Verified by test ::fpga_i2c_test_init_free.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> * * The function ::i2c_free resets the pins used to initialize the peripheral to their default state and</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="comment"> * disables the peripheral clock - Verified by test ::fpga_i2c_test_init_free.</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> <span class="comment"> * * The function ::i2c_get_capabilities fills the contents of the `i2c_capabilities_t` parameter - Verified by test ::fpga_i2c_test_get_capabilities.</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="comment"> * * The function ::i2c_frequency sets the frequency to use for the transfer, returns the actual frequency used and</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="comment"> * must leave all other configuration unchanged - Verified by test ::fpga_i2c_test_frequency.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment"> * * The function ::i2c_timeout sets the transmision timeout to use for the following blocking transfers.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="comment"> * If the timeout is not set, the default timeout is used.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="comment"> * The default timeout value is based on I2C frequency. It's computed as triple the amount of time it would take to send data over I2C - Verified by test ::fpga_i2c_test_blocking_transmission_timeout.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="comment"> * * The function ::i2c_write writes `length` number of symbols to the bus, returns the number of symbols sent to the bus,</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="comment"> * returns an error code if the transfer fails, generates a stop condition on the bus at the end of the transfer if `stop` parameter is true,</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="comment"> * and handles transfer collisions and loss of arbitration if the platform supports multimaster in hardware.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="comment"> * The transfer times out and returns `I2C_ERROR_TIMEOUT ` if the transfer takes longer than the configured timeout duration - Verified by test ::fpga_i2c_test_blocking_write_read.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> <span class="comment"> * * The function ::i2c_read reads `length` symbols from the bus, returns the number of symbols received from the bus,</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="comment"> * returns an error code if the transfer fails, generates a stop condition on the bus at the end of the transfer if `stop` parameter is true</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="comment"> * and handles transfer collisions and loss of arbitration if the platform supports multimaster in hardware.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> <span class="comment"> * The transfer times out and returns `I2C_ERROR_TIMEOUT ` if the transfer takes longer than the configured timeout duration - Verified by test ::fpga_i2c_test_blocking_write_read.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="comment"> * * The function ::i2c_start generates I2C START condition on the bus in master mode and does nothing if called when the peripheral is configured in slave mode.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="comment"> * * The function ::i2c_stop generates I2C STOP condition on the bus in master mode and does nothing if called when the peripheral is configured in slave mode</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> <span class="comment"> * - Verified by test ::fpga_i2c_test_blocking_write_read ::fpga_i2c_test_async_write_read.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> <span class="comment"> * * The function ::i2c_slave_status indicates which mode the peripheral has been addressed in and returns not addressed when called in master mode.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="comment"> * * The function ::i2c_slave_address sets the address of the peripheral to the `address` parameter and does nothing if called in master mode.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span> <span class="comment"> * * The function ::i2c_transfer_async returns immediately with a `bool` indicating whether the transfer was successfully scheduled.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="comment"> * The callback given to `i2c_transfer_async` is invoked when the transfer finishes or an error occurs and</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> <span class="comment"> * must save the handler and context pointers inside the `obj` pointer. The context pointer is passed to the callback on transfer completion.</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment"> * The callback must be invoked on completion unless the transfer is aborted and</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment"> * may handle transfer collisions and loss of arbitration if the platform supports multimaster in hardware and enabled in API.</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment"> * `i2c_async_event_t` must be filled with the number of symbols sent to the bus during transfer - Verified by test ::fpga_i2c_test_async_write_read.</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> <span class="comment"> * * The function ::i2c_abort_async aborts any ongoing async transfers - Verified by test ::fpga_i2c_test_async_abort.</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment"> *</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment"> * # Undefined behaviors</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="comment"> *</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment"> * * Use of a `null` pointer as an argument to any function.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment"> * * Calling any `I2C` function before calling ::i2c_init or after calling ::i2c_free.</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span> <span class="comment"> * * Initializing the `I2C` peripheral with invalid `SDA` and `SCL` pins.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"> * * Initializing the peripheral in slave mode if slave mode is not supported, indicated by ::i2c_get_capabilities.</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="comment"> * * Operating the peripheral in slave mode without first specifying an address using ::i2c_slave_address.</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment"> * * Setting an address using i2c_slave_address after initializing the peripheral in master mode.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment"> * * Setting an address to an `I2C` reserved value.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment"> * * Setting an address larger than the 7-bit supported maximum if 10-bit addressing is not supported.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment"> * * Setting an address larger than the 10-bit supported maximum.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment"> * * Setting a frequency outside the supported range given by ::i2c_get_capabilities.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment"> * * Using the device in a multimaster configuration when `supports_multimaster_mode` is false.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"> * * Specifying an invalid address when calling any `read` or `write` functions.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"> * * Setting the length of the transfer or receive buffers to larger than the buffers are.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment"> * * Passing an invalid pointer as `handler` to ::i2c_transfer_async.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment"> * * Calling ::i2c_abort_async when no transfer is in progress.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment"> *</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment"> */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment"></span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment">/**</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment"> * \defgroup hal_i2c_tests I2C hal tests</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment"> * The I2C test validate proper implementation of the I2C hal.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment"> *</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment"> * To run the I2C hal tests, use the command:</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="comment"> *</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> <span class="comment"> *     mbed test -t &lt;toolchain&gt; -m &lt;target&gt; -n tests-mbed_hal_fpga_ci_test_shield-i2c</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment"> */</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment">/**</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment"> * @defgroup hal_I2CEvents I2C Events Macros</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"> *</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment"> */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="preprocessor">#define I2C_EVENT_ERROR               (1 &lt;&lt; 1)</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="preprocessor">#define I2C_EVENT_ERROR_NO_SLAVE      (1 &lt;&lt; 2)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="preprocessor">#define I2C_EVENT_TRANSFER_COMPLETE   (1 &lt;&lt; 3)</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="preprocessor">#define I2C_EVENT_TRANSFER_EARLY_NACK (1 &lt;&lt; 4)</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="preprocessor">#define I2C_EVENT_ARBITRATION_LOST    (1 &lt;&lt; 5)</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="preprocessor">#define I2C_EVENT_ALL                 (I2C_EVENT_ERROR |  \</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="preprocessor">                                       I2C_EVENT_TRANSFER_COMPLETE | \</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="preprocessor">                                       I2C_EVENT_ERROR_NO_SLAVE | \</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="preprocessor">                                       I2C_EVENT_TRANSFER_EARLY_NACK | \</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="preprocessor">                                       I2C_EVENT_ARBITRATION_LOST)</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment">/**@}*/</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> </div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structi2c.html">i2c</a> <a class="code" href="structi2c.html">i2c_t</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> </div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> <span class="preprocessor">#if DEVICE_I2C_ASYNCH</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment">/** Structure describing the status of async transfer */</span></div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structi2c__async__event.html">  127</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structi2c__async__event.html">i2c_async_event</a> {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>     uint32_t sent_bytes;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>     uint32_t received_bytes;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>     int32_t error_status; <span class="comment">// error description I2C_ERROR_XXX</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>     <span class="keywordtype">bool</span> error;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> } <a class="code" href="group__hal__i2c.html#ga7377c4625ceab6614f3277ba34e630c6">i2c_async_event_t</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment">/** Asynchronous transfer callback.</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment"> *</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment"> *  @param obj       The I2C object</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment"> *  @param event     Pointer to the event holding async transfer status</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment"> *  @param ctx       The context pointer</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment"> *</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment"> *   @note Callback is invoked when async transfer completes or when an error is detected.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment"> */</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="group__hal__i2c.html#gaf7509dabc4863aa91678b5d1858b4853">  142</a></span> <span class="keyword">typedef</span> void (*<a class="code" href="group__hal__i2c.html#gaf7509dabc4863aa91678b5d1858b4853">i2c_async_handler_f</a>)(<a class="code" href="structi2c.html">i2c_t</a> *obj, <a class="code" href="structi2c__async__event.html">i2c_async_event_t</a> *event, <span class="keywordtype">void</span> *ctx);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment">/** I2C HAL structure */</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="structi2c.html">  146</a></span> <span class="keyword">struct </span><a class="code" href="structi2c.html">i2c</a> {</div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="group__hal.html#ga05e24dc4381756fa577cd363e579c245">  147</a></span>     <span class="keyword">struct </span>i2c_s <a class="code" href="structi2c.html">i2c</a>;        <span class="comment">/**&lt; Target specific I2C structure */</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="preprocessor">#if DEVICE_I2C_ASYNCH</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="group__hal.html#gac1ee0c1b6e3718e90992ad549358d37b">  149</a></span>     <span class="keyword">struct </span><a class="code" href="structbuffer__s.html">buffer_s</a> tx_buff; <span class="comment">/**&lt; Tx buffer */</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="group__hal.html#gae5ead6b84771ba6b3f9deae4e799fe48">  150</a></span>     <span class="keyword">struct </span><a class="code" href="structbuffer__s.html">buffer_s</a> rx_buff; <span class="comment">/**&lt; Rx buffer */</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>     <a class="code" href="group__hal__i2c.html#gaf7509dabc4863aa91678b5d1858b4853">i2c_async_handler_f</a> handler;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>     <span class="keywordtype">void</span> *ctx;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> };</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment"></span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment">/** Transmission error codes */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>     I2C_ERROR_NO_SLAVE = -1,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>     I2C_ERROR_BUS_BUSY = -2,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>     I2C_ERROR_TIMEOUT  = -3,</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>     I2C_ERROR_ARBITRATION_LOST = -4</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span> };</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> <span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="keyword">extern</span> <span class="stringliteral">"C"</span> {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> </div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="structi2c__capabilities__t.html">  168</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span>{<span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment">    /**&lt; Minimum frequency supported must be set by target device */</span></div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="group__hal.html#gae458b22f79cfd9f9580bd6de764fdda4">  170</a></span>     uint32_t    <a class="code" href="group__hal.html#gae458b22f79cfd9f9580bd6de764fdda4">minimum_frequency</a>;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment">    /**&lt; Maximum frequency supported must be set by target device */</span></div><div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="group__hal.html#ga96b7950e1b7d096179a2ed67816ee17a">  172</a></span>     uint32_t    <a class="code" href="group__hal.html#ga96b7950e1b7d096179a2ed67816ee17a">maximum_frequency</a>;<span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment">    /**&lt; If true, the device can handle I2C slave mode. */</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="group__hal.html#gad1c2977c2a00e00a22291bd039eee49a">  174</a></span>     <span class="keywordtype">bool</span>        <a class="code" href="group__hal.html#gad1c2977c2a00e00a22291bd039eee49a">supports_slave_mode</a>;<span class="comment"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">    /**&lt; If true, supports 10-bit addressing. */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="group__hal.html#gaa183bcf7d9500f60e095a254a55d8c11">  176</a></span>     <span class="keywordtype">bool</span>        <a class="code" href="group__hal.html#gaa183bcf7d9500f60e095a254a55d8c11">supports_10bit_addressing</a>;<span class="comment"></span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment">    /**&lt; If true, the device handle multimaster collisions and arbitration safely*/</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="group__hal.html#ga391b4d7b647d41a2f9dc9509ddd5a10a">  178</a></span>     <span class="keywordtype">bool</span>        <a class="code" href="group__hal.html#ga391b4d7b647d41a2f9dc9509ddd5a10a">supports_multi_master</a>;<span class="comment"></span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment">    /**&lt; If true, supports configuring clock stretching. */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>     <span class="keywordtype">bool</span>        supports_clock_stretching;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> } <a class="code" href="structi2c__capabilities__t.html">i2c_capabilities_t</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment"></span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> <span class="comment">/**</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment"> * \defgroup hal_GeneralI2C I2C Configuration Functions</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment"> *</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span> <span class="comment"> * # Defined behavior</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span> <span class="comment"> * * ::i2c_init initializes i2c_t control structure</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> <span class="comment"> * * ::i2c_init configures the pins used by I2C</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> <span class="comment"> * * ::i2c_free returns the pins owned by the I2C object to their reset state</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span> <span class="comment"> * * ::i2c_frequency configure the I2C frequency</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> <span class="comment"> * * ::i2c_start sends START command</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment"> * * ::i2c_read reads `length` bytes from the I2C slave specified by `address` to the `data` buffer</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment"> * * ::i2c_read reads generates a stop condition on the bus at the end of the transfer if `stop` parameter is non-zero</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment"> * * ::i2c_read reads returns the number of symbols received from the bus</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> <span class="comment"> * * ::i2c_write writes `length` bytes to the I2C slave specified by `address` from the `data` buffer</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> <span class="comment"> * * ::i2c_write generates a stop condition on the bus at the end of the transfer if `stop` parameter is non-zero</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment"> * * ::i2c_write returns zero on success, error code otherwise</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span> <span class="comment"> * * ::i2c_reset resets the I2C peripheral</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="comment"> * * ::i2c_byte_read reads and return one byte from the specfied I2C slave</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="comment"> * * ::i2c_byte_read uses `last` parameter to inform the slave that all bytes have been read</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> <span class="comment"> * * ::i2c_byte_write writes one byte to the specified I2C slave</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> <span class="comment"> * * ::i2c_byte_write returns 0 if NAK was received, 1 if ACK was received, 2 for timeout</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment"> * * ::i2c_slave_mode enables/disables I2S slave mode</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment"> * * ::i2c_slave_receive returns: 1 - read addresses, 2 - write to all slaves, 3 write addressed, 0 - the slave has not been addressed</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment"> * * ::i2c_slave_read reads `length` bytes from the I2C master to the `data` buffer</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment"> * * ::i2c_slave_read returns non-zero if a value is available, 0 otherwise</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment"> * * ::i2c_slave_write writes `length` bytes to the I2C master from the `data` buffer</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment"> * * ::i2c_slave_write returns non-zero if a value is available, 0 otherwise</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> <span class="comment"> * * ::i2c_slave_address configures I2C slave address</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment"> * * ::i2c_transfer_asynch starts I2C asynchronous transfer</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment"> * * ::i2c_transfer_asynch writes `tx_length` bytes to the I2C slave specified by `address` from the `tx` buffer</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment"> * * ::i2c_transfer_asynch reads `rx_length` bytes from the I2C slave specified by `address` to the `rx` buffer</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment"> * * ::i2c_transfer_asynch generates a stop condition on the bus at the end of the transfer if `stop` parameter is non-zero</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment"> * * The callback given to ::i2c_transfer_asynch is invoked when the transfer completes</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment"> * * ::i2c_transfer_asynch specifies the logical OR of events to be registered</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment"> * * The ::i2c_transfer_asynch function may use the `DMAUsage` hint to select the appropriate async algorithm</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment"> * * ::i2c_irq_handler_asynch returns event flags if a transfer termination condition was met, otherwise returns 0.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment"> * * ::i2c_active returns non-zero if the I2C module is active or 0 if it is not</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment"> * * ::i2c_abort_asynch aborts an on-going async transfer</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment"> *</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment"> * # Undefined behavior</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="comment"> * * Calling ::i2c_init multiple times on the same `i2c_t`</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> <span class="comment"> * * Calling any function other than ::i2c_init on a non-initialized `i2c_t`</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment"> * * Initialising the `I2C` peripheral with invalid `SDA` and `SCL` pins.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment"> * * Passing pins that cannot be on the same peripheral</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment"> * * Passing an invalid pointer as `obj` to any function</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment"> * * Use of a `null` pointer as an argument to any function.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment"> * * Initialising the peripheral in slave mode if slave mode is not supported</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment"> * * Operating the peripheral in slave mode without first specifying and address using ::i2c_slave_address</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment"> * * Setting an address using i2c_slave_address after initialising the peripheral in master mode</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment"> * * Setting an address to an `I2C` reserved value</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="comment"> * * Specifying an invalid address when calling any `read` or `write` functions</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment"> * * Setting the length of the transfer or receive buffers to larger than the buffers are</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment"> * * Passing an invalid pointer as `handler`</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment"> * * Calling ::i2c_abort_async when no transfer is currently in progress</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment"> *</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment"> *</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment"> */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment"></span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment">/**</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment"> * \defgroup hal_GeneralI2C_tests I2C hal tests</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment"> * The I2C HAL tests ensure driver conformance to defined behaviour.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment"> *</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment"> * To run the I2C hal tests use the command:</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment"> *</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment"> *     mbed test -t &lt;toolchain&gt; -m &lt;target&gt; -n tests-mbed_hal_fpga_ci_test_shield-i2c</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment"> *</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment"> */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> </div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment">/** Fills structure indicating supported features and frequencies on the current</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment"> *  platform.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment"> *</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment"> * @param[out] capabilities  Capabilities structure filled with supported</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span> <span class="comment"> *                           configurations.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment"> */</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#ga3c774d870d5358ed543002bcbb86a584">i2c_get_capabilities</a>(<a class="code" href="structi2c__capabilities__t.html">i2c_capabilities_t</a> *capabilities);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">/** Initialize the I2C peripheral. It sets the default parameters for the I2C</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment"> *  peripheral and configures its pins.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment"> *</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment"> *  @param obj       The I2C object</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span> <span class="comment"> *  @param sda       The sda pin</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> <span class="comment"> *  @param scl       The scl pin</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> <span class="comment"> *  @param is_slave  Choose whether the peripheral is initialized as master or</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment"> *                   slave.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment"> */</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#ga6c338f490a4e0933cb3e6bb88a0a950a">i2c_init</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, PinName sda, PinName scl, <span class="keywordtype">bool</span> is_slave);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">/** Release the I2C object.</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> <span class="comment"> *</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment"> *  @param obj The I2C object to deinitialize</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment"> */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#gae70b0ff68f4c598cb48cb5c3a50a2cba">i2c_free</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment"></span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment">/** Configure the frequency in Hz at which the I2C peripheral should operate.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="comment"> *</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> <span class="comment"> *  @param obj        The I2C object</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="comment"> *  @param frequency  Frequency in Hz</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment"> *</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment"> *  @returns The actual frequency that the peripheral generates to</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> <span class="comment"> *           allow a user to adjust its strategy in case the target cannot be</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment"> *           reached.</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="comment"> */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> uint32_t <a class="code" href="group__hal___general_i2_c.html#gad19ba573c066dd9560d145399cf46ac8">i2c_frequency</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, uint32_t frequency);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="comment"></span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment">/** Enable or disable clock stretching for the I2C peripheral.</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment"> *</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment"> * @param obj     The I2C object</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment"> * @param enabled If 'true', enable clock stretching on the given I2C peripheral;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment"> *                otherwise, disable it.</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment"> */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#ga7afd9d4800b9a6d2c9a3897bf2e1cc23">i2c_set_clock_stretching</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, <span class="keywordtype">bool</span> enabled);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment"></span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment">/** Configure the timeout duration in microseconds for blocking transmission</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment"> *</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span> <span class="comment"> *  @param obj        The I2C object</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment"> *  @param timeout    Transmission timeout in microseconds.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> <span class="comment"> *</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> <span class="comment"> *  @note If no timeout is set, the default timeout is used.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment"> *        Default timeout value is based on I2C frequency.</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment"> *        Byte timeout is computed as triple amount of time it would take</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment"> *        to send 10 bit over I2C and is expressed by the formula:</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment"> *        byte_timeout = 3 * (1/frequency * 10 * 1000000)</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment"> */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#ga970c13b7db4b73b457b12b707a53fa3a">i2c_timeout</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, uint32_t timeout);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> <span class="comment">/** Send START command</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="comment"> *</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> <span class="comment"> *  @param obj The I2C object.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment"> */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#gaef06e7ceb299a5e9a3124f56809d6f4e">i2c_start</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span> <span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> <span class="comment">/** Send STOP command</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span> <span class="comment"> *</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> <span class="comment"> *  @param obj The I2C object</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment"> */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___general_i2_c.html#ga5b9347e49adc776fa5b9edd542155c43">i2c_stop</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment"></span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> <span class="comment">/** Blocking sending data</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment"> *</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment"> *  This function transmits data when the peripheral is configured as Master to</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment"> *  the selected slave and when configured as Slave transmits data to the</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment"> *  Master.</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment"> *</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment"> *  This function is blocking; it returns when the transfer is complete or a</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="comment"> *  timeout event is triggered. The number of bytes transmitted is returned by</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span> <span class="comment"> *  the function after the operation is completed. Transmit operation cannot be</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> <span class="comment"> *  canceled or aborted.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> <span class="comment"> *</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> <span class="comment"> *  The data buffer must stay allocated during the duration of the transfer, and</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment"> *  the contents must not be modified. The value of the specified `address` is</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment"> *  ignored when configured in slave mode. In master mode, it contains the</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment"> *  address of the target peripheral. This is a 7-bit value unless 10-bit</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment"> *  addressing is configured, and the target supports it.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment"> *</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment"> *  When in master mode, the operation consists of:</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment"> *   - Addressing the slave as a Master transmitter.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment"> *   - Transmitting data to the addressed slave.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment"> *   - Generating a STOP condition if the specified `stop` field is true.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> <span class="comment"> *</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span> <span class="comment"> *  @param obj     The I2C object</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> <span class="comment"> *  @param address 7/10-bit address (last bit is 0)</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> <span class="comment"> *  @param data    The buffer for sending</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"> *  @param length  Number of bytes to write</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment"> *  @param stop    If true, stop is generated after the transfer is done</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment"> *</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment"> *  @note If the current platform supports multimaster operation, the peripheral</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment"> *        performs arbitration automatically when detecting collisions and</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment"> *        completes the transfer or returns I2C_ERROR_ARBITRATION_LOST</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment"> *        when it loses arbitration.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment"> *</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment"> *        Additional time for arbitration or clock stretching should by count</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment"> *        by setting appropriate timeout value.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment"> *</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment"> *        When no transmision timeout is set by the user, the default timeout value is</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment"> *        used. It counts one additional byte for addressing stage:</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment"> *        default_timeout = (length + 1) * byte_timeout.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment"> *</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment"> *  @return</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment"> *      zero or nonzero - Number of written bytes</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment"> *      negative - I2C_ERROR_XXX status</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment"> */</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> int32_t <a class="code" href="group__hal___general_i2_c.html#ga4729a42e83ca77662f432466f28c81e0">i2c_write</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, uint16_t address, <span class="keyword">const</span> uint8_t *data,</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>                   uint32_t length, <span class="keywordtype">bool</span> stop);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment"></span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment">/** Blocking reading data</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment"> *</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment"> *  This function receives data when the peripheral is configured as Master</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment"> *  from the selected slave and when configured as Slave from the Master.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> <span class="comment"> *</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment"> *  This function is blocking; it returns when the transfer is complete or a</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment"> *  timeout event is triggered. The number of bytes received is returned by</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment"> *  the function after the operation is completed. Receive operation cannot be</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment"> *  canceled or aborted.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment"> *</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment"> *  When in master mode, the operation consists of:</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment"> *   - Addressing the slave as a Master receiver.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment"> *   - Receiving data from the addressed slave.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment"> *   - Generating a STOP condition if the specified `stop` field is true.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment"> *</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment"> *  @param obj     The I2C object</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment"> *  @param address 7/10-bit address (last bit is 1)</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment"> *  @param data    The buffer for receiving</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="comment"> *  @param length  Number of bytes to read</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment"> *  @param stop    If true, stop is generated after the transfer is done</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment"> *</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment"> *  @note If the current platform supports multimaster operation, the peripheral</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment"> *        performs arbitration automatically when detecting collisions and</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment"> *        completes the transfer or returns I2C_ERROR_ARBITRATION_LOST</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment"> *        when it loses arbitration.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment"> *</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment"> *        Additional time for arbitration or clock stretching should by count</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment"> *        by setting appropriate timeout value.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment"> *</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment"> *        When no transmision timeout is set by the user, the default timeout value is</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment"> *        used. It counts one additional byte for addressing stage:</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment"> *        default_timeout = (length + 1) * byte_timeout.</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment"> *</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment"> *  @return</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment"> *      zero or nonzero - Number of written bytes</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment"> *      negative - I2C_ERROR_XXX status</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment"> */</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> int32_t <a class="code" href="group__hal___general_i2_c.html#gace6a9adfda3af19be188b3988ca414f4">i2c_read</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, uint16_t address, uint8_t *data, uint32_t length,</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>                  <span class="keywordtype">bool</span> stop);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment"></span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment">/** Get the pins that support I2C SDA</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment"> *</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment"> * Return a PinMap array of pins that support I2C SDA in</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment"> * master mode. The array is terminated with {NC, NC, 0}.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment"> *</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment"> * @return PinMap array</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> <span class="comment"> */</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span> <span class="keyword">const</span> <a class="code" href="struct_pin_map.html">PinMap</a> *<a class="code" href="group__hal___general_i2_c.html#gace6c8730abc5b59f24c516bea8ea81ec">i2c_master_sda_pinmap</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="comment"></span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span> <span class="comment">/** Get the pins that support I2C SCL</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span> <span class="comment"> *</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span> <span class="comment"> * Return a PinMap array of pins that support I2C SCL in</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment"> * master mode. The array is terminated with {NC, NC, 0}.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment"> *</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="comment"> * @return PinMap array</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment"> */</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span> <span class="keyword">const</span> <a class="code" href="struct_pin_map.html">PinMap</a> *<a class="code" href="group__hal___general_i2_c.html#ga6f1b510565f17eb8c15ea0121c7c1367">i2c_master_scl_pinmap</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span> <span class="comment"></span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span> <span class="comment">/** Get the pins that support I2C SDA</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span> <span class="comment"> *</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> <span class="comment"> * Return a PinMap array of pins that support I2C SDA in</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span> <span class="comment"> * slave mode. The array is terminated with {NC, NC, 0}.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> <span class="comment"> *</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span> <span class="comment"> * @return PinMap array</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span> <span class="comment"> */</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="keyword">const</span> <a class="code" href="struct_pin_map.html">PinMap</a> *<a class="code" href="group__hal___general_i2_c.html#ga4509b62ed3377fc069386e1ed53b9776">i2c_slave_sda_pinmap</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment"></span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment">/** Get the pins that support I2C SCL</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment"> *</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment"> * Return a PinMap array of pins that support I2C SCL in</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span> <span class="comment"> * slave mode. The array is terminated with {NC, NC, 0}.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment"> *</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span> <span class="comment"> * @return PinMap array</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> <span class="comment"> */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span> <span class="keyword">const</span> <a class="code" href="struct_pin_map.html">PinMap</a> *<a class="code" href="group__hal___general_i2_c.html#gadb30d55ff606354cbd51674e8aa63f12">i2c_slave_scl_pinmap</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span> <span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span> <span class="comment">/**@}*/</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span> </div><div class="line"><a name="l00446"></a><span class="lineno">  446</span> <span class="preprocessor">#if DEVICE_I2CSLAVE</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> <span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment">/**</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment"> * \defgroup SynchI2C Synchronous I2C Hardware Abstraction Layer for slave</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment"> */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment"></span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment">/** Slave status</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment"> *</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment"> *  @note Default status is Idle.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment"> */</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="group___synch_i2_c.html#gab15234c72ab5da110d3b2a767a84df1c">  457</a></span> <span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>     Idle           = 0, <span class="comment">// Slave has not been addressed.</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>     ReadAddressed  = 1, <span class="comment">// Master has requested a read from this slave.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>     WriteGeneral   = 2, <span class="comment">// Master is writing to all slaves.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>     WriteAddressed = 3  <span class="comment">// Master is writing to this slave.</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span> } <a class="code" href="group___synch_i2_c.html#gab15234c72ab5da110d3b2a767a84df1c">i2c_slave_status_t</a>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span> <span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span> <span class="comment">/** Check to see if the I2C slave has been addressed.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> <span class="comment"> *</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span> <span class="comment"> *  @param obj The I2C object</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span> <span class="comment"> *  @return The status - i2c_slave_status_t indicating what state the peripheral</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span> <span class="comment"> *          is configured in.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span> <span class="comment"> */</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span> <a class="code" href="group___synch_i2_c.html#gab15234c72ab5da110d3b2a767a84df1c">i2c_slave_status_t</a> <a class="code" href="group___synch_i2_c.html#ga4d459bcbf0b1a62e18b97b3019af7009">i2c_slave_status</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span> <span class="comment"></span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span> <span class="comment">/** Configure I2C address.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> <span class="comment"> *</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span> <span class="comment"> *  @note This function does nothing when configured in master mode.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> <span class="comment"> *</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> <span class="comment"> *  @param obj     The I2C object</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment"> *  @param address The address to be set - 7 bit or 10 bit</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span> <span class="comment"> */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="keywordtype">void</span> <a class="code" href="group___synch_i2_c.html#gaf072f739346f895d3f974c3224b58bb2">i2c_slave_address</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, uint16_t address);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span> <span class="comment">/**@}*/</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span> </div><div class="line"><a name="l00485"></a><span class="lineno">  485</span> <span class="preprocessor">#if DEVICE_I2C_ASYNCH</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span> <span class="comment"></span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span> <span class="comment">/**</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span> <span class="comment"> * \defgroup hal_AsynchI2C Asynchronous I2C Hardware Abstraction Layer</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span> <span class="comment"> */</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment">/** Start I2C asynchronous transfer</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment"> *</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment"> *  @param obj       The I2C object</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment"> *  @param tx        The transmit buffer</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span> <span class="comment"> *  @param tx_length The number of bytes to transmit</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment"> *  @param rx        The receive buffer</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment"> *  @param rx_length The number of bytes to receive</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="comment"> *  @param address   The address to be set - 7 bit or 10 bit</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span> <span class="comment"> *  @param stop      If true, stop is generated after the transfer is done</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment"> *  @param handler   The I2C IRQ handler to be set</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment"> *  @param ctx       The context pointer</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span> <span class="comment"> *  @return          true if the transfer was successfully scheduled, false otherwise</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="comment"> */</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span> <span class="keywordtype">bool</span> <a class="code" href="group__hal___asynch_i2_c.html#ga154961837fe4d67304784b87c08f5912">i2c_transfer_async</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj, <span class="keyword">const</span> uint8_t *tx, uint32_t tx_length,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>                         uint8_t *rx, uint32_t rx_length, uint16_t address,</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>                         <span class="keywordtype">bool</span> stop, <a class="code" href="group__hal__i2c.html#gaf7509dabc4863aa91678b5d1858b4853">i2c_async_handler_f</a> handler, <span class="keywordtype">void</span> *ctx);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span> <span class="comment"></span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span> <span class="comment">/** Abort asynchronous transfer</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span> <span class="comment"> *</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span> <span class="comment"> *  This function does not perform any check - that should happen in upper</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span> <span class="comment"> *  layers.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> <span class="comment"> *</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span> <span class="comment"> *  @param obj The I2C object</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span> <span class="comment"> */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> <span class="keywordtype">void</span> <a class="code" href="group__hal___asynch_i2_c.html#ga56bd05e76a0a724884c8edac7eaf946a">i2c_abort_async</a>(<a class="code" href="structi2c.html">i2c_t</a> *obj);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span> </div><div class="line"><a name="l00518"></a><span class="lineno">  518</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> <span class="comment"></span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span> <span class="comment">/**@}*/</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span> </div><div class="line"><a name="l00522"></a><span class="lineno">  522</span> <span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span> }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span> </div><div class="line"><a name="l00526"></a><span class="lineno">  526</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span> </div><div class="line"><a name="l00528"></a><span class="lineno">  528</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span> <span class="comment"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span> <span class="comment">/** @}*/</span></div><div class="ttc" id="group__hal_html_gad1c2977c2a00e00a22291bd039eee49a"><div class="ttname"><a href="group__hal.html#gad1c2977c2a00e00a22291bd039eee49a">i2c_capabilities_t::supports_slave_mode</a></div><div class="ttdeci">bool supports_slave_mode</div><div class="ttdoc">If true, supports 10-bit addressing. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00174">i2c_api.h:174</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga6f1b510565f17eb8c15ea0121c7c1367"><div class="ttname"><a href="group__hal___general_i2_c.html#ga6f1b510565f17eb8c15ea0121c7c1367">i2c_master_scl_pinmap</a></div><div class="ttdeci">const PinMap * i2c_master_scl_pinmap(void)</div><div class="ttdoc">Get the pins that support I2C SCL. </div></div>
<div class="ttc" id="group__hal_html_ga391b4d7b647d41a2f9dc9509ddd5a10a"><div class="ttname"><a href="group__hal.html#ga391b4d7b647d41a2f9dc9509ddd5a10a">i2c_capabilities_t::supports_multi_master</a></div><div class="ttdeci">bool supports_multi_master</div><div class="ttdoc">If true, supports configuring clock stretching. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00178">i2c_api.h:178</a></div></div>
<div class="ttc" id="structi2c__capabilities__t_html"><div class="ttname"><a href="structi2c__capabilities__t.html">i2c_capabilities_t</a></div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00168">i2c_api.h:168</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gace6c8730abc5b59f24c516bea8ea81ec"><div class="ttname"><a href="group__hal___general_i2_c.html#gace6c8730abc5b59f24c516bea8ea81ec">i2c_master_sda_pinmap</a></div><div class="ttdeci">const PinMap * i2c_master_sda_pinmap(void)</div><div class="ttdoc">Get the pins that support I2C SDA. </div></div>
<div class="ttc" id="structbuffer__s_html"><div class="ttname"><a href="structbuffer__s.html">buffer_s</a></div><div class="ttdoc">Generic buffer structure. </div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00027">buffer.h:27</a></div></div>
<div class="ttc" id="group__hal_html_gaa183bcf7d9500f60e095a254a55d8c11"><div class="ttname"><a href="group__hal.html#gaa183bcf7d9500f60e095a254a55d8c11">i2c_capabilities_t::supports_10bit_addressing</a></div><div class="ttdeci">bool supports_10bit_addressing</div><div class="ttdoc">If true, the device handle multimaster collisions and arbitration safely. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00176">i2c_api.h:176</a></div></div>
<div class="ttc" id="structi2c_html"><div class="ttname"><a href="structi2c.html">i2c</a></div><div class="ttdoc">I2C HAL structure. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00146">i2c_api.h:146</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga7afd9d4800b9a6d2c9a3897bf2e1cc23"><div class="ttname"><a href="group__hal___general_i2_c.html#ga7afd9d4800b9a6d2c9a3897bf2e1cc23">i2c_set_clock_stretching</a></div><div class="ttdeci">void i2c_set_clock_stretching(i2c_t *obj, bool enabled)</div><div class="ttdoc">Enable or disable clock stretching for the I2C peripheral. </div></div>
<div class="ttc" id="group__hal_html_ga96b7950e1b7d096179a2ed67816ee17a"><div class="ttname"><a href="group__hal.html#ga96b7950e1b7d096179a2ed67816ee17a">i2c_capabilities_t::maximum_frequency</a></div><div class="ttdeci">uint32_t maximum_frequency</div><div class="ttdoc">If true, the device can handle I2C slave mode. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00172">i2c_api.h:172</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga6c338f490a4e0933cb3e6bb88a0a950a"><div class="ttname"><a href="group__hal___general_i2_c.html#ga6c338f490a4e0933cb3e6bb88a0a950a">i2c_init</a></div><div class="ttdeci">void i2c_init(i2c_t *obj, PinName sda, PinName scl, bool is_slave)</div><div class="ttdoc">Initialize the I2C peripheral. </div></div>
<div class="ttc" id="group__hal___asynch_i2_c_html_ga154961837fe4d67304784b87c08f5912"><div class="ttname"><a href="group__hal___asynch_i2_c.html#ga154961837fe4d67304784b87c08f5912">i2c_transfer_async</a></div><div class="ttdeci">bool i2c_transfer_async(i2c_t *obj, const uint8_t *tx, uint32_t tx_length, uint8_t *rx, uint32_t rx_length, uint16_t address, bool stop, i2c_async_handler_f handler, void *ctx)</div><div class="ttdoc">Start I2C asynchronous transfer. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga4509b62ed3377fc069386e1ed53b9776"><div class="ttname"><a href="group__hal___general_i2_c.html#ga4509b62ed3377fc069386e1ed53b9776">i2c_slave_sda_pinmap</a></div><div class="ttdeci">const PinMap * i2c_slave_sda_pinmap(void)</div><div class="ttdoc">Get the pins that support I2C SDA. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gadb30d55ff606354cbd51674e8aa63f12"><div class="ttname"><a href="group__hal___general_i2_c.html#gadb30d55ff606354cbd51674e8aa63f12">i2c_slave_scl_pinmap</a></div><div class="ttdeci">const PinMap * i2c_slave_scl_pinmap(void)</div><div class="ttdoc">Get the pins that support I2C SCL. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga3c774d870d5358ed543002bcbb86a584"><div class="ttname"><a href="group__hal___general_i2_c.html#ga3c774d870d5358ed543002bcbb86a584">i2c_get_capabilities</a></div><div class="ttdeci">void i2c_get_capabilities(i2c_capabilities_t *capabilities)</div><div class="ttdoc">Fills structure indicating supported features and frequencies on the current platform. </div></div>
<div class="ttc" id="group___synch_i2_c_html_gaf072f739346f895d3f974c3224b58bb2"><div class="ttname"><a href="group___synch_i2_c.html#gaf072f739346f895d3f974c3224b58bb2">i2c_slave_address</a></div><div class="ttdeci">void i2c_slave_address(i2c_t *obj, uint16_t address)</div><div class="ttdoc">Configure I2C address. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga5b9347e49adc776fa5b9edd542155c43"><div class="ttname"><a href="group__hal___general_i2_c.html#ga5b9347e49adc776fa5b9edd542155c43">i2c_stop</a></div><div class="ttdeci">void i2c_stop(i2c_t *obj)</div><div class="ttdoc">Send STOP command. </div></div>
<div class="ttc" id="group__hal__i2c_html_gaf7509dabc4863aa91678b5d1858b4853"><div class="ttname"><a href="group__hal__i2c.html#gaf7509dabc4863aa91678b5d1858b4853">i2c_async_handler_f</a></div><div class="ttdeci">void(* i2c_async_handler_f)(i2c_t *obj, i2c_async_event_t *event, void *ctx)</div><div class="ttdoc">Asynchronous transfer callback. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00142">i2c_api.h:142</a></div></div>
<div class="ttc" id="structi2c__async__event_html"><div class="ttname"><a href="structi2c__async__event.html">i2c_async_event</a></div><div class="ttdoc">Structure describing the status of async transfer. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00127">i2c_api.h:127</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gad19ba573c066dd9560d145399cf46ac8"><div class="ttname"><a href="group__hal___general_i2_c.html#gad19ba573c066dd9560d145399cf46ac8">i2c_frequency</a></div><div class="ttdeci">uint32_t i2c_frequency(i2c_t *obj, uint32_t frequency)</div><div class="ttdoc">Configure the frequency in Hz at which the I2C peripheral should operate. </div></div>
<div class="ttc" id="group___synch_i2_c_html_gab15234c72ab5da110d3b2a767a84df1c"><div class="ttname"><a href="group___synch_i2_c.html#gab15234c72ab5da110d3b2a767a84df1c">i2c_slave_status_t</a></div><div class="ttdeci">i2c_slave_status_t</div><div class="ttdoc">Slave status. </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00457">i2c_api.h:457</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga970c13b7db4b73b457b12b707a53fa3a"><div class="ttname"><a href="group__hal___general_i2_c.html#ga970c13b7db4b73b457b12b707a53fa3a">i2c_timeout</a></div><div class="ttdeci">void i2c_timeout(i2c_t *obj, uint32_t timeout)</div><div class="ttdoc">Configure the timeout duration in microseconds for blocking transmission. </div></div>
<div class="ttc" id="group__hal___asynch_i2_c_html_ga56bd05e76a0a724884c8edac7eaf946a"><div class="ttname"><a href="group__hal___asynch_i2_c.html#ga56bd05e76a0a724884c8edac7eaf946a">i2c_abort_async</a></div><div class="ttdeci">void i2c_abort_async(i2c_t *obj)</div><div class="ttdoc">Abort asynchronous transfer. </div></div>
<div class="ttc" id="group__hal__i2c_html_ga7377c4625ceab6614f3277ba34e630c6"><div class="ttname"><a href="group__hal__i2c.html#ga7377c4625ceab6614f3277ba34e630c6">i2c_async_event_t</a></div><div class="ttdeci">struct i2c_async_event i2c_async_event_t</div><div class="ttdoc">Structure describing the status of async transfer. </div></div>
<div class="ttc" id="group___synch_i2_c_html_ga4d459bcbf0b1a62e18b97b3019af7009"><div class="ttname"><a href="group___synch_i2_c.html#ga4d459bcbf0b1a62e18b97b3019af7009">i2c_slave_status</a></div><div class="ttdeci">i2c_slave_status_t i2c_slave_status(i2c_t *obj)</div><div class="ttdoc">Check to see if the I2C slave has been addressed. </div></div>
<div class="ttc" id="struct_pin_map_html"><div class="ttname"><a href="struct_pin_map.html">PinMap</a></div><div class="ttdef"><b>Definition:</b> <a href="pinmap_8h_source.html#l00030">pinmap.h:30</a></div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gae70b0ff68f4c598cb48cb5c3a50a2cba"><div class="ttname"><a href="group__hal___general_i2_c.html#gae70b0ff68f4c598cb48cb5c3a50a2cba">i2c_free</a></div><div class="ttdeci">void i2c_free(i2c_t *obj)</div><div class="ttdoc">Release the I2C object. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_ga4729a42e83ca77662f432466f28c81e0"><div class="ttname"><a href="group__hal___general_i2_c.html#ga4729a42e83ca77662f432466f28c81e0">i2c_write</a></div><div class="ttdeci">int32_t i2c_write(i2c_t *obj, uint16_t address, const uint8_t *data, uint32_t length, bool stop)</div><div class="ttdoc">Blocking sending data. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gace6a9adfda3af19be188b3988ca414f4"><div class="ttname"><a href="group__hal___general_i2_c.html#gace6a9adfda3af19be188b3988ca414f4">i2c_read</a></div><div class="ttdeci">int32_t i2c_read(i2c_t *obj, uint16_t address, uint8_t *data, uint32_t length, bool stop)</div><div class="ttdoc">Blocking reading data. </div></div>
<div class="ttc" id="group__hal___general_i2_c_html_gaef06e7ceb299a5e9a3124f56809d6f4e"><div class="ttname"><a href="group__hal___general_i2_c.html#gaef06e7ceb299a5e9a3124f56809d6f4e">i2c_start</a></div><div class="ttdeci">void i2c_start(i2c_t *obj)</div><div class="ttdoc">Send START command. </div></div>
<div class="ttc" id="group__hal_html_gae458b22f79cfd9f9580bd6de764fdda4"><div class="ttname"><a href="group__hal.html#gae458b22f79cfd9f9580bd6de764fdda4">i2c_capabilities_t::minimum_frequency</a></div><div class="ttdeci">uint32_t minimum_frequency</div><div class="ttdoc">&lt; Minimum frequency supported must be set by target device </div><div class="ttdef"><b>Definition:</b> <a href="i2c__api_8h_source.html#l00170">i2c_api.h:170</a></div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/feature-i2c-doxy/i2c__api_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 16:07:33 GMT -->
</html>
