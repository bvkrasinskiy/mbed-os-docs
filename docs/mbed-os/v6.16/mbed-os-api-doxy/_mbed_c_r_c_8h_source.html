<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_mbed_c_r_c_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:25:10 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | MbedCRC.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="_mbed_c_r_c_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_mbed_c_r_c_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_mbed_c_r_c_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_f1b16baafcc1697607aba4d4d51e2eb7.html">drivers</a></li><li class="navelem"><a class="el" href="dir_c27770461c59ff9def2c7798e55558b8.html">include</a></li><li class="navelem"><a class="el" href="dir_7f403d8194c1643c9182d133567e8223.html">drivers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MbedCRC.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/* mbed Microcontroller Library</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> * Copyright (c) 2018 ARM Limited</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> * SPDX-License-Identifier: Apache-2.0</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> */</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="preprocessor">#ifndef MBED_CRC_API_H</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="preprocessor">#define MBED_CRC_API_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> </div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> <span class="preprocessor">#include "cmsis.h"</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="preprocessor">#include "hal/crc_api.h"</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="preprocessor">#ifdef DEVICE_CRC</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="preprocessor">#include "device.h"</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="preprocessor">#include "platform/mbed_assert.h"</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> </div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="preprocessor">#include "platform/SingletonPtr.h"</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="preprocessor">#include "platform/PlatformMutex.h"</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> </div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="preprocessor">#include &lt;mstd_type_traits&gt;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="keyword">namespace </span><a class="code" href="namespacembed.html">mbed</a> {<span class="comment"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment">/** \addtogroup drivers-public-api */</span><span class="comment"></span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment">/** @{*/</span><span class="comment"></span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment">/**</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment"> * \defgroup drivers_MbedCRC MbedCRC class</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="comment"> */</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="keyword">extern</span> <a class="code" href="struct_singleton_ptr.html">SingletonPtr&lt;PlatformMutex&gt;</a> mbed_crc_mutex;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment"></span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment">/** CRC mode selection</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> */</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="keyword">enum class</span> CrcMode {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>     HARDWARE,   <span class="comment">/// Use hardware (if available), else table-based computation</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="comment"></span>    TABLE,      <span class="comment">/// Use table-based computation (if table available), else bitwise</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="comment"></span>    BITWISE     <span class="comment">/// Always use bitwise manual computation</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment"></span>};</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> </div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="preprocessor">#ifndef DOXYGEN_ONLY</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="keyword">namespace </span>impl {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t polynomial, u<span class="keywordtype">int</span>8_t w<span class="keywordtype">id</span>th, CrcMode mode&gt;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="keyword">class </span>MbedCRC;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> </div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> constexpr <span class="keywordtype">bool</span> have_crc_table(uint32_t polynomial, uint8_t width)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="preprocessor">#if MBED_CRC_TABLE_SIZE &gt; 0</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>     <span class="keywordflow">return</span> (polynomial == <a class="code" href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aaf75299fa9ab0db23269d0f43bb7a0f45">POLY_32BIT_ANSI</a> &amp;&amp; width == 32) ||</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>            (polynomial == <a class="code" href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa892af83ad6b24294e7d82e1a5ac87509">POLY_16BIT_IBM</a> &amp;&amp; width == 16) ||</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>            (polynomial == <a class="code" href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aae788c7d08ed51c9e1fba9bc3295a13c6">POLY_16BIT_CCITT</a> &amp;&amp; width == 16) ||</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>            (polynomial == <a class="code" href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa11f0187e6192505aec2bf4269c26d5ea">POLY_8BIT_CCITT</a> &amp;&amp; width == 8) ||</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>            (polynomial == <a class="code" href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa7fb8f90dfd5ee3cd5b2767bac79ae99d">POLY_7BIT_SD</a> &amp;&amp; width == 7);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="preprocessor">#else</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> constexpr CrcMode choose_crc_mode(uint32_t polynomial, uint8_t width, CrcMode mode_limit)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>     <span class="keywordflow">return</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>         mode_limit == CrcMode::HARDWARE &amp;&amp; HAL_CRC_IS_SUPPORTED(polynomial, width) ? CrcMode::HARDWARE :</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>         mode_limit &lt;= CrcMode::TABLE &amp;&amp; have_crc_table(polynomial, width) ? CrcMode::TABLE :</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>         CrcMode::BITWISE;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span> }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="preprocessor">#endif // DOXYGEN_ONLY</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> </div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> } <span class="comment">// namespace impl</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment"></span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment">/** CRC object provides CRC generation through hardware or software</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment"> *</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment"> *  CRC sums can be generated using three different methods: hardware, software ROM tables</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment"> *  and bitwise computation. The mode used is normally selected automatically based on required</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"> *  polynomial and hardware capabilities. Any polynomial in standard form (`x^3 + x + 1`)</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"> *  can be used for computation, but custom ones can affect the performance.</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment"> *</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment"> *  First choice is the hardware mode. The supported polynomials are hardware specific, and</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment"> *  you need to consult your MCU manual to discover them. Next, ROM polynomial tables</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment"> *  are tried (you can find list of supported polynomials here ::crc_polynomial). If the selected</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment"> *  configuration is supported, it will accelerate the software computations. If ROM tables</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment"> *  are not available for the selected polynomial, then CRC is computed at run time bit by bit</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment"> *  for all data input.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment"> *</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment"> *  If desired, the mode can be manually limited for a given instance by specifying the mode_limit</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment"> *  template parameter. This might be appropriate to ensure a table is not pulled in for a</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment"> *  non-speed-critical CRC, or to avoid the hardware set-up overhead if you know you will be</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="comment"> *  calling `compute` with very small data sizes.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> <span class="comment"> *</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment"> *  @note Synchronization level: Thread safe</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment"> *</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment"> *  @tparam  polynomial CRC polynomial value in hex</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment"> *  @tparam  width      CRC polynomial width</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment"> *  @tparam  mode_limit Maximum amount of acceleration to use</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"> *</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment"> * Example: Compute CRC data</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment"> * @code</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment"> *</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="comment"> *  #include "mbed.h"</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment"> *</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="comment"> *  int main() {</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment"> *      MbedCRC&lt;POLY_32BIT_ANSI, 32&gt; ct;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment"> *</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment"> *      char  test[] = "123456789";</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment"> *      uint32_t crc = 0;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment"> *</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment"> *      printf("\nPolynomial = 0x%lx  Width = %d \n", ct.get_polynomial(), ct.get_width());</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment"> *</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment"> *      ct.compute((void *)test, strlen((const char*)test), &amp;crc);</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> <span class="comment"> *</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment"> *      printf("The CRC of data \"123456789\" is : 0x%lx\n", crc);</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> <span class="comment"> *      return 0;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> <span class="comment"> *  }</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment"> * @endcode</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment"> * Example: Compute CRC with data available in parts</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment"> * @code</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment"> *</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment"> *  #include "mbed.h"</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment"> *  int main() {</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment"> *      MbedCRC&lt;POLY_32BIT_ANSI, 32&gt; ct;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment"> *</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment"> *      char  test[] = "123456789";</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment"> *      uint32_t crc = 0;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment"> *</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment"> *      printf("\nPolynomial = 0x%lx  Width = %d \n", ct.get_polynomial(), ct.get_width());</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment"> *      ct.compute_partial_start(&amp;crc);</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment"> *      ct.compute_partial((void *)&amp;test, 4, &amp;crc);</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment"> *      ct.compute_partial((void *)&amp;test[4], 5, &amp;crc);</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment"> *      ct.compute_partial_stop(&amp;crc);</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment"> *      printf("The CRC of data \"123456789\" is : 0x%lx\n", crc);</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="comment"> *      return 0;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment"> *  }</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment"> * @endcode</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment"> */</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="keyword">template</span> &lt;u<span class="keywordtype">int</span>32_t polynomial = POLY_32BIT_ANSI, u<span class="keywordtype">int</span>8_t w<span class="keywordtype">id</span>th = 32, CrcMode mode_limit = CrcMode::HARDWARE&gt;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="keyword">class </span>MbedCRC  {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>     impl::MbedCRC&lt;polynomial, width, impl::choose_crc_mode(polynomial, width, mode_limit)&gt; crc_impl;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span> </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span> <span class="keyword">public</span>:</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>     <span class="comment">/* Backwards compatibility */</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>     <span class="keyword">enum</span> CrcMode {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>         HARDWARE    = int(::mbed::CrcMode::HARDWARE),</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>         TABLE       = int(::mbed::CrcMode::TABLE),</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>         BITWISE     = int(::mbed::CrcMode::BITWISE)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>     };</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span> </div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>     <span class="keyword">typedef</span> <span class="keywordtype">size_t</span> crc_data_size_t;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span> <span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> <span class="comment">    /** Lifetime of CRC object</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> <span class="comment">     *</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="comment">     *  @param  initial_xor  Initial value/seed to Xor</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment">     *  @param  final_xor  Final Xor value</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment">     *  @param  reflect_data</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment">     *  @param  reflect_remainder</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment">     *  @note   Default constructor without any arguments is valid only for supported CRC polynomials. :: crc_polynomial_t</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment">     *          MbedCRC &lt;POLY_7BIT_SD, 7&gt; ct; --- Valid POLY_7BIT_SD</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment">     *          MbedCRC &lt;0x1021, 16&gt; ct; --- Valid POLY_16BIT_CCITT</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment">     *          MbedCRC &lt;POLY_16BIT_CCITT, 32&gt; ct; --- Invalid, compilation error</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment">     *          MbedCRC &lt;POLY_16BIT_CCITT, 32&gt; ct (i,f,rd,rr) Constructor can be used for not supported polynomials</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment">     *          MbedCRC&lt;POLY_16BIT_CCITT, 16&gt; sd(0, 0, false, false); Constructor can also be used for supported</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">     *             polynomials with different initial/final/reflect values</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span> <span class="comment">     *</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment">     */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>     constexpr</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>     MbedCRC(uint32_t initial_xor, uint32_t final_xor, <span class="keywordtype">bool</span> reflect_data, <span class="keywordtype">bool</span> reflect_remainder) :</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>         crc_impl(initial_xor, final_xor, reflect_data, reflect_remainder)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>     {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>     }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> </div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>     <span class="comment">/* Default values for different types of polynomials</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment">    */</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>     <span class="comment">// *INDENT-OFF*</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>     <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t poly = polynomial, std::enable_if_t&lt;poly == POLY_32BIT_ANSI &amp;&amp; w<span class="keywordtype">id</span>th == 32, <span class="keywordtype">int</span>&gt; = 0&gt;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>     constexpr MbedCRC() : MbedCRC(0xFFFFFFFF, 0xFFFFFFFF, true, true)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>     {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>     }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> </div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>     <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t poly = polynomial, std::enable_if_t&lt;poly == POLY_16BIT_IBM &amp;&amp; w<span class="keywordtype">id</span>th == 16, <span class="keywordtype">int</span>&gt; = 0&gt;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>     constexpr MbedCRC() : MbedCRC(0, 0, true, true)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>     {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>     }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>     <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t poly = polynomial, std::enable_if_t&lt;poly == POLY_16BIT_CCITT &amp;&amp; w<span class="keywordtype">id</span>th == 16, <span class="keywordtype">int</span>&gt; = 0&gt;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>     constexpr MbedCRC() : MbedCRC(0xFFFF, 0, false, false)</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>     {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>     }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> </div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>     <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t poly = polynomial, std::enable_if_t&lt;poly == POLY_7BIT_SD &amp;&amp; w<span class="keywordtype">id</span>th == 7, <span class="keywordtype">int</span>&gt; = 0&gt;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>     constexpr MbedCRC() : MbedCRC(0, 0, false, false)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>     {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>     }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> </div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>     <span class="keyword">template</span>&lt;u<span class="keywordtype">int</span>32_t poly = polynomial, std::enable_if_t&lt;poly == POLY_8BIT_CCITT &amp;&amp; w<span class="keywordtype">id</span>th == 8, <span class="keywordtype">int</span>&gt; = 0&gt;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>     constexpr MbedCRC() : MbedCRC(0, 0, false, false)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>     {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>     }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>     <span class="comment">// *INDENT-ON*</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment">    /** Compute CRC for the data input</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">     *  Compute CRC performs the initialization, computation and collection of</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment">     *  final CRC.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment">     *</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment">     *  @param  buffer  Data bytes</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment">     *  @param  size  Size of data</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment">     *  @param  crc  CRC is the output value</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment">     *  @return  0 on success, negative error code on failure</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment">     */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>     int32_t compute(<span class="keyword">const</span> <span class="keywordtype">void</span> *buffer, crc_data_size_t size, uint32_t *crc)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>     {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>         <span class="keywordflow">return</span> crc_impl.compute(buffer, size, crc);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>     }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment"></span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment">    /** Compute partial CRC for the data input.</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment">     *</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment">     *  CRC data if not available fully, CRC can be computed in parts with available data.</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment">     *</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment">     *  In case of hardware, intermediate values and states are saved by hardware. Mutex</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="comment">     *  locking is used to serialize access to hardware CRC.</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment">     *</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment">     *  In case of software CRC, previous CRC output should be passed as argument to the</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment">     *  current compute_partial call. Please note the intermediate CRC value is maintained by</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment">     *  application and not the driver.</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment">     *</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment">     *  @pre: Call `compute_partial_start` to start the partial CRC calculation.</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment">     *  @post: Call `compute_partial_stop` to get the final CRC value.</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment">     *</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment">     *  @param  buffer  Data bytes</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment">     *  @param  size  Size of data</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment">     *  @param  crc  CRC value is intermediate CRC value filled by API.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment">     *  @return  0  on success or a negative error code on failure</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment">     *  @note: CRC as output in compute_partial is not final CRC value, call `compute_partial_stop`</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">     *         to get final correct CRC value.</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment">     */</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>     int32_t compute_partial(<span class="keyword">const</span> <span class="keywordtype">void</span> *buffer, crc_data_size_t size, uint32_t *crc)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>     {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>         <span class="keywordflow">return</span> crc_impl.compute_partial(buffer, size, crc);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>     }</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment"></span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment">    /** Compute partial start, indicate start of partial computation.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment">     *</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment">     *  This API should be called before performing any partial computation</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span> <span class="comment">     *  with compute_partial API.</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment">     *</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="comment">     *  @param  crc  Initial CRC value set by the API</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment">     *  @return  0  on success or a negative in case of failure</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">     *  @note: CRC is an out parameter and must be reused with compute_partial</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">     *         and `compute_partial_stop` without any modifications in application.</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment">     */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>     int32_t compute_partial_start(uint32_t *crc)</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>     {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>         <span class="keywordflow">return</span> crc_impl.compute_partial_start(crc);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>     }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment"></span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment">    /** Get the final CRC value of partial computation.</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment">     *</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment">     *  CRC value available in partial computation is not correct CRC, as some</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">     *  algorithms require remainder to be reflected and final value to be XORed</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> <span class="comment">     *  This API is used to perform final computation to get correct CRC value.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment">     *</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment">     *  @param crc  CRC result</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">     *  @return  0  on success or a negative in case of failure.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment">     */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>     int32_t compute_partial_stop(uint32_t *crc)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>     {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>         <span class="keywordflow">return</span> crc_impl.compute_partial_stop(crc);</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>     }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment"></span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment">    /** Get the current CRC polynomial.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> <span class="comment">     *</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment">     * @return  Polynomial value</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="comment">     */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>     <span class="keyword">static</span> constexpr uint32_t get_polynomial()</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>     {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>         <span class="keywordflow">return</span> polynomial;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>     }</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment">    /** Get the current CRC width</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment">     *</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment">     * @return  CRC width</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="comment">     */</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>     <span class="keyword">static</span> constexpr uint8_t get_width()</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>     {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>         <span class="keywordflow">return</span> width;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>     }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> };</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> </div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> <span class="preprocessor">#if !defined(DOXYGEN_ONLY)</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment">/* Internal implementation - basically same as public, but actual mode locked in */</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="keyword">namespace </span>impl {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> </div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="keyword">template</span> &lt;u<span class="keywordtype">int</span>32_t polynomial, u<span class="keywordtype">int</span>8_t w<span class="keywordtype">id</span>th, CrcMode mode&gt;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="keyword">class </span>MbedCRC {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="keyword">public</span>:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>     <span class="keyword">typedef</span> <span class="keywordtype">size_t</span> crc_data_size_t;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> </div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>     constexpr</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>     MbedCRC(uint32_t initial_xor, uint32_t final_xor, <span class="keywordtype">bool</span> reflect_data, <span class="keywordtype">bool</span> reflect_remainder) :</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>         _initial_value(adjust_initial_value(initial_xor, reflect_data)),</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>         _final_xor(final_xor),</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>         _reflect_data(reflect_data),</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>         _reflect_remainder(reflect_remainder)</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>     {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>         static_assert(width &lt;= 32, <span class="stringliteral">"Max 32-bit CRC supported"</span>);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>     }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment"></span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment">    /** Compute CRC for the data input</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> <span class="comment">     *  Compute CRC performs the initialization, computation and collection of</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment">     *  final CRC.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment">     *</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment">     *  @param  buffer  Data bytes</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment">     *  @param  size  Size of data</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment">     *  @param  crc  CRC is the output value</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment">     *  @return  0 on success, negative error code on failure</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="comment">     */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>     int32_t compute(<span class="keyword">const</span> <span class="keywordtype">void</span> *buffer, crc_data_size_t size, uint32_t *crc)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>     {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>         int32_t status;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> </div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>         status = compute_partial_start(crc);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>         <span class="keywordflow">if</span> (0 != status) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>             <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>         }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> </div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>         status = compute_partial(buffer, size, crc);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>         <span class="keywordflow">if</span> (0 != status) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>             <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>         }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> </div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>         status = compute_partial_stop(crc);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>         <span class="keywordflow">return</span> status;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>     }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment">    /** Compute partial CRC for the data input.</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment">     *</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment">     *  CRC data if not available fully, CRC can be computed in parts with available data.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment">     *</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment">     *  In case of hardware, intermediate values and states are saved by hardware. Mutex</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment">     *  locking is used to serialize access to hardware CRC.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment">     *</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment">     *  In case of software CRC, previous CRC output should be passed as argument to the</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment">     *  current compute_partial call. Please note the intermediate CRC value is maintained by</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment">     *  application and not the driver.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment">     *</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment">     *  @pre: Call `compute_partial_start` to start the partial CRC calculation.</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment">     *  @post: Call `compute_partial_stop` to get the final CRC value.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment">     *</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment">     *  @param  buffer  Data bytes</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment">     *  @param  size  Size of data</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment">     *  @param  crc  CRC value is intermediate CRC value filled by API.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment">     *  @return  0  on success or a negative error code on failure</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment">     *  @note: CRC as output in compute_partial is not final CRC value, call `compute_partial_stop`</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment">     *         to get final correct CRC value.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment">     */</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>     int32_t compute_partial(<span class="keyword">const</span> <span class="keywordtype">void</span> *buffer, crc_data_size_t size, uint32_t *crc)</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>     {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>         <span class="keyword">const</span> uint8_t *data = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>uint8_t *<span class="keyword">&gt;</span>(buffer);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>         <span class="keywordflow">return</span> do_compute_partial(data, size, crc);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>     }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment"></span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment">    /** Compute partial start, indicate start of partial computation.</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment">     *</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment">     *  This API should be called before performing any partial computation</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment">     *  with compute_partial API.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment">     *</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment">     *  @param  crc  Initial CRC value set by the API</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment">     *  @return  0  on success or a negative in case of failure</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment">     *  @note: CRC is an out parameter and must be reused with compute_partial</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment">     *         and `compute_partial_stop` without any modifications in application.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment">     */</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>     int32_t compute_partial_start(uint32_t *crc)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>     {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>         <span class="keywordflow">if</span> (mode == CrcMode::HARDWARE) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>             lock();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>             <a class="code" href="structcrc__mbed__config.html">crc_mbed_config_t</a> config;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>             config.<a class="code" href="structcrc__mbed__config.html#abbaed4d7eae04f71f20739687944763c">polynomial</a>  = polynomial;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>             config.<a class="code" href="structcrc__mbed__config.html#a325272ddd9a962f05deb905101d25cbd">width</a>       = width;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>             config.<a class="code" href="structcrc__mbed__config.html#a2fdeecaf4968c93f6fba4dd995bf2ba7">initial_xor</a> = _initial_value;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>             config.<a class="code" href="structcrc__mbed__config.html#af33e0b4f3e3014304a746920a96f75d0">final_xor</a>   = _final_xor;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>             config.<a class="code" href="structcrc__mbed__config.html#a73ff346d65ef1204e900c5a129ac93a7">reflect_in</a>  = _reflect_data;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>             config.<a class="code" href="structcrc__mbed__config.html#ad1438be6081f837b54df9fbef0ac16e7">reflect_out</a> = _reflect_remainder;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> </div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>             <a class="code" href="group__hal__crc.html#ga31e4d5a341c16c711c13da0ffc2ce6fd">hal_crc_compute_partial_start</a>(&amp;config);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>         }</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> </div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>         *crc = _initial_value;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>     }</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> <span class="comment">    /** Get the final CRC value of partial computation.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span> <span class="comment">     *</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment">     *  CRC value available in partial computation is not correct CRC, as some</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment">     *  algorithms require remainder to be reflected and final value to be XORed</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment">     *  This API is used to perform final computation to get correct CRC value.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment">     *</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment">     *  @param crc  CRC result</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment">     *  @return  0  on success or a negative in case of failure.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment">     */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>     int32_t compute_partial_stop(uint32_t *crc)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>     {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>         <span class="keywordflow">if</span> (mode == CrcMode::HARDWARE) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>             *crc = hal_crc_get_result();</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>             unlock();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>             <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>         }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>         uint_fast32_t p_crc = *crc;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>         <span class="keywordflow">if</span> (mode == CrcMode::BITWISE) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>             <span class="keywordflow">if</span> (_reflect_data) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>                 <span class="comment">/* CRC has MSB in bottom bit of register */</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>                 <span class="keywordflow">if</span> (!_reflect_remainder) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>                     p_crc = reflect_crc(p_crc);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>                 }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>             } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>                 <span class="comment">/* CRC has MSB in top bit of register */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>                 p_crc = _reflect_remainder ? reflect(p_crc) : shift_right(p_crc);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>             }</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>         } <span class="keywordflow">else</span> { <span class="comment">// TABLE</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>             <span class="comment">/* CRC has MSB in bottom bit of register */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>             <span class="keywordflow">if</span> (!_reflect_remainder) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>                 p_crc = reflect_crc(p_crc);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>             }</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>         }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span> </div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>         p_crc ^= _final_xor;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>         p_crc &amp;= get_crc_mask();</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>         *crc = p_crc;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span> </div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>     }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> </div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="keyword">private</span>:<span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment">    /** Guaranteed constexpr reflection (all toolchains)</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> <span class="comment">     *</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment">     * @note   This should never be run-time evaluated - very inefficient</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment">     * @param  Register value to be reflected (full 32-bit value)</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment">     * @return Reflected value (full 32-bit value)</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment">     */</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>     <span class="keyword">static</span> constexpr uint32_t reflect_constant(uint32_t data)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>     {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>         <span class="comment">/* Doing this hard way to keep it C++11 constexpr and hence ARM C 5 compatible */</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>         <span class="keywordflow">return</span> ((data &amp; 0x00000001) &lt;&lt; 31) |</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>                ((data &amp; 0x00000002) &lt;&lt; 29) |</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>                ((data &amp; 0x00000004) &lt;&lt; 27) |</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>                ((data &amp; 0x00000008) &lt;&lt; 25) |</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>                ((data &amp; 0x00000010) &lt;&lt; 23) |</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>                ((data &amp; 0x00000020) &lt;&lt; 21) |</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>                ((data &amp; 0x00000040) &lt;&lt; 19) |</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>                ((data &amp; 0x00000080) &lt;&lt; 17) |</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>                ((data &amp; 0x00000100) &lt;&lt; 15) |</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>                ((data &amp; 0x00000200) &lt;&lt; 13) |</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>                ((data &amp; 0x00000400) &lt;&lt; 11) |</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>                ((data &amp; 0x00000800) &lt;&lt;  9) |</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>                ((data &amp; 0x00001000) &lt;&lt;  7) |</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>                ((data &amp; 0x00002000) &lt;&lt;  5) |</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>                ((data &amp; 0x00004000) &lt;&lt;  3) |</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>                ((data &amp; 0x00008000) &lt;&lt;  1) |</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>                ((data &amp; 0x00010000) &gt;&gt;  1) |</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>                ((data &amp; 0x00020000) &gt;&gt;  3) |</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>                ((data &amp; 0x00040000) &gt;&gt;  5) |</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>                ((data &amp; 0x00080000) &gt;&gt;  7) |</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>                ((data &amp; 0x00100000) &gt;&gt;  9) |</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>                ((data &amp; 0x00200000) &gt;&gt; 11) |</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>                ((data &amp; 0x00400000) &gt;&gt; 13) |</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>                ((data &amp; 0x00800000) &gt;&gt; 15) |</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>                ((data &amp; 0x01000000) &gt;&gt; 17) |</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>                ((data &amp; 0x02000000) &gt;&gt; 19) |</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>                ((data &amp; 0x04000000) &gt;&gt; 21) |</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>                ((data &amp; 0x08000000) &gt;&gt; 23) |</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>                ((data &amp; 0x10000000) &gt;&gt; 25) |</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>                ((data &amp; 0x20000000) &gt;&gt; 27) |</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>                ((data &amp; 0x40000000) &gt;&gt; 29) |</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>                ((data &amp; 0x80000000) &gt;&gt; 31);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>     }</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment">    /** General reflection</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment">     *</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment">     * @note This is used when we may need to perform run-time computation, so</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment">     * we need the possibility to produce the optimal run-time RBIT instruction. But</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span> <span class="comment">     * if the compiler doesn't treat RBIT as a built-in, it's useful to have a C fallback</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment">     * for the constant case, avoiding runtime RBIT(0) computations. This is an</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment">     * optimization only available for some toolchains; others will always use runtime</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="comment">     * RBIT. If we require a constant expression, use reflect_constant instead.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span> <span class="comment">     *</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment">     * @param  Register value to be reflected (full 32-bit value)</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment">     * @return Reflected value (full 32-bit value)</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span> <span class="comment">     */</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="preprocessor">#ifdef MSTD_HAS_IS_CONSTANT_EVALUATED</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>     <span class="keyword">static</span> constexpr uint32_t reflect(uint32_t data)</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>     {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>         <span class="keywordflow">return</span> mstd::is_constant_evaluated() ? reflect_constant(data) : __RBIT(data);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>     }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span> <span class="preprocessor">#else</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>     <span class="keyword">static</span> uint32_t reflect(uint32_t data)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>     {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>         <span class="keywordflow">return</span> __RBIT(data);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>     }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span> <span class="comment"></span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> <span class="comment">    /** Data bytes may need to be reflected.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span> <span class="comment">     *</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span> <span class="comment">     * @param  data value to be reflected (bottom 8 bits)</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> <span class="comment">     * @return Reflected value (bottom 8 bits)</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span> <span class="comment">     */</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>     <span class="keyword">static</span> MSTD_CONSTEXPR_IF_HAS_IS_CONSTANT_EVALUATED</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>     uint_fast32_t reflect_byte(uint_fast32_t data)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>     {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>         <span class="keywordflow">return</span> reflect(data) &gt;&gt; 24;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>     }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span> <span class="comment"></span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span> <span class="comment">    /** Get the current CRC polynomial, reflected at bottom of register.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span> <span class="comment">     *</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span> <span class="comment">     * @return  Reflected polynomial value (so x^width term would be at bit -1)</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span> <span class="comment">     */</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>     <span class="keyword">static</span> constexpr uint32_t get_reflected_polynomial()</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>     {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>         <span class="keywordflow">return</span> shift_right(reflect_constant(polynomial));</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>     }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span> <span class="comment"></span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span> <span class="comment">    /** Get the current CRC polynomial, at top of register.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span> <span class="comment">     *</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span> <span class="comment">     * @return  Shifted polynomial value (so x^width term would be at bit 32)</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span> <span class="comment">     */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>     <span class="keyword">static</span> constexpr uint32_t get_top_polynomial()</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>     {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>         <span class="keywordflow">return</span> shift_left(polynomial);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>     }</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span> </div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>     <span class="keyword">const</span> uint32_t _initial_value;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>     <span class="keyword">const</span> uint32_t _final_xor;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>     <span class="keyword">const</span> <span class="keywordtype">bool</span> _reflect_data;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>     <span class="keyword">const</span> <span class="keywordtype">bool</span> _reflect_remainder;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span> </div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>     <span class="comment">// *INDENT-OFF*</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>     <span class="keyword">using</span> crc_table_t = std::conditional_t&lt;width &lt;= 8,  uint8_t,</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>                         std::conditional_t&lt;width &lt;= 16, uint16_t,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>                                                         uint32_t</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>                                           &gt;&gt;;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>     <span class="comment">// *INDENT-ON*</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span> </div><div class="line"><a name="l00557"></a><span class="lineno">  557</span> <span class="preprocessor">#if MBED_CRC_TABLE_SIZE &gt; 0</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>     <span class="comment">/* Tables only actually defined for mode == TABLE, and certain polynomials - see below */</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>     <span class="keyword">static</span> <span class="keyword">const</span> crc_table_t _crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span> </div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>     <span class="keyword">static</span> constexpr uint32_t adjust_initial_value(uint32_t initial_xor, <span class="keywordtype">bool</span> reflect_data)</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>     {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>         <span class="keywordflow">if</span> (mode == CrcMode::BITWISE) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>             <span class="comment">/* For bitwise calculation, CRC register is reflected if data is, to match input.</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span> <span class="comment">             * (MSB at bottom of register). If not reflected, it is at the top of the register</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span> <span class="comment">             * (MSB at top of register).</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span> <span class="comment">             */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>             <span class="keywordflow">return</span> reflect_data ? reflect_crc(initial_xor) : shift_left(initial_xor);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == CrcMode::TABLE) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>             <span class="comment">/* For table calculation, CRC value is reflected, to match tables.</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span> <span class="comment">             * (MSB at bottom of register). */</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>             <span class="keywordflow">return</span> reflect_crc(initial_xor);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>         } <span class="keywordflow">else</span> { <span class="comment">// CrcMode::HARDWARE</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>             <span class="keywordflow">return</span> initial_xor;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>         }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>     }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span> <span class="comment"></span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span> <span class="comment">    /** Acquire exclusive access to CRC hardware/software.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span> <span class="comment">     */</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>     <span class="keyword">static</span> <span class="keywordtype">void</span> lock()</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>     {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>         <span class="keywordflow">if</span> (mode == CrcMode::HARDWARE) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>             mbed_crc_mutex-&gt;<a class="code" href="class_platform_mutex.html#aa81aed607133209dade63a226818224d">lock</a>();</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>         }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>     }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span> <span class="comment"></span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span> <span class="comment">    /** Release exclusive access to CRC hardware/software.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span> <span class="comment">     */</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>     <span class="keyword">static</span> <span class="keywordtype">void</span> unlock()</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>     {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span> <span class="preprocessor">#if DEVICE_CRC</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>         <span class="keywordflow">if</span> (mode == CrcMode::HARDWARE) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>             mbed_crc_mutex-&gt;<a class="code" href="class_platform_mutex.html#a9278be8203e1c42e2619179882ae4403">unlock</a>();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>         }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>     }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span> <span class="comment"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span> <span class="comment">    /** Get the CRC data mask.</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span> <span class="comment">     *</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span> <span class="comment">     * @return  CRC data mask is generated based on current CRC width</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span> <span class="comment">     */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>     <span class="keyword">static</span> constexpr uint32_t get_crc_mask()</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>     {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>         <span class="keywordflow">return</span> (uint32_t)((uint32_t)2U &lt;&lt; (width - 1)) - 1U;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>     }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span> <span class="comment"></span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span> <span class="comment">    /** CRC values may need to be reflected.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span> <span class="comment">     *</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span> <span class="comment">     * @param  CRC value to be reflected (width bits at bottom of 32-bit word)</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span> <span class="comment">     * @return Reflected value (still at bottom of 32-bit word)</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span> <span class="comment">     */</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>     <span class="keyword">static</span> MSTD_CONSTEXPR_IF_HAS_IS_CONSTANT_EVALUATED</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>     uint32_t reflect_crc(uint32_t data)</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>     {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>         <span class="keywordflow">return</span> reflect(data) &gt;&gt; (32 - width);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>     }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span> <span class="comment"></span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span> <span class="comment">    /** Register values may need to be shifted left.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span> <span class="comment">     *</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span> <span class="comment">     * @param  Register value to be shifted up (in bottom width bits)</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span> <span class="comment">     * @return Shifted value (in top width bits)</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span> <span class="comment">     */</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>     <span class="keyword">static</span> constexpr uint32_t shift_left(uint32_t data)</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>     {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>         <span class="keywordflow">return</span> data &lt;&lt; (32 - width);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>     }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span> <span class="comment"></span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span> <span class="comment">    /** Register values may need to be shifted right.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span> <span class="comment">     *</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span> <span class="comment">     * @param  Register value to be shifted right (in top width bits)</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span> <span class="comment">     * @return  Shifted value (in bottom width bits)</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span> <span class="comment">     */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>     <span class="keyword">static</span> constexpr uint32_t shift_right(uint32_t data)</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>     {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>         <span class="keywordflow">return</span> data &gt;&gt; (32 - width);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>     }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span> </div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>     <span class="comment">/* Check to see if we can do assembler optimizations */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span> <span class="preprocessor">#if (defined __GNUC__ || defined __clang__) &amp;&amp; \</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span> <span class="preprocessor">    (defined __arm__ || defined __ARM_ARCH)</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span> <span class="preprocessor">#if (__ARM_ARCH_7M__      == 1U) || \</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span> <span class="preprocessor">    (__ARM_ARCH_7EM__     == 1U) || \</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span> <span class="preprocessor">    (__ARM_ARCH_8M_MAIN__ == 1U) || \</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span> <span class="preprocessor">    (__ARM_ARCH_8_1M_MAIN__ == 1U) || \</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span> <span class="preprocessor">    (__ARM_ARCH_7A__      == 1U)</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>     <span class="comment">/* ARM that has Thumb-2 - same unified assembly is good for either ARM or Thumb state (LSRS; IT CS; EORCS reg/imm) */</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span> <span class="preprocessor">#define MBED_CRC_ARM_THUMB2     1</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span> <span class="preprocessor">#define MBED_CRC_THUMB1         0</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span> <span class="preprocessor">#elif (__ARM_ARCH_6M__      == 1U) || \</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span> <span class="preprocessor">      (__ARM_ARCH_8M_BASE__ == 1U)</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>     <span class="comment">/* Thumb-1-only ARM-M device - use Thumb-1 compatible assembly with branch (LSRS; BCC; EORS reg) */</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span> <span class="preprocessor">#define MBED_CRC_ARM_THUMB2     0</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span> <span class="preprocessor">#define MBED_CRC_THUMB1         1</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span> <span class="preprocessor">#else // __ARM_ARCH_xxx</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span> <span class="preprocessor">#error "Unknown ARM architecture for CRC optimization"</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span> <span class="preprocessor">#endif // __ARM_ARCH_xxx</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span> <span class="preprocessor">#else // __arm__ || defined __ICC_ARM__ || defined __ARM_ARCH</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>     <span class="comment">/* Seem to be compiling for non-ARM, or an unsupported toolchain, so stick with C implementations */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span> <span class="preprocessor">#define MBED_CRC_ARM_THUMB2     0</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span> <span class="preprocessor">#define MBED_CRC_THUMB1         0</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span> </div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>     <span class="comment">// *INDENT-OFF*</span><span class="comment"></span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span> <span class="comment">    /** Process 1 bit of non-reflected CRC</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span> <span class="comment">     *</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span> <span class="comment">     * Shift the p_crc register left 1 bit - if a one is shifted</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span> <span class="comment">     * out, exclusive-or with the polynomial mask.</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span> <span class="comment">     *</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span> <span class="comment">     * Assembler optimizations can be applied here, to make</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span> <span class="comment">     * use of the CPU's carry output from shifts.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span> <span class="comment">     *</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span> <span class="comment">     * @param  p_crc input register value</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span> <span class="comment">     * @return updated register value</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span> <span class="comment">     */</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>     <span class="keyword">static</span> uint_fast32_t do_1_bit_normal(uint_fast32_t p_crc)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>     {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span> <span class="preprocessor">#if MBED_CRC_ARM_THUMB2</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>         __asm(<span class="stringliteral">".syntax unified\n\t"</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>               <span class="stringliteral">"LSLS"</span>  <span class="stringliteral">"\t%[p_crc], %[p_crc], #1\n\t"</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>               <span class="stringliteral">"IT"</span>    <span class="stringliteral">"\tCS\n\t"</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>               <span class="stringliteral">"EORCS"</span> <span class="stringliteral">"\t%[p_crc], %[poly]"</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>               : [p_crc] <span class="stringliteral">"+&amp;r"</span> (p_crc)</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>               : [poly] <span class="stringliteral">"rI"</span> (get_top_polynomial())</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>               : <span class="stringliteral">"cc"</span>);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span> <span class="preprocessor">#elif MBED_CRC_THUMB1</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>         __asm(<span class="stringliteral">".syntax unified\n\t"</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>               <span class="stringliteral">"LSLS"</span>  <span class="stringliteral">"\t%[p_crc], %[p_crc], #1\n\t"</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>               <span class="stringliteral">"BCC"</span>   <span class="stringliteral">"\t%=f\n\t"</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>               <span class="stringliteral">"EORS"</span>  <span class="stringliteral">"\t%[p_crc], %[poly]\n"</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>               <span class="stringliteral">"%=:"</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>               : [p_crc] <span class="stringliteral">"+&amp;l"</span> (p_crc)</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>               : [poly] <span class="stringliteral">"l"</span> (get_top_polynomial())</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>               : <span class="stringliteral">"cc"</span>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span> <span class="preprocessor">#else</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>         <span class="keywordflow">if</span> (p_crc &amp; 0x80000000) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>             p_crc = (p_crc &lt;&lt; 1) ^ get_top_polynomial();</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>             p_crc = (p_crc &lt;&lt; 1);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>         }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>         <span class="keywordflow">return</span> p_crc;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>     }</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span> <span class="comment"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span> <span class="comment">    /** Process 1 bit of reflected CRC</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span> <span class="comment">     *</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span> <span class="comment">     * Shift the p_crc register right 1 bit - if a one is shifted</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span> <span class="comment">     * out, exclusive-or with the polynomial mask.</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span> <span class="comment">     *</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span> <span class="comment">     * Assembler optimizations can be applied here, to make</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span> <span class="comment">     * use of the CPU's carry output from shifts.</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span> <span class="comment">     *</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span> <span class="comment">     * @param  p_crc input register value</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span> <span class="comment">     * @return updated register value</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span> <span class="comment">     */</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>     <span class="keyword">static</span> uint_fast32_t do_1_bit_reflected(uint_fast32_t p_crc)</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>     {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span> <span class="preprocessor">#if MBED_CRC_ARM_THUMB2</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>         __asm(<span class="stringliteral">".syntax unified\n\t"</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>               <span class="stringliteral">"LSRS"</span>  <span class="stringliteral">"\t%[p_crc], %[p_crc], #1\n\t"</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>               <span class="stringliteral">"IT"</span>    <span class="stringliteral">"\tCS\n\t"</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>               <span class="stringliteral">"EORCS"</span> <span class="stringliteral">"\t%[p_crc], %[poly]"</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>               : [p_crc] <span class="stringliteral">"+&amp;r"</span> (p_crc)</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>               : [poly] <span class="stringliteral">"rI"</span> (get_reflected_polynomial())</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>               : <span class="stringliteral">"cc"</span>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span> <span class="preprocessor">#elif MBED_CRC_THUMB1</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>         __asm(<span class="stringliteral">".syntax unified\n\t"</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>               <span class="stringliteral">"LSRS"</span>  <span class="stringliteral">"\t%[p_crc], %[p_crc], #1\n\t"</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>               <span class="stringliteral">"BCC"</span>   <span class="stringliteral">"\t%=f\n\t"</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>               <span class="stringliteral">"EORS"</span>  <span class="stringliteral">"\t%[p_crc], %[poly]\n"</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>               <span class="stringliteral">"%=:"</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>               : [p_crc] <span class="stringliteral">"+&amp;l"</span> (p_crc)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>               : [poly] <span class="stringliteral">"l"</span> (get_reflected_polynomial())</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>               : <span class="stringliteral">"cc"</span>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span> <span class="preprocessor">#else</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>         <span class="keywordflow">if</span> (p_crc &amp; 1) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>             p_crc = (p_crc &gt;&gt; 1) ^ get_reflected_polynomial();</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>             p_crc = (p_crc &gt;&gt; 1);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>         }</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>         <span class="keywordflow">return</span> p_crc;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>     }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>     <span class="comment">// *INDENT-ON*</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span> <span class="comment"></span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span> <span class="comment">    /** Bitwise CRC computation.</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span> <span class="comment">     *</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span> <span class="comment">     * @param  buffer  data buffer</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span> <span class="comment">     * @param  size  size of the data</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span> <span class="comment">     * @param  crc  CRC value is filled in, but the value is not the final</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span> <span class="comment">     * @return  0  on success or a negative error code on failure</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span> <span class="comment">     */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>     <span class="keyword">template</span>&lt;CrcMode mode_ = mode&gt;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>     std::enable_if_t&lt;mode_ == CrcMode::BITWISE, int32_t&gt;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>     do_compute_partial(<span class="keyword">const</span> uint8_t *data, crc_data_size_t size, uint32_t *crc)<span class="keyword"> const</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span> <span class="keyword">    </span>{</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>         uint_fast32_t p_crc = *crc;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span> </div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>         <span class="keywordflow">if</span> (_reflect_data) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>             <span class="comment">/* Everything is reflected to match data - MSB of polynomial at bottom of 32-bit register */</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>             <span class="keywordflow">for</span> (crc_data_size_t byte = 0; byte &lt; size; byte++) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>                 p_crc ^= data[byte];</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span> </div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>                 <span class="comment">// Perform modulo-2 division, a bit at a time</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bit = 8; bit &gt; 0; --bit) {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>                     p_crc = do_1_bit_reflected(p_crc);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>                 }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>             }</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>             <span class="comment">/* Polynomial is shifted to put MSB of polynomial at top of 32-bit register */</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>             <span class="keywordflow">for</span> (crc_data_size_t byte = 0; byte &lt; size; byte++) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>                 p_crc ^= (uint_fast32_t) data[byte] &lt;&lt; 24;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span> </div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>                 <span class="comment">// Perform modulo-2 division, a bit at a time</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bit = 8; bit &gt; 0; --bit) {</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>                     p_crc = do_1_bit_normal(p_crc);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>                 }</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>             }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>         }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span> </div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>         *crc = p_crc;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span> </div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>     }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span> </div><div class="line"><a name="l00788"></a><span class="lineno">  788</span> <span class="preprocessor">#if MBED_CRC_TABLE_SIZE &gt; 0</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span> <span class="comment">    /** CRC computation using ROM tables.</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span> <span class="comment">    *</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span> <span class="comment">    * @param  buffer  data buffer</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span> <span class="comment">    * @param  size  size of the data</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span> <span class="comment">    * @param  crc  CRC value is filled in, but the value is not the final</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span> <span class="comment">    * @return  0  on success or a negative error code on failure</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span> <span class="comment">    */</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>     <span class="keyword">template</span>&lt;CrcMode mode_ = mode&gt;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>     std::enable_if_t&lt;mode_ == CrcMode::TABLE, int32_t&gt;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>     do_compute_partial(<span class="keyword">const</span> uint8_t *data, crc_data_size_t size, uint32_t *crc)<span class="keyword"> const</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span> <span class="keyword">    </span>{</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>         uint_fast32_t p_crc = *crc;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>         <span class="comment">// GCC has been observed to not hoist the load of _reflect_data out of the loop</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>         <span class="comment">// Note the inversion because table and CRC are reflected - data must be</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>         <span class="keywordtype">bool</span> reflect = !_reflect_data;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span> </div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>         <span class="keywordflow">for</span> (crc_data_size_t byte = 0; byte &lt; size; byte++) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>             uint_fast32_t data_byte = data[byte];</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>             <span class="keywordflow">if</span> (reflect) {</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>                 data_byte = reflect_byte(data_byte);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>             }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span> <span class="preprocessor">#if MBED_CRC_TABLE_SIZE == 16</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>             p_crc = _crc_table[(data_byte ^ p_crc) &amp; 0xF] ^ (p_crc &gt;&gt; 4);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>             data_byte &gt;&gt;= 4;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>             p_crc = _crc_table[(data_byte ^ p_crc) &amp; 0xF] ^ (p_crc &gt;&gt; 4);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span> <span class="preprocessor">#else</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>             p_crc = _crc_table[(data_byte ^ p_crc) &amp; 0xFF] ^ (p_crc &gt;&gt; 8);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>         }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>         *crc = p_crc;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>     }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span> </div><div class="line"><a name="l00823"></a><span class="lineno">  823</span> <span class="preprocessor">#ifdef DEVICE_CRC</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span> <span class="comment">    /** Hardware CRC computation.</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span> <span class="comment">     *</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span> <span class="comment">     * @param  buffer  data buffer</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span> <span class="comment">     * @param  size  size of the data</span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span> <span class="comment">     * @return  0  on success or a negative error code on failure</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span> <span class="comment">     */</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>     <span class="keyword">template</span>&lt;CrcMode mode_ = mode&gt;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>     std::enable_if_t&lt;mode_ == CrcMode::HARDWARE, int32_t&gt;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>     do_compute_partial(<span class="keyword">const</span> uint8_t *data, crc_data_size_t size, uint32_t *)<span class="keyword"> const</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span> <span class="keyword">    </span>{</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>         <a class="code" href="group__hal__crc.html#ga0d99b692e934d07ed51ca4c141798db3">hal_crc_compute_partial</a>(data, size);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>     }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span> </div><div class="line"><a name="l00839"></a><span class="lineno">  839</span> };</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span> </div><div class="line"><a name="l00841"></a><span class="lineno">  841</span> <span class="preprocessor">#if MBED_CRC_TABLE_SIZE &gt; 0</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span> <span class="comment">/* Declarations of the tables we provide. (Not strictly needed, but compilers</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span> <span class="comment"> * can warn if they see us using the template without a generic definition, so</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span> <span class="comment"> * let it know we have provided these specialisations.)</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span> <span class="comment"> */</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span> <span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span> <span class="keyword">const</span> uint8_t MbedCRC&lt;POLY_7BIT_SD, 7, CrcMode::TABLE&gt;::_crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span> </div><div class="line"><a name="l00849"></a><span class="lineno">  849</span> <span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span> <span class="keyword">const</span> uint8_t MbedCRC&lt;POLY_8BIT_CCITT, 8, CrcMode::TABLE&gt;::_crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span> </div><div class="line"><a name="l00852"></a><span class="lineno">  852</span> <span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span> <span class="keyword">const</span> uint16_t MbedCRC&lt;POLY_16BIT_CCITT, 16, CrcMode::TABLE&gt;::_crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span> </div><div class="line"><a name="l00855"></a><span class="lineno">  855</span> <span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span> <span class="keyword">const</span> uint16_t MbedCRC&lt;POLY_16BIT_IBM, 16, CrcMode::TABLE&gt;::_crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span> </div><div class="line"><a name="l00858"></a><span class="lineno">  858</span> <span class="keyword">template</span>&lt;&gt;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span> <span class="keyword">const</span> uint32_t MbedCRC&lt;POLY_32BIT_ANSI, 32, CrcMode::TABLE&gt;::_crc_table[MBED_CRC_TABLE_SIZE];</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span> </div><div class="line"><a name="l00861"></a><span class="lineno">  861</span> <span class="preprocessor">#endif // MBED_CRC_TABLE_SIZE &gt; 0</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span> </div><div class="line"><a name="l00863"></a><span class="lineno">  863</span> } <span class="comment">// namespace impl</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span> </div><div class="line"><a name="l00865"></a><span class="lineno">  865</span> <span class="preprocessor">#endif // !defined(DOXYGEN_ONLY)</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span> <span class="comment"></span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span> <span class="comment">/** @}*/</span><span class="comment"></span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span> <span class="comment">/** @}*/</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span> </div><div class="line"><a name="l00870"></a><span class="lineno">  870</span> } <span class="comment">// namespace mbed</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span> </div><div class="line"><a name="l00872"></a><span class="lineno">  872</span> <span class="preprocessor">#endif // __cplusplus</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span> </div><div class="line"><a name="l00874"></a><span class="lineno">  874</span> <span class="comment">/* Internal helper for mbed_error.c crash recovery */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span> <span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span> <span class="keyword">extern</span> <span class="stringliteral">"C"</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span> uint32_t mbed_tiny_compute_crc32(<span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> datalen);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span> </div><div class="line"><a name="l00880"></a><span class="lineno">  880</span> <span class="preprocessor">#endif</span></div><div class="ttc" id="struct_singleton_ptr_html"><div class="ttname"><a href="struct_singleton_ptr.html">SingletonPtr&lt; PlatformMutex &gt;</a></div></div>
<div class="ttc" id="group__hal_html_ggaac29aaabcf8b2e9348a5a2a730fdf46aa892af83ad6b24294e7d82e1a5ac87509"><div class="ttname"><a href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa892af83ad6b24294e7d82e1a5ac87509">POLY_16BIT_IBM</a></div><div class="ttdoc">x16+x15+x2+1 </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00034">crc_api.h:34</a></div></div>
<div class="ttc" id="group__hal_html_ggaac29aaabcf8b2e9348a5a2a730fdf46aa7fb8f90dfd5ee3cd5b2767bac79ae99d"><div class="ttname"><a href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa7fb8f90dfd5ee3cd5b2767bac79ae99d">POLY_7BIT_SD</a></div><div class="ttdoc">x7+x3+1 </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00031">crc_api.h:31</a></div></div>
<div class="ttc" id="structcrc__mbed__config_html_af33e0b4f3e3014304a746920a96f75d0"><div class="ttname"><a href="structcrc__mbed__config.html#af33e0b4f3e3014304a746920a96f75d0">crc_mbed_config::final_xor</a></div><div class="ttdeci">uint32_t final_xor</div><div class="ttdoc">Final xor value for the computation. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00046">crc_api.h:46</a></div></div>
<div class="ttc" id="structcrc__mbed__config_html"><div class="ttname"><a href="structcrc__mbed__config.html">crc_mbed_config</a></div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00038">crc_api.h:38</a></div></div>
<div class="ttc" id="group__hal__crc_html_ga31e4d5a341c16c711c13da0ffc2ce6fd"><div class="ttname"><a href="group__hal__crc.html#ga31e4d5a341c16c711c13da0ffc2ce6fd">hal_crc_compute_partial_start</a></div><div class="ttdeci">void hal_crc_compute_partial_start(const crc_mbed_config_t *config)</div><div class="ttdoc">Initialize the hardware CRC module with the given polynomial. </div></div>
<div class="ttc" id="structcrc__mbed__config_html_a325272ddd9a962f05deb905101d25cbd"><div class="ttname"><a href="structcrc__mbed__config.html#a325272ddd9a962f05deb905101d25cbd">crc_mbed_config::width</a></div><div class="ttdeci">uint32_t width</div><div class="ttdoc">CRC Bit Width. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00042">crc_api.h:42</a></div></div>
<div class="ttc" id="class_platform_mutex_html_a9278be8203e1c42e2619179882ae4403"><div class="ttname"><a href="class_platform_mutex.html#a9278be8203e1c42e2619179882ae4403">PlatformMutex::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdoc">Unlock a PlatformMutex that the same thread has previously locked. </div><div class="ttdef"><b>Definition:</b> <a href="_platform_mutex_8h_source.html#l00081">PlatformMutex.h:81</a></div></div>
<div class="ttc" id="group__hal_html_ggaac29aaabcf8b2e9348a5a2a730fdf46aae788c7d08ed51c9e1fba9bc3295a13c6"><div class="ttname"><a href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aae788c7d08ed51c9e1fba9bc3295a13c6">POLY_16BIT_CCITT</a></div><div class="ttdoc">x16+x12+x5+1 </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00033">crc_api.h:33</a></div></div>
<div class="ttc" id="class_platform_mutex_html_aa81aed607133209dade63a226818224d"><div class="ttname"><a href="class_platform_mutex.html#aa81aed607133209dade63a226818224d">PlatformMutex::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdoc">Wait until a PlatformMutex becomes available. </div><div class="ttdef"><b>Definition:</b> <a href="_platform_mutex_8h_source.html#l00071">PlatformMutex.h:71</a></div></div>
<div class="ttc" id="group__hal_html_ggaac29aaabcf8b2e9348a5a2a730fdf46aa11f0187e6192505aec2bf4269c26d5ea"><div class="ttname"><a href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aa11f0187e6192505aec2bf4269c26d5ea">POLY_8BIT_CCITT</a></div><div class="ttdoc">x8+x2+x+1 </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00032">crc_api.h:32</a></div></div>
<div class="ttc" id="group__hal__crc_html_ga0d99b692e934d07ed51ca4c141798db3"><div class="ttname"><a href="group__hal__crc.html#ga0d99b692e934d07ed51ca4c141798db3">hal_crc_compute_partial</a></div><div class="ttdeci">void hal_crc_compute_partial(const uint8_t *data, const size_t size)</div><div class="ttdoc">Writes data to the current CRC module. </div></div>
<div class="ttc" id="structcrc__mbed__config_html_ad1438be6081f837b54df9fbef0ac16e7"><div class="ttname"><a href="structcrc__mbed__config.html#ad1438be6081f837b54df9fbef0ac16e7">crc_mbed_config::reflect_out</a></div><div class="ttdeci">bool reflect_out</div><div class="ttdoc">Reflect bits in final result before returning. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00050">crc_api.h:50</a></div></div>
<div class="ttc" id="structcrc__mbed__config_html_abbaed4d7eae04f71f20739687944763c"><div class="ttname"><a href="structcrc__mbed__config.html#abbaed4d7eae04f71f20739687944763c">crc_mbed_config::polynomial</a></div><div class="ttdeci">uint32_t polynomial</div><div class="ttdoc">CRC Polynomial. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00040">crc_api.h:40</a></div></div>
<div class="ttc" id="group__hal_html_ggaac29aaabcf8b2e9348a5a2a730fdf46aaf75299fa9ab0db23269d0f43bb7a0f45"><div class="ttname"><a href="group__hal.html#ggaac29aaabcf8b2e9348a5a2a730fdf46aaf75299fa9ab0db23269d0f43bb7a0f45">POLY_32BIT_ANSI</a></div><div class="ttdoc">x32+x26+x23+x22+x16+x12+x11+x10+x8+x7+x5+x4+x2+x+1 </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00035">crc_api.h:35</a></div></div>
<div class="ttc" id="structcrc__mbed__config_html_a73ff346d65ef1204e900c5a129ac93a7"><div class="ttname"><a href="structcrc__mbed__config.html#a73ff346d65ef1204e900c5a129ac93a7">crc_mbed_config::reflect_in</a></div><div class="ttdeci">bool reflect_in</div><div class="ttdoc">Reflect bits on input. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00048">crc_api.h:48</a></div></div>
<div class="ttc" id="namespacembed_html"><div class="ttname"><a href="namespacembed.html">mbed</a></div><div class="ttdef"><b>Definition:</b> <a href="_a_t_handler_8h_source.html#l00046">ATHandler.h:46</a></div></div>
<div class="ttc" id="structcrc__mbed__config_html_a2fdeecaf4968c93f6fba4dd995bf2ba7"><div class="ttname"><a href="structcrc__mbed__config.html#a2fdeecaf4968c93f6fba4dd995bf2ba7">crc_mbed_config::initial_xor</a></div><div class="ttdeci">uint32_t initial_xor</div><div class="ttdoc">Initial seed value for the computation. </div><div class="ttdef"><b>Definition:</b> <a href="crc__api_8h_source.html#l00044">crc_api.h:44</a></div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_mbed_c_r_c_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:25:10 GMT -->
</html>
