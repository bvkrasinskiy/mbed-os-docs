<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/main__page_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:25:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | main_page.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="main__page_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/main__page_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/main__page_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_456207283565120b441ff9733579e7b8.html">connectivity</a></li><li class="navelem"><a class="el" href="dir_656714f9000830b7293277f30e3fdca8.html">lwipstack</a></li><li class="navelem"><a class="el" href="dir_51bed4128c7c35e28f2b56d9a4d3889d.html">lwip</a></li><li class="navelem"><a class="el" href="dir_0eb9856f387416e02a1e4eb4e30b5b45.html">doc</a></li><li class="navelem"><a class="el" href="dir_3277b30886809c914e0b1243cd52c458.html">doxygen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">main_page.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/**</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> * @defgroup lwip lwIP</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> * @defgroup infrastructure Infrastructure</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> * </span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> * @defgroup api APIs</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> * lwIP provides three Application Program's Interfaces (APIs) for programs</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> * to use for communication with the TCP/IP code:</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> * - low-level "core" / "callback" or @ref callbackstyle_api.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> * - higher-level @ref sequential_api.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> * - BSD-style @ref socket.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> * </span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * The raw TCP/IP interface allows the application program to integrate</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> * better with the TCP/IP code. Program execution is event based by</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> * having callback functions being called from within the TCP/IP</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> * code. The TCP/IP code and the application program both run in the same</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="comment"> * thread. The sequential API has a much higher overhead and is not very</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="comment"> * well suited for small systems since it forces a multithreaded paradigm</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="comment"> * on the application.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> <span class="comment"> * </span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="comment"> * The raw TCP/IP interface is not only faster in terms of code execution</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="comment"> * time but is also less memory intensive. The drawback is that program</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="comment"> * development is somewhat harder and application programs written for</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="comment"> * the raw TCP/IP interface are more difficult to understand. Still, this</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="comment"> * is the preferred way of writing applications that should be small in</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="comment"> * code size and memory usage.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="comment"> * </span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="comment"> * All APIs can be used simultaneously by different application</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="comment"> * programs. In fact, the sequential API is implemented as an application</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="comment"> * program using the raw TCP/IP interface.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="comment"> * </span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="comment"> * Do not confuse the lwIP raw API with raw Ethernet or IP sockets.</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> <span class="comment"> * The former is a way of interfacing the lwIP network stack (including</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="comment"> * TCP and UDP), the latter refers to processing raw Ethernet or IP data</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment"> * instead of TCP connections or UDP packets.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment"> * </span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment"> * Raw API applications may never block since all packet processing</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment"> * (input and output) as well as timer processing (TCP mainly) is done</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment"> * in a single execution context.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="comment"> *</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="comment"> * @defgroup callbackstyle_api "raw" APIs</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="comment"> * @ingroup api</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment"> * Non thread-safe APIs, callback style for maximum performance and minimum</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment"> * memory footprint.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> * Program execution is driven by callbacks functions, which are then</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="comment"> * invoked by the lwIP core when activity related to that application</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> <span class="comment"> * occurs. A particular application may register to be notified via a</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="comment"> * callback function for events such as incoming data available, outgoing</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="comment"> * data sent, error notifications, poll timer expiration, connection</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment"> * closed, etc. An application can provide a callback function to perform</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="comment"> * processing for any or all of these events. Each callback is an ordinary</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="comment"> * C function that is called from within the TCP/IP code. Every callback</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="comment"> * function is passed the current TCP or UDP connection state as an</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="comment"> * argument. Also, in order to be able to keep program specific state,</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="comment"> * the callback functions are called with a program specified argument</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="comment"> * that is independent of the TCP/IP state.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> <span class="comment"> * The raw API (sometimes called native API) is an event-driven API designed</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="comment"> * to be used without an operating system that implements zero-copy send and</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="comment"> * receive. This API is also used by the core stack for interaction between</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> <span class="comment"> * the various protocols. It is the only API available when running lwIP</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="comment"> * without an operating system.</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="comment"> * </span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> <span class="comment"> * @defgroup sequential_api Sequential-style APIs</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> <span class="comment"> * @ingroup api</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="comment"> * Sequential-style APIs, blocking functions. More overhead, but can be called</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span> <span class="comment"> * from any thread except TCPIP thread.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="comment"> * The sequential API provides a way for ordinary, sequential, programs</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> <span class="comment"> * to use the lwIP stack. It is quite similar to the BSD socket API. The</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment"> * model of execution is based on the blocking open-read-write-close</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment"> * paradigm. Since the TCP/IP stack is event based by nature, the TCP/IP</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment"> * code and the application program must reside in different execution</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> <span class="comment"> * contexts (threads).</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment"> * </span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment"> * @defgroup socket Socket API</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="comment"> * @ingroup api</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment"> * BSD-style socket API.\n</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment"> * Thread-safe, to be called from non-TCPIP threads only.\n</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span> <span class="comment"> * Can be activated by defining @ref LWIP_SOCKET to 1.\n</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"> * Header is in posix/sys/socket.h\n</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="comment"> * The socket API is a compatibility API for existing applications,</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment"> * currently it is built on top of the sequential API. It is meant to</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment"> * provide all functions needed to run socket API applications running</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment"> * on other platforms (e.g. unix / windows etc.). However, due to limitations</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment"> * in the specification of this API, there might be incompatibilities</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment"> * that require small modifications of existing programs.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment"> * </span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"> * @defgroup netifs NETIFs</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"> * </span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment"> * @defgroup apps Applications</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment"> */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment">/**</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment"> * @mainpage Overview</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment"> * @verbinclude "README"</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment"> */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment"></span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment">/**</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment"> * @page upgrading Upgrading</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment"> * @verbinclude "UPGRADING"</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="comment"> */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> <span class="comment"></span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment">/**</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment"> * @page changelog Changelog</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment"> *</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment"> * 2.1.0</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment"> * -----</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"> * * Support TLS via new @ref altcp_api connection API (https, smtps, mqtt over TLS)</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment"> * * Switch to cmake as the main build system (Makefile file lists are still</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment"> *   maintained for now)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment"> * * Improve IPv6 support: support address scopes, support stateless DHCPv6, bugfixes</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="comment"> * * Add debug helper asserts to ensure threading/locking requirements are met</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment"> * * Add sys_mbox_trypost_fromisr() and tcpip_callbackmsg_trycallback_fromisr()</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="comment"> *   (for FreeRTOS, mainly)</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment"> * * socket API: support poll(), sendmsg() and recvmsg(); fix problems on close</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment"> * </span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment"> * Detailed Changelog</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment"> * ------------------</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment"> * @verbinclude "CHANGELOG"</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment"> */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment">/**</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> <span class="comment"> * @page contrib How to contribute to lwIP</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment"> * @verbinclude "contrib.txt"</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> <span class="comment"> */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> <span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment">/**</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment"> * @page pitfalls Common pitfalls</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment"> *</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment"> * Multiple Execution Contexts in lwIP code</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment"> * ========================================</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment"> *</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment"> * The most common source of lwIP problems is to have multiple execution contexts</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment"> * inside the lwIP code.</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment"> * </span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment"> * lwIP can be used in two basic modes: @ref lwip_nosys (no OS/RTOS </span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment"> * running on target system) or @ref lwip_os (there is an OS running</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment"> * on the target system).</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment"> * </span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment"> * See also: @ref multithreading (especially the part about @ref LWIP_ASSERT_CORE_LOCKED()!)</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment"> *</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment"> * Mainloop Mode</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment"> * -------------</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="comment"> * In mainloop mode, only @ref callbackstyle_api can be used.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment"> * The user has two possibilities to ensure there is only one </span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment"> * exection context at a time in lwIP:</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment"> *</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment"> * 1) Deliver RX ethernet packets directly in interrupt context to lwIP</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment"> *    by calling netif-&gt;input directly in interrupt. This implies all lwIP </span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span> <span class="comment"> *    callback functions are called in IRQ context, which may cause further</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span> <span class="comment"> *    problems in application code: IRQ is blocked for a long time, multiple</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span> <span class="comment"> *    execution contexts in application code etc. When the application wants</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> <span class="comment"> *    to call lwIP, it only needs to disable interrupts during the call.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> <span class="comment"> *    If timers are involved, even more locking code is needed to lock out</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment"> *    timer IRQ and ethernet IRQ from each other, assuming these may be nested.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment"> *</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment"> * 2) Run lwIP in a mainloop. There is example code here: @ref lwip_nosys.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="comment"> *    lwIP is _ONLY_ called from mainloop callstacks here. The ethernet IRQ</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span> <span class="comment"> *    has to put received telegrams into a queue which is polled in the</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span> <span class="comment"> *    mainloop. Ensure lwIP is _NEVER_ called from an interrupt, e.g.</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span> <span class="comment"> *    some SPI IRQ wants to forward data to udp_send() or tcp_write()!</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span> <span class="comment"> *</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span> <span class="comment"> * OS Mode</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> <span class="comment"> * -------</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> <span class="comment"> * In OS mode, @ref callbackstyle_api AND @ref sequential_api can be used.</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="comment"> * @ref sequential_api are designed to be called from threads other than</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment"> * the TCPIP thread, so there is nothing to consider here.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment"> * But @ref callbackstyle_api functions must _ONLY_ be called from</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment"> * TCPIP thread. It is a common error to call these from other threads</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment"> * or from IRQ contexts. ​Ethernet RX needs to deliver incoming packets</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment"> * in the correct way by sending a message to TCPIP thread, this is</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment"> * implemented in tcpip_input().​​</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment"> * Again, ensure lwIP is _NEVER_ called from an interrupt, e.g.</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment"> * some SPI IRQ wants to forward data to udp_send() or tcp_write()!</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment"> * </span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment"> * 1) tcpip_callback() can be used get called back from TCPIP thread,</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span> <span class="comment"> *    it is safe to call any @ref callbackstyle_api from there.</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment"> *</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span> <span class="comment"> * 2) Use @ref LWIP_TCPIP_CORE_LOCKING. All @ref callbackstyle_api</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment"> *    functions can be called when lwIP core lock is aquired, see</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span> <span class="comment"> *    @ref LOCK_TCPIP_CORE() and @ref UNLOCK_TCPIP_CORE().</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> <span class="comment"> *    These macros cannot be used in an interrupt context!</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment"> *    Note the OS must correctly handle priority inversion for this.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> <span class="comment"> *</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment"> * Cache / DMA issues</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment"> * ==================</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span> <span class="comment"> *</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span> <span class="comment"> * DMA-capable ethernet hardware and zero-copy RX</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> <span class="comment"> * ----------------------------------------------</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> <span class="comment"> * </span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span> <span class="comment"> * lwIP changes the content of RECEIVED pbufs in the TCP code path.</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> <span class="comment"> * This implies one or more cacheline(s) of the RX pbuf become dirty</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment"> * and need to be flushed before the memory is handed over to the</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment"> * DMA ethernet hardware for the next telegram to be received.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment"> * See http://lists.nongnu.org/archive/html/lwip-devel/2017-12/msg00070.html</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> <span class="comment"> * for a more detailed explanation.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> <span class="comment"> * Also keep in mind the user application may also write into pbufs,</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment"> * so it is generally a bug not to flush the data cache before handing</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span> <span class="comment"> * a buffer to DMA hardware.</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="comment"> *</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="comment"> * DMA-capable ethernet hardware and cacheline alignment</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> <span class="comment"> * -----------------------------------------------------</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> <span class="comment"> * Nice description about DMA capable hardware and buffer handling:</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment"> * http://www.pebblebay.com/a-guide-to-using-direct-memory-access-in-embedded-systems-part-two/</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment"> * Read especially sections "Cache coherency" and "Buffer alignment".</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment"> */</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment"></span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment">/**</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment"> * @page bugs Reporting bugs</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> <span class="comment"> * Please report bugs in the lwIP bug tracker at savannah.\n</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment"> * BEFORE submitting, please check if the bug has already been reported!\n</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment"> * https://savannah.nongnu.org/bugs/?group=lwip</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment"> */</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment"></span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">/**</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment"> * @page zerocopyrx Zero-copy RX</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment"> * The following code is an example for zero-copy RX ethernet driver:</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment"> * @include ZeroCopyRx.c</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment"> */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment"></span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment">/**</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment"> * @defgroup lwip_nosys Mainloop mode ("NO_SYS")</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="comment"> * @ingroup lwip</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> <span class="comment"> * Use this mode if you do not run an OS on your system. \#define NO_SYS to 1.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment"> * Feed incoming packets to netif-&gt;input(pbuf, netif) function from mainloop,</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment"> * *not* *from* *interrupt* *context*. You can allocate a @ref pbuf in interrupt</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment"> * context and put them into a queue which is processed from mainloop.\n</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment"> * Call sys_check_timeouts() periodically in the mainloop.\n</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment"> * Porting: implement all functions in @ref sys_time, @ref sys_prot and </span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment"> * @ref compiler_abstraction.\n</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment"> * You can only use @ref callbackstyle_api in this mode.\n</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment"> * Sample code:\n</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="comment"> * @include NO_SYS_SampleCode.c</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment"> */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment">/**</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment"> * @defgroup lwip_os OS mode (TCPIP thread)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment"> * @ingroup lwip</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment"> * Use this mode if you run an OS on your system. It is recommended to</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment"> * use an RTOS that correctly handles priority inversion and</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment"> * to use @ref LWIP_TCPIP_CORE_LOCKING.\n</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment"> * Porting: implement all functions in @ref sys_layer.\n</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment"> * You can use @ref callbackstyle_api together with @ref tcpip_callback,</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment"> * and all @ref sequential_api.</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment"> */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment"></span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">/**</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment"> * @page sys_init System initalization</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment">A truly complete and generic sequence for initializing the lwIP stack</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment">cannot be given because it depends on additional initializations for</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="comment">your runtime environment (e.g. timers).</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment">We can give you some idea on how to proceed when using the raw API.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment">We assume a configuration using a single Ethernet netif and the</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment">UDP and TCP transport layers, IPv4 and the DHCP client.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span> <span class="comment">Call these functions in the order of appearance:</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="comment">- lwip_init(): Initialize the lwIP stack and all of its subsystems.</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">- netif_add(struct netif *netif, ...):</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">  Adds your network interface to the netif_list. Allocate a struct</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment">  netif and pass a pointer to this structure as the first argument.</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment">  Give pointers to cleared ip_addr structures when using DHCP,</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span> <span class="comment">  or fill them with sane numbers otherwise. The state pointer may be NULL.</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> <span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> <span class="comment">  The init function pointer must point to a initialization function for</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment">  your Ethernet netif interface. The following code illustrates its use.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment">  </span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment">@code{.c}</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment">  err_t netif_if_init(struct netif *netif)</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">  {</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> <span class="comment">    u8_t i;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment">    </span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment">    for (i = 0; i &lt; ETHARP_HWADDR_LEN; i++) {</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">      netif-&gt;hwaddr[i] = some_eth_addr[i];</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment">    }</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment">    init_my_eth_device();</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="comment">    return ERR_OK;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> <span class="comment">  }</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="comment">@endcode</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment">  </span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment">  For Ethernet drivers, the input function pointer must point to the lwIP</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> <span class="comment">  function ethernet_input() declared in "netif/etharp.h". Other drivers</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment">  must use ip_input() declared in "lwip/ip.h".</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="comment">  </span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> <span class="comment">- netif_set_default(struct netif *netif)</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="comment">  Registers the default network interface.</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment"></span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment">- netif_set_link_up(struct netif *netif)</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment">  This is the hardware link state; e.g. whether cable is plugged for wired</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment">  Ethernet interface. This function must be called even if you don't know</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment">  the current state. Having link up and link down events is optional but</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment">  DHCP and IPv6 discover benefit well from those events.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment">- netif_set_up(struct netif *netif)</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment">  This is the administrative (= software) state of the netif, when the</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment">  netif is fully configured this function must be called.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span> <span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment">- dhcp_start(struct netif *netif)</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> <span class="comment">  Creates a new DHCP client for this interface on the first call.</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> <span class="comment">  You can peek in the netif-&gt;dhcp struct for the actual DHCP status.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment">- sys_check_timeouts()</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment">  When the system is running, you have to periodically call</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment">  sys_check_timeouts() which will handle all timers for all protocols in</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment">  the stack; add this to your main loop or equivalent.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="comment"> */</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> <span class="comment">/**</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="comment"> * @page multithreading Multithreading</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> <span class="comment"> * lwIP started targeting single-threaded environments. When adding multi-</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment"> * threading support, instead of making the core thread-safe, another</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment"> * approach was chosen: there is one main thread running the lwIP core</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span> <span class="comment"> * (also known as the "tcpip_thread"). When running in a multithreaded</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> <span class="comment"> * environment, raw API functions MUST only be called from the core thread</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span> <span class="comment"> * since raw API functions are not protected from concurrent access (aside</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> <span class="comment"> * from pbuf- and memory management functions). Application threads using</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment"> * the sequential- or socket API communicate with this main thread through</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment"> * message passing.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment"> * </span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> <span class="comment"> * As such, the list of functions that may be called from</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment"> * other threads or an ISR is very limited! Only functions</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment"> * from these API header files are thread-safe:</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment"> * - api.h</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment"> * - netbuf.h</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment"> * - netdb.h</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment"> * - netifapi.h</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="comment"> * - pppapi.h</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span> <span class="comment"> * - sockets.h</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> <span class="comment"> * - sys.h</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> <span class="comment"> * </span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> <span class="comment"> * Additionaly, memory (de-)allocation functions may be</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment"> * called from multiple threads (not ISR!) with NO_SYS=0</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment"> * since they are protected by @ref SYS_LIGHTWEIGHT_PROT and/or</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment"> * semaphores.</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment"> * </span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment"> * Netconn or Socket API functions are thread safe against the</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment"> * core thread but they are not reentrant at the control block</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment"> * granularity level. That is, a UDP or TCP control block must</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment"> * not be shared among multiple threads without proper locking.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment"> * </span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> <span class="comment"> * If @ref SYS_LIGHTWEIGHT_PROT is set to 1 and</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span> <span class="comment"> * @ref LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT is set to 1,</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> <span class="comment"> * pbuf_free() may also be called from another thread or</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> <span class="comment"> * an ISR (since only then, mem_free - for PBUF_RAM - may</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"> * be called from an ISR: otherwise, the HEAP is only</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment"> * protected by semaphores).</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment"> * </span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment"> * How to get threading done right</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment"> * -------------------------------</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment"> * </span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment"> * It is strongly recommended to implement the LWIP_ASSERT_CORE_LOCKED()</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment"> * macro in an application that uses multithreading. lwIP code has</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment"> * several places where a check for a correct thread context is</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment"> * implemented which greatly helps the user to get threading done right.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment"> * See the example sys_arch.c files in unix and Win32 port </span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment"> * in the contrib repository.</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment"> * </span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment"> * In short: Copy the functions sys_mark_tcpip_thread() and </span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment"> * sys_check_core_locking() to your port and modify them to work with your OS.</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment"> * Then let @ref LWIP_ASSERT_CORE_LOCKED() and @ref LWIP_MARK_TCPIP_THREAD()</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment"> * point to these functions.</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment"> * </span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment"> * If you use @ref LWIP_TCPIP_CORE_LOCKING, you also need to copy and adapt</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment"> * the functions sys_lock_tcpip_core() and sys_unlock_tcpip_core().</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment"> * Let @ref LOCK_TCPIP_CORE() and @ref UNLOCK_TCPIP_CORE() point </span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment"> * to these functions. </span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment"> */</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment"></span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment">/**</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment"> * @page optimization Optimization hints</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> <span class="comment">The first thing you want to optimize is the lwip_standard_checksum()</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment">routine from src/core/inet.c. You can override this standard</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment">function with the \#define LWIP_CHKSUM your_checksum_routine().</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment"></span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment">There are C examples given in inet.c or you might want to</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment">craft an assembly function for this. RFC1071 is a good</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment">introduction to this subject.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment"></span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment">Other significant improvements can be made by supplying</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment">assembly or inline replacements for htons() and htonl()</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment">if you're using a little-endian architecture.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment">\#define lwip_htons(x) your_htons()</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment">\#define lwip_htonl(x) your_htonl()</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment">If you \#define them to htons() and htonl(), you should</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="comment">\#define LWIP_DONT_PROVIDE_BYTEORDER_FUNCTIONS to prevent lwIP from</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment">defining htonx / ntohx compatibility macros.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment"></span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment">Check your network interface driver if it reads at</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment">a higher speed than the maximum wire-speed. If the</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment">hardware isn't serviced frequently and fast enough</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment">buffer overflows are likely to occur.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment">E.g. when using the cs8900 driver, call cs8900if_service(ethif)</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment">as frequently as possible. When using an RTOS let the cs8900 interrupt</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment">wake a high priority task that services your driver using a binary</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment">semaphore or event flag. Some drivers might allow additional tuning</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment">to match your application and network.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment">For a production release it is recommended to set LWIP_STATS to 0.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment">Note that speed performance isn't influenced much by simply setting</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment">high values to the memory options.</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment"> */</span></div></div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/main__page_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:25:03 GMT -->
</html>
