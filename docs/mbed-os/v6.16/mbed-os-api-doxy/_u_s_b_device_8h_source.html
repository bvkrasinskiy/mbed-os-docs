<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_u_s_b_device_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:29:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | USBDevice.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="_u_s_b_device_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_u_s_b_device_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_u_s_b_device_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_f1b16baafcc1697607aba4d4d51e2eb7.html">drivers</a></li><li class="navelem"><a class="el" href="dir_cf60a1241b9868bfc79e655b1a5055d5.html">usb</a></li><li class="navelem"><a class="el" href="dir_4b67a0c2408c52c8f1eb21124f494f18.html">include</a></li><li class="navelem"><a class="el" href="dir_260bb4dc091ecc4d3c284ceb13df44c9.html">usb</a></li><li class="navelem"><a class="el" href="dir_fae996b21581532c7f5444bac0ea4fb5.html">internal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">USBDevice.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> * Copyright (c) 2018-2019, Arm Limited and affiliates.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> * SPDX-License-Identifier: Apache-2.0</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> */</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="preprocessor">#ifndef USBDEVICE_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="preprocessor">#define USBDEVICE_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="preprocessor">#include &lt;stddef.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="preprocessor">#include "USBDevice_Types.h"</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="preprocessor">#include "USBPhy.h"</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="preprocessor">#include "mbed_critical.h"</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="preprocessor">#include "Callback.h"</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="comment"></span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="comment">/**</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="comment"> * \defgroup drivers_USBDevice USBDevice class</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="comment"> * \ingroup drivers-internal-api-usb</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="comment"> * @{</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="comment"> */</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="comment"></span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> <span class="comment">/**</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="comment"> * Core USB Device driver</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment"> *</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment"> * USB driver which wraps and provides synchronization for a USBPhy object.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment"> */</span></div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="class_u_s_b_device.html">   38</a></span> <span class="keyword">class </span><a class="code" href="class_u_s_b_device.html">USBDevice</a>: <span class="keyword">public</span>  <a class="code" href="class_u_s_b_phy_events.html">USBPhyEvents</a> {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="keyword">public</span>:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>     <span class="keyword">typedef</span> void (<a class="code" href="class_u_s_b_device.html">USBDevice</a>::*ep_cb_t)();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>     <span class="keyword">enum</span> RequestResult {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>         Receive = 0,</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>         Send = 1,</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>         Success = 2,</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>         Failure = 3,</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>         PassThrough = 4,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>     };</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> </div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>     <span class="keyword">enum</span> DeviceState {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>         Attached,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>         Powered,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>         Default,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>         Address,</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>         Configured</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>     };</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> </div><div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_u_s_b_device_1_1setup__packet__t.html">   58</a></span>     <span class="keyword">struct </span><a class="code" href="struct_u_s_b_device_1_1setup__packet__t.html">setup_packet_t</a> {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>         <span class="keyword">struct </span>{</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>             uint8_t dataTransferDirection;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>             uint8_t Type;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>             uint8_t Recipient;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>         } bmRequestType;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>         uint8_t  bRequest;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>         uint16_t wValue;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>         uint16_t wIndex;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>         uint16_t wLength;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>     };</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment">    /**</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment">     * Instantiate a new USBDevice with the given parameters</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> <span class="comment">     *</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment">     * @param phy The USBPhy providing physical USB access</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment">     * @param vendor_id The USB vendor ID</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="comment">     * @param product_id The USB product ID</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment">     * @param product_release The device release number</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment">     */</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>     <a class="code" href="class_u_s_b_device.html#a7ef4ccb88485aa76a7025ab69041bc0c">USBDevice</a>(<a class="code" href="class_u_s_b_phy.html">USBPhy</a> *phy, uint16_t vendor_id, uint16_t product_id, uint16_t product_release);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"></span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="comment">    /**</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment">     * Cleanup this USBDevice</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment">     *</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment">     * This USBDevice must be uninitialized when the destructor is</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment">     * called or the behavior is undefined.</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment">     */</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>     <span class="keyword">virtual</span> <a class="code" href="class_u_s_b_device.html#ab5e81403a2952c715d768027c8722a9d">~USBDevice</a>();</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"></span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment">    /**</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment">     * Initialize this instance</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment">     *</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment">     * This function must be called before calling</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment">     * any other functions of this class, unless specifically</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment">     */</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a02fd73d861ef2e4aabb38c0c9ff82947">init</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment"></span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment">    /**</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment">     * Power down this instance</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment">     *</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment">     * Disable interrupts and stop sending events.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="comment">     * This method can be used for temporary power-saving; This call can allow</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> <span class="comment">     * USB to be temporarily disabled to permit power saving.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment">     * However, it is up to the user to make sure all the</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment">     * transfers have concluded (for example when USB power is lost).</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment">     * USBDevice::connect can be used to resume USB operation.</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment">     */</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a967fb9235af58c66165b0d619c6cc584">deinit</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment">    /**</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment">    * Check if the device is configured</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment">    *</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="comment">    * @returns true if configured, false otherwise</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment">    */</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>     <span class="keywordtype">bool</span> <a class="code" href="class_u_s_b_device.html#a5cff43a5411e8a93bb0c4ecd7daba44d">configured</a>();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment"></span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment">    /**</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment">    * Connect a device</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment">    * This method can also be used to resume USB operation when USB power is</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment">    * detected after it was suspended via USBDevice::deinit.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment">    */</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a1396bf9b5defe9fa844a63b5cd40ac0e">connect</a>();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> <span class="comment">    /**</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment">    * Disconnect a device</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> <span class="comment">    */</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a960705de531a20389fb29928d43258c3">disconnect</a>();</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment"></span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment">    /**</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment">     * Enable the start of frame interrupt</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment">     *</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment">     * Call USBDevice::callback_sof on every frame.</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment">     */</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a4284c16c5ce86b74e83acdf32cea3af8">sof_enable</a>();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment">    /**</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment">     * Disable the start of frame interrupt</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment">     *</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment">     * Stop calling USBDevice::callback_sof.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment">     */</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#af6b24f177407d0f62e83c7d0cf57c0b6">sof_disable</a>();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment">    /**</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment">    * Add an endpoint</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="comment">    *</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment">    * @param endpoint Endpoint to enable</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment">    * @param max_packet Maximum size of a packet which can be sent or received on this endpoint</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment">    * @param type Endpoint type - USB_EP_TYPE_BULK, USB_EP_TYPE_INT or USB_EP_TYPE_ISO</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment">    * @param callback Method pointer to be called when a packet is transferred</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment">    * @returns true if successful, false otherwise</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span> <span class="comment">    */</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>     <span class="keywordtype">bool</span> <a class="code" href="class_u_s_b_device.html#ad9728fc4fec504c5076aff34396df386">endpoint_add</a>(usb_ep_t endpoint, uint32_t max_packet, usb_ep_type_t type, <a class="code" href="classmbed_1_1_callback.html">mbed::Callback</a>&lt;<span class="keywordtype">void</span>()&gt; <a class="code" href="group__platform___callback.html#ga1104a807bfce1d1dc38e4d1eeba6ed17">callback</a> = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span> <span class="comment"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> <span class="comment">    /**</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> <span class="comment">    * Add an endpoint</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment">    *</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment">    * @param endpoint Endpoint to enable</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment">    * @param max_packet Maximum size of a packet which can be sent or received on this endpoint</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="comment">    * @param type Endpoint type - USB_EP_TYPE_BULK, USB_EP_TYPE_INT or USB_EP_TYPE_ISO</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span> <span class="comment">    * @param callback Method pointer to be called when a packet is transferred</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span> <span class="comment">    * @returns true if successful, false otherwise</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span> <span class="comment">    */</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="class_u_s_b_device.html#a0143b91e4f549327c73021f824587998">  162</a></span>     <span class="keywordtype">bool</span> <a class="code" href="class_u_s_b_device.html#a0143b91e4f549327c73021f824587998">endpoint_add</a>(usb_ep_t endpoint, uint32_t max_packet, usb_ep_type_t type, <span class="keywordtype">void</span> (T::*<a class="code" href="group__platform___callback.html#ga1104a807bfce1d1dc38e4d1eeba6ed17">callback</a>)())</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>     {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>         <span class="keywordflow">return</span> <a class="code" href="class_u_s_b_device.html#ad9728fc4fec504c5076aff34396df386">endpoint_add</a>(endpoint, max_packet, type, <a class="code" href="group__platform___callback.html#ga1104a807bfce1d1dc38e4d1eeba6ed17">mbed::callback</a>(<span class="keyword">this</span>, static_cast&lt;ep_cb_t&gt;(callback)));</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>     }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment">    /**</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment">    * Remove an endpoint</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment">    *</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment">    * @param endpoint Endpoint to disable</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment">    * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment">    */</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a8218a7b80c2b8fe90653b362613a3690">endpoint_remove</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment"></span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">    /**</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span> <span class="comment">    * Remove all non-zero endpoints</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment">    */</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#af8bb85f8cfbf9bd829876f2e6dca867c">endpoint_remove_all</a>();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span> <span class="comment">    /**</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> <span class="comment">    * Stall an endpoint</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment">    *</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> <span class="comment">    * If there is an ongoing transfer on this endpoint then it will</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment">    * be aborted.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment">    *</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span> <span class="comment">    * @param endpoint Endpoint to stall</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span> <span class="comment">    * @note You cannot stall endpoint 0 with this function</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> <span class="comment">    * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> <span class="comment">    */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ac7bd287cfc186d59d97acc9e3bcac834">endpoint_stall</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> <span class="comment"></span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment">    /**</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment">    * Un-stall an endpoint</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment">    *</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> <span class="comment">    * Un-stalling an endpoint resets data toggle back to DATA0.</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> <span class="comment">    * Additionally, if there is an ongoing transfer on this endpoint</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment">    * it will be aborted.</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span> <span class="comment">    *</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="comment">    * @param endpoint Endpoint to un-stall</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="comment">    * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> <span class="comment">    */</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ab82380b37b4d473d63476744d8c0de4c">endpoint_unstall</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment"></span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment">    /**</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment">     * Get the current maximum size for this endpoint</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment">     *</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment">     * Return the currently configured maximum packet size, wMaxPacketSize,</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment">     * for this endpoint.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> <span class="comment">     * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment">     */</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>     uint32_t <a class="code" href="class_u_s_b_device.html#a0f338a37cba6016f65678cd0434af652">endpoint_max_packet_size</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment">    /**</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">     * Abort the current transfer on this endpoint</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment">     *</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment">     * @param endpoint endpoint with transfer to abort</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment">     * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment">     */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#aae16341b41e942ef8d45b1b6c6319eb0">endpoint_abort</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment"></span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment">    /**</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="comment">     * start a read on the given endpoint</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> <span class="comment">     *</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment">     * Start a read on the given endpoint. The data buffer must remain</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment">     * unchanged until the transfer either completes or is aborted.</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment">     *</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment">     * @param endpoint endpoint to read data from</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment">     * @param buffer buffer to fill with read data</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment">     * @param size The size of data to read. This must be greater than or equal</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment">     *        to the max packet size for this endpoint</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment">     * @return true if the read was completed, otherwise false</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="comment">     * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment">     */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>     <span class="keywordtype">bool</span> <a class="code" href="class_u_s_b_device.html#a5934b6a42df0fb08b445b06df08d6c3e">read_start</a>(usb_ep_t endpoint, uint8_t *buffer, uint32_t size);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment">    /**</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment">     * Get the status of a read</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment">     *</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment">     * @param endpoint endpoint to get the status of</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment">     * @return number of bytes read by this endpoint</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment">     */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>     uint32_t <a class="code" href="class_u_s_b_device.html#a6328db21a8f0874b1564992c21f766be">read_finish</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment"></span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment">    /**</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment">     * Write a data to the given endpoint</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">     *</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment">     * Write data to an endpoint. The data sent must remain unchanged until</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment">     * the transfer either completes or is aborted.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment">     *</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="comment">     * @param endpoint endpoint to write data to</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment">     * @param buffer data to write</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment">     * @param size the size of data to send. This must be less than or equal to the</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment">     * max packet size of this endpoint</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment">     * @note This endpoint must already have been setup with endpoint_add</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment">     */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>     <span class="keywordtype">bool</span> <a class="code" href="class_u_s_b_device.html#a03e69fe0f63d1832cbf38d3019bfaa8c">write_start</a>(usb_ep_t endpoint, uint8_t *buffer, uint32_t size);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="comment">    /**</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment">     * Get the status of a write</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">     *</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">     * @param endpoint endpoint to get the status of</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment">     * @return number of bytes sent by this endpoint</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment">     */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>     uint32_t <a class="code" href="class_u_s_b_device.html#a354d256cf68a7ccac672796cee798106">write_finish</a>(usb_ep_t endpoint);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>     <span class="comment">/*</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment">    * Get device descriptor.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment">    *</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment">    * @returns pointer to the device descriptor</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment">    */</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *device_desc();</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>     <span class="comment">/*</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment">    * Get configuration descriptor</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">    *</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment">    * @param index descriptor index</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment">    * @returns pointer to the configuration descriptor</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="comment">    */</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *configuration_desc(uint8_t index) = 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> </div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>     <span class="comment">/*</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment">    * Get string lang id descriptor</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> <span class="comment">    *</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment">    * @return pointer to the string lang id descriptor</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="comment">    */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_langid_desc();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> </div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>     <span class="comment">/*</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment">    * Get string manufacturer descriptor</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment">    *</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment">    * @returns pointer to the string manufacturer descriptor</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment">    */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_imanufacturer_desc();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> </div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>     <span class="comment">/*</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment">    * Get string product descriptor</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment">    *</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span> <span class="comment">    * @returns pointer to the string product descriptor</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment">    */</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_iproduct_desc();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> </div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>     <span class="comment">/*</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment">    * Get string serial descriptor</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment">    *</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment">    * @returns pointer to the string serial descriptor</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment">    */</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_iserial_desc();</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> </div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>     <span class="comment">/*</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="comment">    * Get string configuration descriptor</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> <span class="comment">    *</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment">    * @returns pointer to the string configuration descriptor</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment">    */</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_iconfiguration_desc();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> </div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>     <span class="comment">/*</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> <span class="comment">    * Get string interface descriptor</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment">    *</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment">    * @returns pointer to the string interface descriptor</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment">    */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>     <span class="keyword">virtual</span> <span class="keyword">const</span> uint8_t *string_iinterface_desc();</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> </div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>     <span class="comment">/*</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment">    * Get the length of the report descriptor</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment">    *</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment">    * @returns length of the report descriptor</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment">    */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>     <span class="keyword">virtual</span> uint16_t report_desc_dength()</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>     {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>     };</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> </div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="keyword">protected</span>:</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment"></span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment">    /**</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment">    * Called by USBDevice layer on power state change.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment">    *</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment">    * @param powered true if device is powered, false otherwise</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment">    *</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment">    */</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="class_u_s_b_device.html#a32b695330a6fa4f19d7bdb88a46a9e46">  342</a></span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a32b695330a6fa4f19d7bdb88a46a9e46">callback_power</a>(<span class="keywordtype">bool</span> powered)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>     {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> </div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>     }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment">    /**</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment">    * Called by USBDevice layer on each new USB frame.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment">    *</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment">    * Callbacks are enabled and disabled by calling sof_enable</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment">    * and sof_disable.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment">    *</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment">    * @param frame_number The current frame number</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment">    *</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment">    */</span></div><div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="class_u_s_b_device.html#a978ae250c8533b5bd84fd29c60bae220">  357</a></span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a978ae250c8533b5bd84fd29c60bae220">callback_sof</a>(<span class="keywordtype">int</span> frame_number)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>     {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> </div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>     }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment"></span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment">    /**</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment">    * Called by USBDevice layer on bus reset.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment">    *</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment">    * complete_reset must be called after</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment">    * the device is fully reset.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment">    *</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment">    */</span></div><div class="line"><a name="l00370"></a><span class="lineno"><a class="line" href="class_u_s_b_device.html#a3ce6d6529afab0f0212bc766ffd2e390">  370</a></span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a3ce6d6529afab0f0212bc766ffd2e390">callback_reset</a>()</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>     {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> </div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>     }</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment">    /**</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment">    * Called when USB changes state</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment">    *</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment">    * @param new_state The new state of the USBDevice</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment">    *</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment">    */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#aada9f21dd3b7c9c59a1059e91e11f1b7">callback_state_change</a>(DeviceState new_state) = 0;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment">    /**</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment">    * Called by USBDevice on Endpoint0 request.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="comment">    *</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment">    * This is used to handle extensions to standard requests</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment">    * and class specific requests. The function complete_request</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment">    * must be always be called in response to this callback.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment">    *</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment">    */</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a90eb6b3301a6336408e675e2d2026865">callback_request</a>(<span class="keyword">const</span> <a class="code" href="struct_u_s_b_device_1_1setup__packet__t.html">setup_packet_t</a> *setup) = 0;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment"></span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment">    /**</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment">     * Called to complete the setup stage of a callback request</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment">     *</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment">     * Possible options that can be passed as a result are:</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment">     * - Receive - Start the data OUT phase of this control transfer</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment">     * - Send - Start the data IN phase of this control transfer</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment">     * - Success - Operation was a success so start the status phase</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment">     * - Failure - Operation failed or is unsupported so send a stall</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment">     * - PassThrough - Pass on the request for standard processing</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment">     *</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> <span class="comment">     * @param result The result of the setup phase.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span> <span class="comment">     * @param data Buffer to send or receive if the result is Send or Receive</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment">     * @param size Size to transfer if the result is Send or Receive</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment">     */</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ae871a26c5934589661ee96403620974c">complete_request</a>(RequestResult result, uint8_t *data = NULL, uint32_t size = 0);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment">    /**</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment">    * Called by USBDevice on data stage completion</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment">    *</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> <span class="comment">    * The function complete_request_xfer_done must be always be called</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span> <span class="comment">    * in response to this callback.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="comment">    *</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span> <span class="comment">    * @param setup Setup packet of the current request</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span> <span class="comment">    * @param aborted false if the operation was aborted, true otherwise</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span> <span class="comment">    *</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment">    */</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a50534fc028e6d7a1b2478e8f77a984e3">callback_request_xfer_done</a>(<span class="keyword">const</span> <a class="code" href="struct_u_s_b_device_1_1setup__packet__t.html">setup_packet_t</a> *setup, <span class="keywordtype">bool</span> aborted) = 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment"></span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span> <span class="comment">    /**</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span> <span class="comment">     * Called to complete the data stage of a callback request</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span> <span class="comment">     *</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span> <span class="comment">     * @param success true if the operation was successful, false otherwise</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> <span class="comment">     */</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a855c842e9a85db320fd6867e13b301f4">complete_request_xfer_done</a>(<span class="keywordtype">bool</span> success);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> </div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>     <span class="comment">/*</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span> <span class="comment">    * Called by USBDevice layer in response to set_configuration.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="comment">    *</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment">    * Upon reception of this command endpoints of the previous configuration</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment">    * if any must be removed with endpoint_remove and new endpoint added with</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment">    * endpoint_add.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment">    *</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span> <span class="comment">    * @param configuration Number of the configuration</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment">    *</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> <span class="comment">    */</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> callback_set_configuration(uint8_t configuration) = 0;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span> <span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span> <span class="comment">    /**</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span> <span class="comment">     * Called to complete a set configuration command</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span> <span class="comment">     *</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> <span class="comment">     * @param success true if the configuration was set, false otherwise</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment">     */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a3ec0d52b739e9bd84c90d12b74d33020">complete_set_configuration</a>(<span class="keywordtype">bool</span> success);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> </div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>     <span class="comment">/*</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment">    * Called by USBDevice layer in response to set_interface.</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment">    *</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment">    * Upon reception of this command endpoints of any previous interface</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment">    * if any must be removed with endpoint_remove and new endpoint added with</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment">    * endpoint_add.</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span> <span class="comment">    *</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span> <span class="comment">    * @param configuration Number of the configuration</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span> <span class="comment">    *</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span> <span class="comment">    * Warning: Called in ISR context</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span> <span class="comment">    */</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> callback_set_interface(uint16_t interface, uint8_t alternate) = 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span> <span class="comment"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span> <span class="comment">    /**</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> <span class="comment">     * Called to complete a set interface command</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span> <span class="comment">     *</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span> <span class="comment">     * @param success true if the interface was set, false otherwise</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span> <span class="comment">     */</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>     <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#a9a46e55e5f681d605f8a91613ade32d4">complete_set_interface</a>(<span class="keywordtype">bool</span> success);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span> <span class="comment"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span> <span class="comment">    /**</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span> <span class="comment">     * Find a descriptor type inside the configuration descriptor</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> <span class="comment">     *</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span> <span class="comment">     * @param descriptor_type Type of descriptor to find</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> <span class="comment">     * @param index Configuration descriptor index ( 0 if only one configuration present )</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> <span class="comment">     * @return A descriptor of the given type or NULL if none were found</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment">     */</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>     uint8_t *<a class="code" href="class_u_s_b_device.html#afa77f2baf53a663180ae7bef6fef5188">find_descriptor</a>(uint8_t descriptor_type, uint8_t index = 0);</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="comment"></span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> <span class="comment">    /**</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="comment">     * Get the endpoint table of this device</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment">     *</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span> <span class="comment">     * @return Endpoint table of the USBPhy attached to this USBDevice</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span> <span class="comment">     */</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>     <span class="keyword">const</span> <a class="code" href="structusb__ep__table__t.html">usb_ep_table_t</a> *<a class="code" href="class_u_s_b_device.html#a60d5b89a8a1702890ce28011e5ce9b64">endpoint_table</a>();</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span> <span class="comment"></span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span> <span class="comment">    /**</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span> <span class="comment">     * Callback called to indicate the USB processing needs to be done</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment">     */</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ad29faaa4450a51a3e628489ae95783f2">start_process</a>();</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment">    /**</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment">     * Acquire exclusive access to this instance USBDevice</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment">     */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ae33bae81fdbbabfe2be20d78338bd0d9">lock</a>();</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span> <span class="comment"></span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment">    /**</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment">     * Release exclusive access to this instance USBDevice</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="comment">     */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ae6f018536d482152b993f522d8d2942d">unlock</a>();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment">    /**</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span> <span class="comment">     * Assert that the current thread of execution holds the lock</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="comment">     *</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span> <span class="comment">     */</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_u_s_b_device.html#ae80f4422d8568d4ad4dfbf7422021950">assert_locked</a>();</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span> </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>     uint16_t vendor_id;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>     uint16_t product_id;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>     uint16_t product_release;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>     uint8_t device_descriptor[18];</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span> </div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> <span class="keyword">private</span>:</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>     <span class="comment">// USBPhyEvents</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> power(<span class="keywordtype">bool</span> powered);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> suspend(<span class="keywordtype">bool</span> suspended);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> sof(<span class="keywordtype">int</span> frame_number);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> reset();</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> ep0_setup();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> ep0_out();</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> ep0_in();</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> out(usb_ep_t endpoint);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> in(usb_ep_t endpoint);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span> </div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>     <span class="keywordtype">bool</span> _request_get_descriptor();</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>     <span class="keywordtype">bool</span> _control_out();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>     <span class="keywordtype">bool</span> _control_in();</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>     <span class="keywordtype">bool</span> _request_set_address();</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>     <span class="keywordtype">bool</span> _request_set_configuration();</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>     <span class="keywordtype">bool</span> _request_set_feature();</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>     <span class="keywordtype">bool</span> _request_clear_feature();</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>     <span class="keywordtype">bool</span> _request_get_status();</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>     <span class="keywordtype">bool</span> _request_setup();</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>     <span class="keywordtype">void</span> _control_setup();</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>     <span class="keywordtype">void</span> _control_abort();</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>     <span class="keywordtype">void</span> _control_abort_start();</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>     <span class="keywordtype">void</span> _control_setup_continue();</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>     <span class="keywordtype">void</span> _decode_setup_packet(uint8_t *data, <a class="code" href="struct_u_s_b_device_1_1setup__packet__t.html">setup_packet_t</a> *packet);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>     <span class="keywordtype">bool</span> _request_get_configuration();</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>     <span class="keywordtype">bool</span> _request_get_interface();</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>     <span class="keywordtype">bool</span> _request_set_interface();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>     <span class="keywordtype">void</span> _change_state(DeviceState state);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>     <span class="keywordtype">void</span> _run_later(<span class="keywordtype">void</span> (<a class="code" href="class_u_s_b_device.html">USBDevice</a>::*<span class="keyword">function</span>)());</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span> </div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>     <span class="keywordtype">void</span> _complete_request();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>     <span class="keywordtype">void</span> _complete_request_xfer_done();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>     <span class="keywordtype">void</span> _complete_set_configuration();</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>     <span class="keywordtype">void</span> _complete_set_interface();</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span> </div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>     <span class="keyword">struct </span>endpoint_info_t {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>         <a class="code" href="classmbed_1_1_callback.html">mbed::Callback&lt;void()&gt;</a> <a class="code" href="group__platform___callback.html#ga1104a807bfce1d1dc38e4d1eeba6ed17">callback</a>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>         uint16_t max_packet_size;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>         uint16_t transfer_size;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>         uint8_t flags;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>         uint8_t pending;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>     };</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span> </div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>     <span class="keyword">struct </span>usb_device_t {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>         <span class="keyword">volatile</span> DeviceState state;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>         uint8_t configuration;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>         <span class="keywordtype">bool</span> suspended;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>     };</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span> </div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>     <span class="keyword">enum</span> ControlState {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>         Setup,</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>         DataOut,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>         DataIn,</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>         Status</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>     };</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span> </div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>     <span class="keyword">enum</span> UserCallback {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>         None,</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>         Request,</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>         RequestXferDone,</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>         SetConfiguration,</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>         SetInterface</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>     };</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span> </div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>     <span class="keyword">struct </span>complete_request_t {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>         RequestResult result;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>         uint8_t *data;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>         uint32_t size;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>     };</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span> </div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>     <span class="keyword">union </span>complete_args_t {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>         complete_request_t request;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>         <span class="keywordtype">bool</span> status;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>     };</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span> </div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>     <span class="keyword">struct </span>control_transfer_t {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>         <a class="code" href="struct_u_s_b_device_1_1setup__packet__t.html">setup_packet_t</a> setup;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>         uint8_t *ptr;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>         uint32_t remaining;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>         uint8_t direction;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>         <span class="keywordtype">bool</span> zlp;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>         <span class="keywordtype">bool</span> notify;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>         ControlState stage;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>         UserCallback user_callback;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>         complete_args_t args;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>     };</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span> </div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>     endpoint_info_t _endpoint_info[32 - 2];</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span> </div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>     <a class="code" href="class_u_s_b_phy.html">USBPhy</a> *_phy;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>     <span class="keywordtype">bool</span> _initialized;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>     <span class="keywordtype">bool</span> _connected;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>     <span class="keywordtype">bool</span> _endpoint_add_remove_allowed;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>     control_transfer_t _transfer;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>     usb_device_t _device;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>     uint32_t _max_packet_size_ep0;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>     void (<a class="code" href="class_u_s_b_device.html">USBDevice</a>::*_post_process)();</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span> </div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>     <span class="keywordtype">bool</span> _setup_ready;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>     <span class="keywordtype">bool</span> _abort_control;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span> </div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>     uint16_t _current_interface;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>     uint8_t _current_alternate;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>     uint32_t _locked;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span> };</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span> <span class="comment"></span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span> <span class="comment">/** @}*/</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span> </div><div class="line"><a name="l00623"></a><span class="lineno">  623</span> <span class="preprocessor">#endif</span></div><div class="ttc" id="class_u_s_b_device_html_ae871a26c5934589661ee96403620974c"><div class="ttname"><a href="class_u_s_b_device.html#ae871a26c5934589661ee96403620974c">USBDevice::complete_request</a></div><div class="ttdeci">void complete_request(RequestResult result, uint8_t *data=NULL, uint32_t size=0)</div><div class="ttdoc">Called to complete the setup stage of a callback request. </div></div>
<div class="ttc" id="class_u_s_b_device_html_ad9728fc4fec504c5076aff34396df386"><div class="ttname"><a href="class_u_s_b_device.html#ad9728fc4fec504c5076aff34396df386">USBDevice::endpoint_add</a></div><div class="ttdeci">bool endpoint_add(usb_ep_t endpoint, uint32_t max_packet, usb_ep_type_t type, mbed::Callback&lt; void()&gt; callback=nullptr)</div><div class="ttdoc">Add an endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a4284c16c5ce86b74e83acdf32cea3af8"><div class="ttname"><a href="class_u_s_b_device.html#a4284c16c5ce86b74e83acdf32cea3af8">USBDevice::sof_enable</a></div><div class="ttdeci">void sof_enable()</div><div class="ttdoc">Enable the start of frame interrupt. </div></div>
<div class="ttc" id="class_u_s_b_device_html_af8bb85f8cfbf9bd829876f2e6dca867c"><div class="ttname"><a href="class_u_s_b_device.html#af8bb85f8cfbf9bd829876f2e6dca867c">USBDevice::endpoint_remove_all</a></div><div class="ttdeci">void endpoint_remove_all()</div><div class="ttdoc">Remove all non-zero endpoints. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a967fb9235af58c66165b0d619c6cc584"><div class="ttname"><a href="class_u_s_b_device.html#a967fb9235af58c66165b0d619c6cc584">USBDevice::deinit</a></div><div class="ttdeci">void deinit()</div><div class="ttdoc">Power down this instance. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a855c842e9a85db320fd6867e13b301f4"><div class="ttname"><a href="class_u_s_b_device.html#a855c842e9a85db320fd6867e13b301f4">USBDevice::complete_request_xfer_done</a></div><div class="ttdeci">void complete_request_xfer_done(bool success)</div><div class="ttdoc">Called to complete the data stage of a callback request. </div></div>
<div class="ttc" id="class_u_s_b_device_html_ac7bd287cfc186d59d97acc9e3bcac834"><div class="ttname"><a href="class_u_s_b_device.html#ac7bd287cfc186d59d97acc9e3bcac834">USBDevice::endpoint_stall</a></div><div class="ttdeci">void endpoint_stall(usb_ep_t endpoint)</div><div class="ttdoc">Stall an endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a960705de531a20389fb29928d43258c3"><div class="ttname"><a href="class_u_s_b_device.html#a960705de531a20389fb29928d43258c3">USBDevice::disconnect</a></div><div class="ttdeci">void disconnect()</div><div class="ttdoc">Disconnect a device. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a8218a7b80c2b8fe90653b362613a3690"><div class="ttname"><a href="class_u_s_b_device.html#a8218a7b80c2b8fe90653b362613a3690">USBDevice::endpoint_remove</a></div><div class="ttdeci">void endpoint_remove(usb_ep_t endpoint)</div><div class="ttdoc">Remove an endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a6328db21a8f0874b1564992c21f766be"><div class="ttname"><a href="class_u_s_b_device.html#a6328db21a8f0874b1564992c21f766be">USBDevice::read_finish</a></div><div class="ttdeci">uint32_t read_finish(usb_ep_t endpoint)</div><div class="ttdoc">Get the status of a read. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a32b695330a6fa4f19d7bdb88a46a9e46"><div class="ttname"><a href="class_u_s_b_device.html#a32b695330a6fa4f19d7bdb88a46a9e46">USBDevice::callback_power</a></div><div class="ttdeci">virtual void callback_power(bool powered)</div><div class="ttdoc">Called by USBDevice layer on power state change. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00342">USBDevice.h:342</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_afa77f2baf53a663180ae7bef6fef5188"><div class="ttname"><a href="class_u_s_b_device.html#afa77f2baf53a663180ae7bef6fef5188">USBDevice::find_descriptor</a></div><div class="ttdeci">uint8_t * find_descriptor(uint8_t descriptor_type, uint8_t index=0)</div><div class="ttdoc">Find a descriptor type inside the configuration descriptor. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a50534fc028e6d7a1b2478e8f77a984e3"><div class="ttname"><a href="class_u_s_b_device.html#a50534fc028e6d7a1b2478e8f77a984e3">USBDevice::callback_request_xfer_done</a></div><div class="ttdeci">virtual void callback_request_xfer_done(const setup_packet_t *setup, bool aborted)=0</div><div class="ttdoc">Called by USBDevice on data stage completion. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a1396bf9b5defe9fa844a63b5cd40ac0e"><div class="ttname"><a href="class_u_s_b_device.html#a1396bf9b5defe9fa844a63b5cd40ac0e">USBDevice::connect</a></div><div class="ttdeci">void connect()</div><div class="ttdoc">Connect a device This method can also be used to resume USB operation when USB power is detected afte...</div></div>
<div class="ttc" id="group__platform___callback_html_ga1104a807bfce1d1dc38e4d1eeba6ed17"><div class="ttname"><a href="group__platform___callback.html#ga1104a807bfce1d1dc38e4d1eeba6ed17">mbed::callback</a></div><div class="ttdeci">Callback&lt; R(ArgTs...)&gt; callback(R(*func)(ArgTs...)=nullptr) noexcept</div><div class="ttdoc">Create a callback class with type inferred from the arguments. </div><div class="ttdef"><b>Definition:</b> <a href="_callback_8h_source.html#l00678">Callback.h:678</a></div></div>
<div class="ttc" id="class_u_s_b_phy_html"><div class="ttname"><a href="class_u_s_b_phy.html">USBPhy</a></div><div class="ttdoc">Abstract interface to physical USB hardware. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_phy_8h_source.html#l00082">USBPhy.h:82</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_a3ce6d6529afab0f0212bc766ffd2e390"><div class="ttname"><a href="class_u_s_b_device.html#a3ce6d6529afab0f0212bc766ffd2e390">USBDevice::callback_reset</a></div><div class="ttdeci">virtual void callback_reset()</div><div class="ttdoc">Called by USBDevice layer on bus reset. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00370">USBDevice.h:370</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_ab82380b37b4d473d63476744d8c0de4c"><div class="ttname"><a href="class_u_s_b_device.html#ab82380b37b4d473d63476744d8c0de4c">USBDevice::endpoint_unstall</a></div><div class="ttdeci">void endpoint_unstall(usb_ep_t endpoint)</div><div class="ttdoc">Un-stall an endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a3ec0d52b739e9bd84c90d12b74d33020"><div class="ttname"><a href="class_u_s_b_device.html#a3ec0d52b739e9bd84c90d12b74d33020">USBDevice::complete_set_configuration</a></div><div class="ttdeci">void complete_set_configuration(bool success)</div><div class="ttdoc">Called to complete a set configuration command. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a90eb6b3301a6336408e675e2d2026865"><div class="ttname"><a href="class_u_s_b_device.html#a90eb6b3301a6336408e675e2d2026865">USBDevice::callback_request</a></div><div class="ttdeci">virtual void callback_request(const setup_packet_t *setup)=0</div><div class="ttdoc">Called by USBDevice on Endpoint0 request. </div></div>
<div class="ttc" id="class_u_s_b_device_html_aada9f21dd3b7c9c59a1059e91e11f1b7"><div class="ttname"><a href="class_u_s_b_device.html#aada9f21dd3b7c9c59a1059e91e11f1b7">USBDevice::callback_state_change</a></div><div class="ttdeci">virtual void callback_state_change(DeviceState new_state)=0</div><div class="ttdoc">Called when USB changes state. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a5934b6a42df0fb08b445b06df08d6c3e"><div class="ttname"><a href="class_u_s_b_device.html#a5934b6a42df0fb08b445b06df08d6c3e">USBDevice::read_start</a></div><div class="ttdeci">bool read_start(usb_ep_t endpoint, uint8_t *buffer, uint32_t size)</div><div class="ttdoc">start a read on the given endpoint </div></div>
<div class="ttc" id="class_u_s_b_device_html_af6b24f177407d0f62e83c7d0cf57c0b6"><div class="ttname"><a href="class_u_s_b_device.html#af6b24f177407d0f62e83c7d0cf57c0b6">USBDevice::sof_disable</a></div><div class="ttdeci">void sof_disable()</div><div class="ttdoc">Disable the start of frame interrupt. </div></div>
<div class="ttc" id="class_u_s_b_device_html_ae33bae81fdbbabfe2be20d78338bd0d9"><div class="ttname"><a href="class_u_s_b_device.html#ae33bae81fdbbabfe2be20d78338bd0d9">USBDevice::lock</a></div><div class="ttdeci">virtual void lock()</div><div class="ttdoc">Acquire exclusive access to this instance USBDevice. </div></div>
<div class="ttc" id="class_u_s_b_device_html"><div class="ttname"><a href="class_u_s_b_device.html">USBDevice</a></div><div class="ttdoc">Core USB Device driver. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00038">USBDevice.h:38</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_a60d5b89a8a1702890ce28011e5ce9b64"><div class="ttname"><a href="class_u_s_b_device.html#a60d5b89a8a1702890ce28011e5ce9b64">USBDevice::endpoint_table</a></div><div class="ttdeci">const usb_ep_table_t * endpoint_table()</div><div class="ttdoc">Get the endpoint table of this device. </div></div>
<div class="ttc" id="class_u_s_b_device_html_ad29faaa4450a51a3e628489ae95783f2"><div class="ttname"><a href="class_u_s_b_device.html#ad29faaa4450a51a3e628489ae95783f2">USBDevice::start_process</a></div><div class="ttdeci">virtual void start_process()</div><div class="ttdoc">Callback called to indicate the USB processing needs to be done. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a0f338a37cba6016f65678cd0434af652"><div class="ttname"><a href="class_u_s_b_device.html#a0f338a37cba6016f65678cd0434af652">USBDevice::endpoint_max_packet_size</a></div><div class="ttdeci">uint32_t endpoint_max_packet_size(usb_ep_t endpoint)</div><div class="ttdoc">Get the current maximum size for this endpoint. </div></div>
<div class="ttc" id="structusb__ep__table__t_html"><div class="ttname"><a href="structusb__ep__table__t.html">usb_ep_table_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_phy_types_8h_source.html#l00054">USBPhyTypes.h:54</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_ae6f018536d482152b993f522d8d2942d"><div class="ttname"><a href="class_u_s_b_device.html#ae6f018536d482152b993f522d8d2942d">USBDevice::unlock</a></div><div class="ttdeci">virtual void unlock()</div><div class="ttdoc">Release exclusive access to this instance USBDevice. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a02fd73d861ef2e4aabb38c0c9ff82947"><div class="ttname"><a href="class_u_s_b_device.html#a02fd73d861ef2e4aabb38c0c9ff82947">USBDevice::init</a></div><div class="ttdeci">void init()</div><div class="ttdoc">Initialize this instance. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a03e69fe0f63d1832cbf38d3019bfaa8c"><div class="ttname"><a href="class_u_s_b_device.html#a03e69fe0f63d1832cbf38d3019bfaa8c">USBDevice::write_start</a></div><div class="ttdeci">bool write_start(usb_ep_t endpoint, uint8_t *buffer, uint32_t size)</div><div class="ttdoc">Write a data to the given endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_ab5e81403a2952c715d768027c8722a9d"><div class="ttname"><a href="class_u_s_b_device.html#ab5e81403a2952c715d768027c8722a9d">USBDevice::~USBDevice</a></div><div class="ttdeci">virtual ~USBDevice()</div><div class="ttdoc">Cleanup this USBDevice. </div></div>
<div class="ttc" id="class_u_s_b_device_html_aae16341b41e942ef8d45b1b6c6319eb0"><div class="ttname"><a href="class_u_s_b_device.html#aae16341b41e942ef8d45b1b6c6319eb0">USBDevice::endpoint_abort</a></div><div class="ttdeci">void endpoint_abort(usb_ep_t endpoint)</div><div class="ttdoc">Abort the current transfer on this endpoint. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a7ef4ccb88485aa76a7025ab69041bc0c"><div class="ttname"><a href="class_u_s_b_device.html#a7ef4ccb88485aa76a7025ab69041bc0c">USBDevice::USBDevice</a></div><div class="ttdeci">USBDevice(USBPhy *phy, uint16_t vendor_id, uint16_t product_id, uint16_t product_release)</div><div class="ttdoc">Instantiate a new USBDevice with the given parameters. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a5cff43a5411e8a93bb0c4ecd7daba44d"><div class="ttname"><a href="class_u_s_b_device.html#a5cff43a5411e8a93bb0c4ecd7daba44d">USBDevice::configured</a></div><div class="ttdeci">bool configured()</div><div class="ttdoc">Check if the device is configured. </div></div>
<div class="ttc" id="classmbed_1_1_callback_html"><div class="ttname"><a href="classmbed_1_1_callback.html">mbed::Callback</a></div><div class="ttdoc">Callback class based on template specialization. </div><div class="ttdef"><b>Definition:</b> <a href="_callback_8h_source.html#l00053">Callback.h:53</a></div></div>
<div class="ttc" id="struct_u_s_b_device_1_1setup__packet__t_html"><div class="ttname"><a href="struct_u_s_b_device_1_1setup__packet__t.html">USBDevice::setup_packet_t</a></div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00058">USBDevice.h:58</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_a9a46e55e5f681d605f8a91613ade32d4"><div class="ttname"><a href="class_u_s_b_device.html#a9a46e55e5f681d605f8a91613ade32d4">USBDevice::complete_set_interface</a></div><div class="ttdeci">void complete_set_interface(bool success)</div><div class="ttdoc">Called to complete a set interface command. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a978ae250c8533b5bd84fd29c60bae220"><div class="ttname"><a href="class_u_s_b_device.html#a978ae250c8533b5bd84fd29c60bae220">USBDevice::callback_sof</a></div><div class="ttdeci">virtual void callback_sof(int frame_number)</div><div class="ttdoc">Called by USBDevice layer on each new USB frame. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00357">USBDevice.h:357</a></div></div>
<div class="ttc" id="class_u_s_b_phy_events_html"><div class="ttname"><a href="class_u_s_b_phy_events.html">USBPhyEvents</a></div><div class="ttdoc">Event handler for USBPhy. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_phy_events_8h_source.html#l00031">USBPhyEvents.h:31</a></div></div>
<div class="ttc" id="class_u_s_b_device_html_ae80f4422d8568d4ad4dfbf7422021950"><div class="ttname"><a href="class_u_s_b_device.html#ae80f4422d8568d4ad4dfbf7422021950">USBDevice::assert_locked</a></div><div class="ttdeci">virtual void assert_locked()</div><div class="ttdoc">Assert that the current thread of execution holds the lock. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a354d256cf68a7ccac672796cee798106"><div class="ttname"><a href="class_u_s_b_device.html#a354d256cf68a7ccac672796cee798106">USBDevice::write_finish</a></div><div class="ttdeci">uint32_t write_finish(usb_ep_t endpoint)</div><div class="ttdoc">Get the status of a write. </div></div>
<div class="ttc" id="class_u_s_b_device_html_a0143b91e4f549327c73021f824587998"><div class="ttname"><a href="class_u_s_b_device.html#a0143b91e4f549327c73021f824587998">USBDevice::endpoint_add</a></div><div class="ttdeci">bool endpoint_add(usb_ep_t endpoint, uint32_t max_packet, usb_ep_type_t type, void(T::*callback)())</div><div class="ttdoc">Add an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="_u_s_b_device_8h_source.html#l00162">USBDevice.h:162</a></div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_u_s_b_device_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:29:50 GMT -->
</html>
