<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_useful_buf_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:29:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | UsefulBuf.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="_useful_buf_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_useful_buf_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_useful_buf_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_d00fafdb9414f6e624fcf4d73ffde065.html">platform</a></li><li class="navelem"><a class="el" href="dir_a72924067aea8bbead751f11070268f4.html">FEATURE_EXPERIMENTAL_API</a></li><li class="navelem"><a class="el" href="dir_007a19531d3d09289f9f9c2cf309e91b.html">FEATURE_PSA</a></li><li class="navelem"><a class="el" href="dir_05e0d8a557d855fa23572451f1c8ea18.html">TARGET_MBED_PSA_SRV</a></li><li class="navelem"><a class="el" href="dir_ca746bf8ecd12d766019f43663efcc0b.html">services</a></li><li class="navelem"><a class="el" href="dir_923835f9769c78775a68e44a6b879543.html">attestation</a></li><li class="navelem"><a class="el" href="dir_3e8e74e557914f05fcb63c739dc062d4.html">qcbor</a></li><li class="navelem"><a class="el" href="dir_39375c5e13307d3e1d0539a6cbb9bd8a.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">UsefulBuf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_useful_buf_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/*==============================================================================</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> Copyright (c) 2016-2018, The Linux Foundation.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> Copyright (c) 2018-2019, Laurence Lundblade.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> All rights reserved.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"></span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment">Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment">modification, are permitted provided that the following conditions are</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment">met:</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment">    * Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment">      notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment">    * Redistributions in binary form must reproduce the above</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment">      copyright notice, this list of conditions and the following</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment">      disclaimer in the documentation and/or other materials provided</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment">      with the distribution.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment">    * Neither the name of The Linux Foundation nor the names of its</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment">      contributors, nor the name "Laurence Lundblade" may be used to</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="comment">      endorse or promote products derived from this software without</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="comment">      specific prior written permission.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="comment"></span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> <span class="comment">THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="comment">WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="comment">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="comment">ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="comment">BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="comment">CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="comment">SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="comment">BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="comment">WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="comment">OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="comment">IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="comment"> ==============================================================================*/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> </div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> <span class="comment">/*===================================================================================</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="comment"> FILE:  UsefulBuf.h</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment"></span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment"> DESCRIPTION:  General purpose input and output buffers</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment"> EDIT HISTORY FOR FILE:</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="comment"> This section contains comments describing changes made to the module.</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="comment"> Notice that changes are listed in reverse chronological order.</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="comment"></span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment"> when               who             what, where, why</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment"> --------           ----            ---------------------------------------------------</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> 12/17/2018         llundblade      Remove const from UsefulBuf and UsefulBufC .len</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="comment"> 12/13/2018         llundblade      Documentation improvements</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> <span class="comment"> 09/18/2018         llundblade      Cleaner distinction between UsefulBuf and UsefulBufC</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="comment"> 02/02/18           llundbla        Full support for integers in and out; fix pointer</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="comment">                                    alignment bug. Incompatible change: integers in/out</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment">                                    are now in network byte order.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="comment"> 08/12/17           llundbla        Added UsefulOutBuf_AtStart and UsefulBuf_Find</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="comment"> 06/27/17           llundbla        Fix UsefulBuf_Compare() bug. Only affected comparison</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="comment">                                    for &lt; or &gt; for unequal length buffers.  Added</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="comment">                                    UsefulBuf_Set() function.</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="comment"> 05/30/17           llundbla        Functions for NULL UsefulBufs and const / unconst</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="comment"> 11/13/16           llundbla        Initial Version.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> <span class="comment"></span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="comment"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="comment"> =====================================================================================*/</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="preprocessor">#ifndef _UsefulBuf_h</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="preprocessor">#define _UsefulBuf_h</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="preprocessor">#include &lt;stdint.h&gt;</span> <span class="comment">// for uint8_t, uint16_t....</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span> <span class="preprocessor">#include &lt;string.h&gt;</span> <span class="comment">// for strlen, memcpy, memmove, memset</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="preprocessor">#include &lt;stddef.h&gt;</span> <span class="comment">// for size_t</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> <span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment">/**</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment"> @file UsefulBuf.h</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> <span class="comment"> The goal of this code is to make buffer and pointer manipulation</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment"> easier and safer when working with binary data.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment"></span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> <span class="comment"> You use the UsefulBuf, UsefulOutBuf and UsefulInputBuf</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment"> structures to represent buffers rather than ad hoc pointers and lengths.</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span> <span class="comment"> With these it will often be possible to write code that does little or no</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"> direct pointer manipulation for copying and formatting data. For example</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="comment"> the QCBOR encoder was rewritten using these and has no direct pointer</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment"> manipulation.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment"></span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment"> While it is true that object code using these functions will be a little</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment"> larger and slower than a white-knuckle clever use of pointers might be, but</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment"> not by that much or enough to have an affect for most use cases. For</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment"> security-oriented code this is highly worthwhile. Clarity, simplicity,</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"> reviewability and are more important.</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment"> There are some extra sanity and double checks in this code to help catch</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment"> coding errors and simple memory corruption. They are helpful, but not a</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment"> substitute for proper code review, input validation and such.</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment"></span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment"> This code consists of a lot of inline functions and a few that are not.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment"> It should not generate very much object code, especially with the</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment"> optimizer turned up to -Os or -O3. The idea is that the inline</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment"> functions are easier to review and understand and the optimizer does</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment"> the work of making the code small.</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment"> */</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> </div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> </div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> <span class="comment">/*...... This is a ruler that is 80 characters long...........................*/</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment">/**</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment"> UsefulBufC and UsefulBuf are simple data structures to hold a pointer and</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment"> length for a binary data.  In C99 this data structure can be passed on the</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment"> stack making a lot of code cleaner than carrying around a pointer and</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"> length as two parameters.</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment"> This is also conducive to secure code practice as the lengths are</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment"> always carried with the pointer and the convention for handling a</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="comment"> pointer and a length is clear.</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="comment"> While it might be possible to write buffer and pointer code more</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment"> efficiently in some use cases, the thought is that unless there is an</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment"> extreme need for performance (e.g., you are building a gigabit-per-second</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment"> IP router), it is probably better to have cleaner code you can be most</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment"> certain about the security of.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment"></span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment"> The non-const UsefulBuf is usually used to refer a buffer to be filled in.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment"> The length is the size of the buffer.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment"></span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span> <span class="comment"> The const UsefulBufC is usually used to refer to some data that has been</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment"> filled in. The length is amount of valid data pointed to.</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> <span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> <span class="comment"> A common use is to pass a UsefulBuf to a function, the function fills it</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment"> in, the function returns a UsefulBufC. The pointer is the same in both.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment"></span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment"> A UsefulBuf is NULL, it has no value, when the ptr in it is NULL.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment"></span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment"> There are utility functions for the following:</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment">  - Checking for UsefulBufs that are NULL, empty or both</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment">  - Copying, copying with offset, copying head or tail</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment">  - Comparing and finding substrings</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment">  - Initializating</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment">  - Create initialized const UsefulBufC from compiler literals</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment">  - Create initialized const UsefulBufC from NULL-terminated string</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment">  - Make an empty UsefulBuf on the stack</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment"> See also UsefulOutBuf. It is a richer structure that has both the size of</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment"> the valid data and the size of the buffer.</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment"> UsefulBuf is only 16 or 8 bytes on a 64- or 32-bit machine so it can go</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> <span class="comment"> on the stack and be a function parameter or return value.</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment"> UsefulBuf is kind of like the Useful Pot Pooh gave Eeyore on his birthday.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment"> Eeyore's balloon fits beautifully, "it goes in and out like anything".</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment"></span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment">*/</span></div><div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="structuseful__buf__c.html">  149</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structuseful__buf__c.html">useful_buf_c</a> {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>     <span class="keyword">const</span> <span class="keywordtype">void</span> *ptr;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>     <span class="keywordtype">size_t</span>      len;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> } <a class="code" href="_useful_buf_8h.html#aa503215b93456499876f69f7261aed1f">UsefulBufC</a>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment"></span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment">/**</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment"> The non-const UsefulBuf typically used for some allocated memory</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="comment"> that is to be filled in. The len is the amount of memory,</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span> <span class="comment"> not the length of the valid data in the buffer.</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span> <span class="comment"> */</span></div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="structuseful__buf.html">  160</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structuseful__buf.html">useful_buf</a> {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>    <span class="keywordtype">void</span>  *ptr;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>    <span class="keywordtype">size_t</span> len;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> } <a class="code" href="_useful_buf_8h.html#adf4e4704600249b867d732b43afe3279">UsefulBuf</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> </div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment">/**</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment"> A "NULL" UsefulBufC is one that has no value in the same way a NULL pointer has no value.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment"> A UsefulBuf is NULL when the ptr field is NULL. It doesn't matter what len is.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment"> See UsefulBuf_IsEmpty() for the distinction between NULL and empty.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment"> */</span></div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">  171</a></span> <span class="preprocessor">#define NULLUsefulBufC  ((UsefulBufC) {NULL, 0})</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment">/** A NULL UsefulBuf is one that has no memory associated the say way</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment"> NULL points to nothing. It does not matter what len is.</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment"> */</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ac590bc10c66f484fe139b361fe01c339">  176</a></span> <span class="preprocessor">#define NULLUsefulBuf   ((UsefulBuf) {NULL, 0})</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> </div><div class="line"><a name="l00178"></a><span class="lineno">  178</span> <span class="comment"></span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment">/**</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span> <span class="comment"> @brief Check if a UsefulBuf is NULL or not</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> <span class="comment"></span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment"> @param[in] UB The UsefulBuf to check</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> <span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment"> @return 1 if it is NULL, 0 if not.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment"> */</span></div><div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a682553796f9ce5361bc9a70d4347444d">  186</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a682553796f9ce5361bc9a70d4347444d">UsefulBuf_IsNULL</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> UB) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">return</span> !UB.ptr;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> </div><div class="line"><a name="l00190"></a><span class="lineno">  190</span> <span class="comment"></span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> <span class="comment">/**</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment"> @brief Check if a UsefulBufC is NULL or not</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment"></span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment"> @param[in] UB The UsefulBufC to check</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> <span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> <span class="comment"> @return 1 if it is NULL, 0 if not.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment"> */</span></div><div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a5bfed827589d6ed9f53a650ddd58b58a">  198</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a5bfed827589d6ed9f53a650ddd58b58a">UsefulBuf_IsNULLC</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">return</span> !UB.ptr;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> </div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> <span class="comment"></span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment">/**</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment"> @brief Check if a UsefulBuf is empty or not</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment"> @param[in] UB The UsefulBuf to check</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment"> @return 1 if it is empty, 0 if not.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> <span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment"> An "Empty" UsefulBuf is one that has a value and can be considered to be set,</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment"> but that value is of zero length.  It is empty when len is zero. It</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment"> doesn't matter what the ptr is.</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment"></span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment"> A lot of uses will not need to clearly distinguish a NULL UsefulBuf</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment"> from an empty one and can have the ptr NULL and the len 0.  However</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment"> if a use of UsefulBuf needs to make a distinction then ptr should</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment"> not be NULL when the UsefulBuf is considered empty, but not NULL.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment"></span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment"> */</span></div><div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#af571fcde9e6463bfef16b30e2cd76c1f">  220</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#af571fcde9e6463bfef16b30e2cd76c1f">UsefulBuf_IsEmpty</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> UB) {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>    <span class="keywordflow">return</span> !UB.len;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment">/**</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment"> @brief Check if a UsefulBufC is empty or not</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment"> @param[in] UB The UsefulBufC to check</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment"></span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> <span class="comment"> @return 1 if it is empty, 0 if not.</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment"> */</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a64e21918b707e90e5a8af563eaaa1c5d">  232</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a64e21918b707e90e5a8af563eaaa1c5d">UsefulBuf_IsEmptyC</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>    <span class="keywordflow">return</span> !UB.len;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> </div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment">/**</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment"> @brief Check if a UsefulBuf is NULL or empty</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment"></span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="comment"> @param[in] UB The UsefulBuf to check</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> <span class="comment"></span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment"> @return 1 if it is either NULL or empty, 0 if not.</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="comment"> */</span></div><div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aeae9f4782b8555340d73e8d63ec2691e">  244</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#aeae9f4782b8555340d73e8d63ec2691e">UsefulBuf_IsNULLOrEmpty</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> UB) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>    <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#af571fcde9e6463bfef16b30e2cd76c1f">UsefulBuf_IsEmpty</a>(UB) || <a class="code" href="_useful_buf_8h.html#a682553796f9ce5361bc9a70d4347444d">UsefulBuf_IsNULL</a>(UB);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> </div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment"></span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment">/**</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="comment"> @brief Check if a UsefulBufC is NULL or empty</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment"> @param[in] UB The UsefulBufC to check</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="comment"> @return 1 if it is either NULL or empty, 0 if not.</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="comment"> */</span></div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aca503e3b347234429acf80e460e31cdd">  256</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#aca503e3b347234429acf80e460e31cdd">UsefulBuf_IsNULLOrEmptyC</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>    <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#a64e21918b707e90e5a8af563eaaa1c5d">UsefulBuf_IsEmptyC</a>(UB) || <a class="code" href="_useful_buf_8h.html#a5bfed827589d6ed9f53a650ddd58b58a">UsefulBuf_IsNULLC</a>(UB);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> </div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">/**</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment"> @brief Convert a non const UsefulBuf to a const UsefulBufC</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment"></span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span> <span class="comment"> @param[in] UB The UsefulBuf to convert</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> <span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> <span class="comment"> Returns: a UsefulBufC struct</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment"> */</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> </div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ad1b9924b51c67d6363fae93c0c6b4a95">  269</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#ad1b9924b51c67d6363fae93c0c6b4a95">UsefulBuf_Const</a>(<span class="keyword">const</span> <a class="code" href="structuseful__buf.html">UsefulBuf</a> UB)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>    <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){UB.ptr, UB.len};</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> }</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> </div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment"></span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">/**</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment"> @brief Convert a const UsefulBufC to a non-const UsefulBuf</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment"></span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="comment"> @param[in] UBC The UsefulBuf to convert</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> <span class="comment"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="comment"> Returns: a non const UsefulBuf struct</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment"> */</span></div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a12d237545f02c630dc59d1d9a4540df1">  282</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf.html">UsefulBuf</a> <a class="code" href="_useful_buf_8h.html#a12d237545f02c630dc59d1d9a4540df1">UsefulBuf_Unconst</a>(<span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UBC)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>    <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf.html">UsefulBuf</a>){(<span class="keywordtype">void</span> *)UBC.ptr, UBC.len};</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> </div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="comment"></span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment">/**</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment"> Convert a literal string to a UsefulBufC.</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment"> szString must be a literal string that you can take sizeof.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment"> This is better for literal strings than UsefulBuf_FromSZ()</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment"> because it generates less code. It will not work on</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="comment"> non-literal strings.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment"></span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment"> The terminating \0 (NULL) is NOT included in the length!</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment"></span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span> <span class="comment"> */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a778543dc5c8297cbfdc8b1716ebce423">  299</a></span> <span class="preprocessor">#define UsefulBuf_FROM_SZ_LITERAL(szString) \</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> <span class="preprocessor">    ((UsefulBufC) {(szString), sizeof(szString)-1})</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> </div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment">/**</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment"> Convert a literal byte array to a UsefulBufC.</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment"></span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment"> pBytes must be a literal string that you can take sizeof.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="comment"> It will not work on  non-literal arrays.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="comment"></span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> <span class="comment"> */</span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aacc60f139ca7be95de2de18e5ea966ee">  310</a></span> <span class="preprocessor">#define UsefulBuf_FROM_BYTE_ARRAY_LITERAL(pBytes) \</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> <span class="preprocessor">    ((UsefulBufC) {(pBytes), sizeof(pBytes)})</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> </div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment"></span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span> <span class="comment">/**</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> <span class="comment"> Make an automatic variable with name of type UsefulBuf and point it to a stack</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span> <span class="comment"> variable of the give size</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> <span class="comment"> */</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ace69a6220419dd9dc204770c5b87efb6">  318</a></span> <span class="preprocessor">#define  UsefulBuf_MAKE_STACK_UB(name, size) \</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="preprocessor">    uint8_t    __pBuf##name[(size)];\</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="preprocessor">    UsefulBuf  name = {__pBuf##name , sizeof( __pBuf##name )}</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> </div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment">/**</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment"> Make a byte array in to a UsefulBuf</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment"> */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a98eb36e1bdeab13b58d8a077d26bee86">  326</a></span> <span class="preprocessor">#define UsefulBuf_FROM_BYTE_ARRAY(pBytes) \</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="preprocessor">    ((UsefulBuf) {(pBytes), sizeof(pBytes)})</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="comment"></span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span> <span class="comment">/**</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> <span class="comment"> @brief Convert a NULL terminated string to a UsefulBufC.</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> <span class="comment"></span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> <span class="comment"> @param[in] szString The string to convert</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment"></span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment"> @return a UsefulBufC struct</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment"> UsefulBufC.ptr points to the string so it's lifetime</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment"> must be maintained.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment"></span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment"> The terminating \0 (NULL) is NOT included in the length!</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment"></span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment"> */</span></div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">  342</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *szString){</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>     <span class="keywordflow">return</span> ((<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>) {szString, strlen(szString)});</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> </div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment">/**</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment"> @brief Copy one UsefulBuf into another at an offset</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment"></span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment"> @param[in] Dest Destiation buffer to copy into</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment"> @param[in] uOffset The byte offset in Dest at which to copy to</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment"> @param[in] Src The bytes to copy</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment"></span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment"> @return Pointer and length of the copy</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment"></span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment"> This fails and returns NULLUsefulBufC Src.len + uOffset &gt; Dest.len.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment"></span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment"> Like memcpy, there is no check for NULL. If NULL is passed</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment"> this will crash.</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment"></span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment"> There is an assumption that there is valid data in Dest up to</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment"> uOffset as the resulting UsefulBufC returned starts</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment"> at the beginning of Dest and goes to Src.len + uOffset.</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment"></span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment"> */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#a82cbe966444cc482aaeef036ae801ebd">UsefulBuf_CopyOffset</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> Dest, <span class="keywordtype">size_t</span> uOffset, <span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Src);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> </div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment"></span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment">/**</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment"> @brief Copy one UsefulBuf into another</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment"></span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> <span class="comment"> @param[in] Dest The destination buffer to copy into</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment"> @param[out] Src  The source to copy from</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment"> @return filled in UsefulBufC on success, NULLUsefulBufC on failure</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment"> This fails if Src.len is greater than Dest.len.</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment"> Note that like memcpy, the pointers are not checked and</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment"> this will crash, rather than return NULLUsefulBufC if</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment"> they are NULL or invalid.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment"></span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment"> Results are undefined if Dest and Src overlap.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment"> */</span></div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#acb4fb99a895e5384d30814ca07756777">  386</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#acb4fb99a895e5384d30814ca07756777">UsefulBuf_Copy</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> Dest, <span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Src) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>    <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#a82cbe966444cc482aaeef036ae801ebd">UsefulBuf_CopyOffset</a>(Dest, 0, Src);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> </div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment">/**</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment"> @brief Set all bytes in a UsefulBuf to a value, for example 0</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment"> @param[in] pDest The destination buffer to copy into</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment"> @param[in] value The value to set the bytes to</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment"></span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment"> Note that like memset, the pointer in pDest is not checked and</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment"> this will crash if NULL or invalid.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment"> */</span></div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a71f9265753384286f3a1aaf394f00bf7">  401</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#a71f9265753384286f3a1aaf394f00bf7">UsefulBuf_Set</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> pDest, uint8_t value)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>    memset(pDest.ptr, value, pDest.len);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>    <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){pDest.ptr, pDest.len};</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span> </div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment"></span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment">/**</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment"> @brief Copy a pointer into a UsefulBuf</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment"> @param[in,out] Dest The destination buffer to copy into</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment"> @param[in] ptr  The source to copy from</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment"> @param[in] len  Length of the source; amoutn to copy</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> <span class="comment"></span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span> <span class="comment"> @return 0 on success, 1 on failure</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="comment"></span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span> <span class="comment"> This fails and returns NULLUsefulBufC if len is greater than</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span> <span class="comment"> pDest-&gt;len.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span> <span class="comment"></span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment"> Note that like memcpy, the pointers are not checked and</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment"> this will crash, rather than return 1 if they are NULL</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="comment"> or invalid.</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment"></span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span> <span class="comment"> */</span></div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a05579733aab2773ab445be396f744276">  425</a></span> <span class="keyword">inline</span> <span class="keyword">static</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#a05579733aab2773ab445be396f744276">UsefulBuf_CopyPtr</a>(<a class="code" href="structuseful__buf.html">UsefulBuf</a> Dest, <span class="keyword">const</span> <span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> len)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span> {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>    <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#acb4fb99a895e5384d30814ca07756777">UsefulBuf_Copy</a>(Dest, (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){ptr, len});</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span> </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> <span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span> <span class="comment">/**</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span> <span class="comment">  @brief Returns a truncation of a UsefulBufC</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="comment"></span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment">  @param[in] UB The buffer to get the head of</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment">  @param[in] uAmount The number of bytes in the head</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment">  @return A UsefulBufC that is the head of UB</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span> <span class="comment"></span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment"> */</span></div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ad8a21703d4dac011f8ecb3f695ee3c59">  440</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#ad8a21703d4dac011f8ecb3f695ee3c59">UsefulBuf_Head</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB, <span class="keywordtype">size_t</span> uAmount)</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>    <span class="keywordflow">if</span>(uAmount &gt; UB.len) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>       <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">NULLUsefulBufC</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>    }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>    <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){UB.ptr, uAmount};</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span> }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> </div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment"></span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment">/**</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> <span class="comment"> @brief  Returns bytes from the end of a UsefulBufC</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment"> @param[in] UB       The buffer to get the tail of</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment"> @param[in] uAmount  The offset from the start where the tail is to begin</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment"> @return A UsefulBufC that is the tail of UB or NULLUsefulBufC if</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment">         uAmount is greater than the length of the UsefulBufC</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span> <span class="comment"></span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span> <span class="comment"> If the input UsefulBufC is NULL, but the len is not, then the</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span> <span class="comment"> length of the tail will be calculated and returned along</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span> <span class="comment"> with a NULL ptr.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span> <span class="comment"> */</span></div><div class="line"><a name="l00462"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#adaceb62d7b73b18be451c06a5d2540e5">  462</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#adaceb62d7b73b18be451c06a5d2540e5">UsefulBuf_Tail</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB, <span class="keywordtype">size_t</span> uAmount)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span> {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>    <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> ReturnValue;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> </div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>    <span class="keywordflow">if</span>(uAmount &gt; UB.len) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>       ReturnValue = <a class="code" href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">NULLUsefulBufC</a>;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(UB.ptr == NULL) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>       ReturnValue = (<a class="code" href="_useful_buf_8h.html#aa503215b93456499876f69f7261aed1f">UsefulBufC</a>){NULL, UB.len - uAmount};</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>       ReturnValue = (<a class="code" href="_useful_buf_8h.html#aa503215b93456499876f69f7261aed1f">UsefulBufC</a>){(uint8_t *)UB.ptr + uAmount, UB.len - uAmount};</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>    }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>    <span class="keywordflow">return</span> ReturnValue;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> </div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment"></span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span> <span class="comment">/**</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="comment"> @brief Compare two UsefulBufCs</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> <span class="comment"></span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="comment"> @param[in] UB1 The destination buffer to copy into</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment"> @param[in] UB2  The source to copy from</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span> <span class="comment"></span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span> <span class="comment"> @return 0 if equal...</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span> <span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span> <span class="comment"> Returns a negative value if UB1 if is less than UB2. UB1 is</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span> <span class="comment"> less than UB2 if it is shorter or the first byte that is not</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span> <span class="comment"> the same is less.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span> <span class="comment"> Returns 0 if the UsefulBufs are the same.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment"> Returns a positive value if UB2 is less than UB1.</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment"></span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment"> All that is of significance is that the result is positive,</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment"> negative or 0. (This doesn't return the difference between</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span> <span class="comment"> the first non-matching byte like memcmp).</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment"> */</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#ab57b19dfa682d1806296f891bee01693">UsefulBuf_Compare</a>(<span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB1, <span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB2);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span> </div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment">/**</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span> <span class="comment"> @brief Find one UsefulBuf in another</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="comment"></span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span> <span class="comment"> @param[in] BytesToSearch  UsefulBuf to search through</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span> <span class="comment"> @param[in] BytesToFind    UsefulBuf with bytes to be found</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span> <span class="comment"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span> <span class="comment"> @return position of found bytes or SIZE_MAX if not found.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span> <span class="comment"></span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span> <span class="comment"> */</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span> <span class="keywordtype">size_t</span> <a class="code" href="_useful_buf_8h.html#a08a028eb81150d93fc1fc83b1ea7ac6b">UsefulBuf_FindBytes</a>(<a class="code" href="structuseful__buf__c.html">UsefulBufC</a> BytesToSearch, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> BytesToFind);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span> </div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> </div><div class="line"><a name="l00514"></a><span class="lineno">  514</span> </div><div class="line"><a name="l00515"></a><span class="lineno">  515</span> </div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> <span class="preprocessor">#if 0 // NOT_DEPRECATED</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span> <span class="comment">/** Deprecated macro; use UsefulBuf_FROM_SZ_LITERAL instead */</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span> <span class="preprocessor">#define SZLiteralToUsefulBufC(szString) \</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> <span class="preprocessor">    ((UsefulBufC) {(szString), sizeof(szString)-1})</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span> <span class="comment"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span> <span class="comment">/** Deprecated macro; use UsefulBuf_MAKE_STACK_UB instead */</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span> <span class="preprocessor">#define  MakeUsefulBufOnStack(name, size) \</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span> <span class="preprocessor">    uint8_t    __pBuf##name[(size)];\</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span> <span class="preprocessor">    UsefulBuf  name = {__pBuf##name , sizeof( __pBuf##name )}</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span> <span class="comment"></span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span> <span class="comment">/** Deprecated macro; use UsefulBuf_FROM_BYTE_ARRAY_LITERAL instead */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span> <span class="preprocessor">#define ByteArrayLiteralToUsefulBufC(pBytes) \</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span> <span class="preprocessor">    ((UsefulBufC) {(pBytes), sizeof(pBytes)})</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span> <span class="comment"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span> <span class="comment">/** Deprecated function; use UsefulBuf_Unconst() instead */</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf.html">UsefulBuf</a> UsefulBufC_Unconst(<span class="keyword">const</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UBC)</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span> {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>     <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf.html">UsefulBuf</a>){(<span class="keywordtype">void</span> *)UBC.ptr, UBC.len};</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span> }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span> </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span> </div><div class="line"><a name="l00538"></a><span class="lineno">  538</span> </div><div class="line"><a name="l00539"></a><span class="lineno">  539</span> <span class="comment">/*</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span> <span class="comment"> Convenient functions to avoid type punning, compiler warnings and such</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span> <span class="comment"> The optimizer reduces them to a simple assignment</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span> <span class="comment"> This is a crusty corner of C. It shouldn't be this hard.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span> <span class="comment"> */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t UsefulBufUtil_CopyFloatToUint32(<span class="keywordtype">float</span> f)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span> {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>     uint32_t u32;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>     memcpy(&amp;u32, &amp;f, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>     <span class="keywordflow">return</span> u32;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span> }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span> </div><div class="line"><a name="l00551"></a><span class="lineno">  551</span> <span class="keyword">static</span> <span class="keyword">inline</span> uint64_t UsefulBufUtil_CopyDoubleToUint64(<span class="keywordtype">double</span> d)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span> {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>     uint64_t u64;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>     memcpy(&amp;u64, &amp;d, <span class="keyword">sizeof</span>(uint64_t));</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>     <span class="keywordflow">return</span> u64;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span> }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span> </div><div class="line"><a name="l00558"></a><span class="lineno">  558</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> UsefulBufUtil_CopyUint64ToDouble(uint64_t u64)</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span> {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>     <span class="keywordtype">double</span> d;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>     memcpy(&amp;d, &amp;u64, <span class="keyword">sizeof</span>(uint64_t));</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>     <span class="keywordflow">return</span> d;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span> }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span> </div><div class="line"><a name="l00565"></a><span class="lineno">  565</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> UsefulBufUtil_CopyUint32ToFloat(uint32_t u32)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span> {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>     <span class="keywordtype">float</span> f;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>     memcpy(&amp;f, &amp;u32, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>     <span class="keywordflow">return</span> f;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span> }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span> </div><div class="line"><a name="l00572"></a><span class="lineno">  572</span> </div><div class="line"><a name="l00573"></a><span class="lineno">  573</span> </div><div class="line"><a name="l00574"></a><span class="lineno">  574</span> </div><div class="line"><a name="l00575"></a><span class="lineno">  575</span> <span class="comment"></span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span> <span class="comment">/**</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span> <span class="comment"> UsefulOutBuf is a structure and functions (an object) that are good</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span> <span class="comment"> for serializing data into a buffer such as is often done with network</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span> <span class="comment"> protocols or data written to files.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span> <span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span> <span class="comment"> The main idea is that all the pointer manipulation for adding data is</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span> <span class="comment"> done by UsefulOutBuf functions so the caller doesn't have to do any.</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span> <span class="comment"> All the pointer manipulation is centralized here.  This code will</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span> <span class="comment"> have been reviewed and written carefully so it spares the caller of</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span> <span class="comment"> much of this work and results in much safer code with much less work.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span> <span class="comment"></span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span> <span class="comment"> The functions to add data to the output buffer always check the</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span> <span class="comment"> length and will never write off the end of the output buffer. If an</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span> <span class="comment"> attempt to add data that will not fit is made, an internal error flag</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span> <span class="comment"> will be set and further attempts to add data will not do anything.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span> <span class="comment"></span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span> <span class="comment"> Basically, if you initialized with the correct buffer, there is no</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span> <span class="comment"> way to ever write off the end of that buffer when calling the Add</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span> <span class="comment"> and Insert functions here.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span> <span class="comment"></span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span> <span class="comment"> The functions to add data do not return an error. The working model</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span> <span class="comment"> is that the caller just makes all the calls to add data without any</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span> <span class="comment"> error checking on each one. The error is instead checked after all the</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span> <span class="comment"> data is added when the result is to be used.  This makes the caller's</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span> <span class="comment"> code cleaner.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span> <span class="comment"></span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span> <span class="comment"> There is a utility function to get the error status anytime along the</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span> <span class="comment"> way if the caller wants. There are functions to see how much room is</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span> <span class="comment"> left and see if some data will fit too, but their use is generally</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span> <span class="comment"> not necessary.</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span> <span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span> <span class="comment"> The general call flow is like this:</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span> <span class="comment"></span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span> <span class="comment">    - Initialize the UsefulOutBuf with the buffer that is to have the</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span> <span class="comment">      data added.  The caller allocates the buffer.  It can be heap</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span> <span class="comment">      or stack or shared memory (or other).</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span> <span class="comment"></span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span> <span class="comment">    - Make calls to add data to the output buffer. Insert and append</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span> <span class="comment">      are both supported. The append and insert calls will never write</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span> <span class="comment">      off the end of the buffer.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span> <span class="comment"></span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span> <span class="comment">    - When all data is added, check the error status to make sure</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span> <span class="comment">      everything fit.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span> <span class="comment"></span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span> <span class="comment">    - Get the resulting serialized data either as a UsefulBuf (a</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span> <span class="comment">      pointer and length) or have it copied to another buffer.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span> <span class="comment"></span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span> <span class="comment"> UsefulOutBuf can be initialized with just a buffer length by passing</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span> <span class="comment"> NULL as the pointer to the output buffer. This is useful if you want</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span> <span class="comment"> to go through the whole serialization process to either see if it</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span> <span class="comment"> will fit into a given buffer or compute the size of the buffer</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span> <span class="comment"> needed. Pass a very large buffer size when calling Init, if you want</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span> <span class="comment"> just to compute the size.</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span> <span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span> <span class="comment"> Some inexpensive simple sanity checks are performed before every data</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span> <span class="comment"> addition to guard against use of an uninitialized or corrupted</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span> <span class="comment"> UsefulOutBuf.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span> <span class="comment"></span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span> <span class="comment"> This has been used to create a CBOR encoder. The CBOR encoder has</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span> <span class="comment"> almost no pointer manipulation in it, is much easier to read, and</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span> <span class="comment"> easier to review.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span> <span class="comment"></span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span> <span class="comment"> A UsefulOutBuf is 27 bytes or 15 bytes on 64- or 32-bit machines so it</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span> <span class="comment"> can go on the stack or be a C99 function parameter.</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span> <span class="comment"> */</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span> </div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="structuseful__out__buf.html">  642</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structuseful__out__buf.html">useful_out_buf</a> {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>    <a class="code" href="structuseful__buf.html">UsefulBuf</a>  UB; <span class="comment">// Memory that is being output to</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>    <span class="keywordtype">size_t</span>     data_len;  <span class="comment">// length of the data</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>    uint16_t   magic; <span class="comment">// Used to detect corruption and lack of initialization</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>    uint8_t    err;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span> } <a class="code" href="_useful_buf_8h.html#a2bdc7b8c51dc874c4346c0dec8981674">UsefulOutBuf</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span> </div><div class="line"><a name="l00649"></a><span class="lineno">  649</span> <span class="comment"></span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span> <span class="comment">/**</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span> <span class="comment"> @brief Initialize and supply the actual output buffer</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span> <span class="comment"></span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span> <span class="comment"> @param[out] me The UsefulOutBuf to initialize</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span> <span class="comment"> @param[in] Storage  Buffer to output into</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span> <span class="comment"></span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span> <span class="comment"> Intializes the UsefulOutBuf with storage. Sets the current position</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span> <span class="comment"> to the beginning of the buffer clears the error.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span> <span class="comment"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span> <span class="comment"> This must be called before the UsefulOutBuf is used.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span> <span class="comment"> */</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a8ac63be86d630aeeb748cfd4491360f0">UsefulOutBuf_Init</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <a class="code" href="structuseful__buf.html">UsefulBuf</a> Storage);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span> </div><div class="line"><a name="l00663"></a><span class="lineno">  663</span> </div><div class="line"><a name="l00664"></a><span class="lineno">  664</span> </div><div class="line"><a name="l00665"></a><span class="lineno">  665</span> <span class="comment"></span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span> <span class="comment">/** Convenience marco to make a UsefulOutBuf on the stack and</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span> <span class="comment">   initialize it with stack buffer</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span> <span class="comment"> */</span></div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a54fed8f0b3943666846bae738004dfbe">  669</a></span> <span class="preprocessor">#define  UsefulOutBuf_MakeOnStack(name, size) \</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span> <span class="preprocessor">   uint8_t       __pBuf##name[(size)];\</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span> <span class="preprocessor">   UsefulOutBuf  name;\</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span> <span class="preprocessor">   UsefulOutBuf_Init(&amp;(name), (UsefulBuf){__pBuf##name, (size)});</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span> </div><div class="line"><a name="l00674"></a><span class="lineno">  674</span> </div><div class="line"><a name="l00675"></a><span class="lineno">  675</span> <span class="comment"></span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span> <span class="comment">/**</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span> <span class="comment"> @brief Reset a UsefulOutBuf for re use</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span> <span class="comment"></span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span> <span class="comment"></span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span> <span class="comment"> This sets the amount of data in the output buffer to none and</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span> <span class="comment"> clears the error state.</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span> <span class="comment"></span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span> <span class="comment"> The output buffer is still the same one and size as from the</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span> <span class="comment"> UsefulOutBuf_Init() call.</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span> <span class="comment"></span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span> <span class="comment"> It doesn't zero the data, just resets to 0 bytes of valid data.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span> <span class="comment"> */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a0f9b5d672b2eca8dc93700107acfb2be">  689</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a0f9b5d672b2eca8dc93700107acfb2be">UsefulOutBuf_Reset</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span> {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>    me-&gt;data_len = 0;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>    me-&gt;err    = 0;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span> }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span> </div><div class="line"><a name="l00695"></a><span class="lineno">  695</span> <span class="comment"></span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span> <span class="comment">/**</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span> <span class="comment"> @brief Returns position of end of data in the UsefulOutBuf</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span> <span class="comment"></span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span> <span class="comment"></span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span> <span class="comment"> @return position of end of data</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span> <span class="comment"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span> <span class="comment"> On a freshly initialized UsefulOutBuf with no data added, this will</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span> <span class="comment"> return 0. After ten bytes have been added, it will return 10 and so</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span> <span class="comment"> on.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span> <span class="comment"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span> <span class="comment"> Generally callers will not need this function for most uses of</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span> <span class="comment"> UsefulOutBuf.</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span> <span class="comment"></span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span> <span class="comment"> */</span></div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">  711</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me)</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span> {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>    <span class="keywordflow">return</span> me-&gt;data_len;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span> }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span> </div><div class="line"><a name="l00716"></a><span class="lineno">  716</span> <span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span> <span class="comment">/**</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span> <span class="comment"> @brief Returns whether any data has been added to the UsefulOutBuf</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span> <span class="comment"></span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span> <span class="comment"></span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span> <span class="comment"> @return 1 if output position is at start</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span> <span class="comment"></span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span> <span class="comment"> */</span></div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a7a1fb78b1a9331ee1214121dc8fb6272">  725</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a7a1fb78b1a9331ee1214121dc8fb6272">UsefulOutBuf_AtStart</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me)</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span> {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">return</span> 0 == me-&gt;data_len;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span> }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span> </div><div class="line"><a name="l00730"></a><span class="lineno">  730</span> <span class="comment"></span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span> <span class="comment">/**</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span> <span class="comment"> @brief Inserts bytes into the UsefulOutBuf</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span> <span class="comment"></span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span> <span class="comment"> @param[in] NewData UsefulBuf with the bytes to insert</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span> <span class="comment"></span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span> <span class="comment"> NewData is the pointer and length for the bytes to be added to the</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span> <span class="comment"> output buffer. There must be room in the output buffer for all of</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span> <span class="comment"> NewData or an error will occur.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span> <span class="comment"></span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span> <span class="comment"> The insertion point must be between 0 and the current valid data. If</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span> <span class="comment"> not an error will occur. Appending data to the output buffer is</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span> <span class="comment"> achieved by inserting at the end of the valid data. This can be</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span> <span class="comment"> retrieved by calling UsefulOutBuf_GetEndPosition().</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span> <span class="comment"></span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span> <span class="comment"> When insertion is performed, the bytes between the insertion point and</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span> <span class="comment"> the end of data previously added to the output buffer is slid to the</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span> <span class="comment"> right to make room for the new data.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span> <span class="comment"></span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span> <span class="comment"> Overlapping buffers are OK. NewData can point to data in the output</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span> <span class="comment"> buffer.</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span> <span class="comment"></span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span> <span class="comment"> If an error occurs an error state is set in the UsefulOutBuf. No</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span> <span class="comment"> error is returned.  All subsequent attempts to add data will do</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span> <span class="comment"> nothing.</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span> <span class="comment"></span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span> <span class="comment"> Call UsefulOutBuf_GetError() to find out if there is an error. This</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span> <span class="comment"> is usually not needed until all additions of data are complete.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span> <span class="comment"></span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span> <span class="comment"> */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ad3d48f0714f1a12aad93e8513f587b1a">UsefulOutBuf_InsertUsefulBuf</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> NewData, <span class="keywordtype">size_t</span> uPos);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span> </div><div class="line"><a name="l00764"></a><span class="lineno">  764</span> <span class="comment"></span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span> <span class="comment">/**</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span> <span class="comment"> @brief Insert a data buffer into the UsefulOutBuf</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span> <span class="comment"></span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span> <span class="comment"> @param[in] pBytes Pointer to the bytes to insert</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span> <span class="comment"> @param[in] uLen Length of the bytes to insert</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span> <span class="comment"></span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span> <span class="comment"> the difference being a pointer and length is passed in rather than an</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span> <span class="comment"> UsefulBuf.</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span> <span class="comment"></span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span> <span class="comment"> */</span></div><div class="line"><a name="l00778"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">  778</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBytes, <span class="keywordtype">size_t</span> uLen, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span> {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>    <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Data = {pBytes, uLen};</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>    <a class="code" href="_useful_buf_8h.html#ad3d48f0714f1a12aad93e8513f587b1a">UsefulOutBuf_InsertUsefulBuf</a>(me, Data, uPos);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span> }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span> </div><div class="line"><a name="l00784"></a><span class="lineno">  784</span> <span class="comment"></span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span> <span class="comment">/**</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span> <span class="comment"> @brief Insert a NULL-terminated string into the UsefulOutBuf</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span> <span class="comment"></span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span> <span class="comment"> @param[in] szString string to append</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span> <span class="comment"></span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span> <span class="comment"> */</span></div><div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ad1dfb319f1c101a0e555e9b00bac0597">  792</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ad1dfb319f1c101a0e555e9b00bac0597">UsefulOutBuf_InsertString</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span> {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>    <a class="code" href="_useful_buf_8h.html#ad3d48f0714f1a12aad93e8513f587b1a">UsefulOutBuf_InsertUsefulBuf</a>(me, (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){szString, strlen(szString)}, uPos);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span> }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span> </div><div class="line"><a name="l00797"></a><span class="lineno">  797</span> <span class="comment"></span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span> <span class="comment">/**</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span> <span class="comment"> @brief Insert a byte into the UsefulOutBuf</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span> <span class="comment"></span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span> <span class="comment"> @param[in] byte Bytes to insert</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span> <span class="comment"></span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span> <span class="comment"> */</span></div><div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a67047ae2935388ca979de7a9083a427c">  808</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a67047ae2935388ca979de7a9083a427c">UsefulOutBuf_InsertByte</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint8_t byte, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span> {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>    <a class="code" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a>(me, &amp;byte, 1, uPos);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span> }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span> </div><div class="line"><a name="l00813"></a><span class="lineno">  813</span> <span class="comment"></span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span> <span class="comment">/**</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span> <span class="comment"> @brief Insert a 16-bit integer into the UsefulOutBuf</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span> <span class="comment"></span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span> <span class="comment"> @param[in] uInteger16 Integer to insert</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span> <span class="comment"></span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span> <span class="comment"></span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span> <span class="comment"> The integer will be inserted in network byte order (big endian)</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span> <span class="comment"> */</span></div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ad04a42b8dadd7839c207f1f50e3862ce">  826</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ad04a42b8dadd7839c207f1f50e3862ce">UsefulOutBuf_InsertUint16</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint16_t uInteger16, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span> {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>    <span class="comment">// Converts native integer format to network byte order (big endian)</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>    uint8_t tmp[2];</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>    tmp[0] = (uInteger16 &amp; 0xff00) &gt;&gt; 8;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>    tmp[1] = (uInteger16 &amp; 0xff);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>    <a class="code" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a>(me, tmp, 2, uPos);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span> }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span> </div><div class="line"><a name="l00835"></a><span class="lineno">  835</span> <span class="comment"></span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span> <span class="comment">/**</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span> <span class="comment"> @brief Insert a 32-bit integer into the UsefulOutBuf</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span> <span class="comment"></span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span> <span class="comment"> @param[in] uInteger32 Integer to insert</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span> <span class="comment"></span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span> <span class="comment"></span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span> <span class="comment"> The integer will be inserted in network byte order (big endian)</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span> <span class="comment"> */</span></div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a20b86b62bed3089bfa8fb2a4991add52">  848</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a20b86b62bed3089bfa8fb2a4991add52">UsefulOutBuf_InsertUint32</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint32_t uInteger32, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span> {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>    <span class="comment">// Converts native integer format to network byte order (big endian)</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>    uint8_t tmp[4];</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>    tmp[0] = (uInteger32 &amp; 0xff000000) &gt;&gt; 24;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>    tmp[1] = (uInteger32 &amp; 0xff0000) &gt;&gt; 16;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>    tmp[2] = (uInteger32 &amp; 0xff00) &gt;&gt; 8;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>    tmp[3] = (uInteger32 &amp; 0xff);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>    <a class="code" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a>(me, tmp, 4, uPos);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span> }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span> </div><div class="line"><a name="l00859"></a><span class="lineno">  859</span> <span class="comment"></span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span> <span class="comment">/**</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span> <span class="comment"> @brief Insert a 64-bit integer into the UsefulOutBuf</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span> <span class="comment"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span> <span class="comment"> @param[in] uInteger64 Integer to insert</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span> <span class="comment"></span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span> <span class="comment"></span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span> <span class="comment"> The integer will be inserted in network byte order (big endian)</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span> <span class="comment"> */</span></div><div class="line"><a name="l00872"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ab1cc8120590ddb6e5b266d1d538a93e8">  872</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ab1cc8120590ddb6e5b266d1d538a93e8">UsefulOutBuf_InsertUint64</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint64_t uInteger64, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span> {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>    <span class="comment">// Converts native integer format to network byte order (big endian)</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>    uint8_t tmp[8];</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>    tmp[0] = (uInteger64 &amp; 0xff00000000000000) &gt;&gt; 56;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>    tmp[1] = (uInteger64 &amp; 0xff000000000000) &gt;&gt; 48;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>    tmp[2] = (uInteger64 &amp; 0xff0000000000) &gt;&gt; 40;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>    tmp[3] = (uInteger64 &amp; 0xff00000000) &gt;&gt; 32;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>    tmp[4] = (uInteger64 &amp; 0xff000000) &gt;&gt; 24;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>    tmp[5] = (uInteger64 &amp; 0xff0000) &gt;&gt; 16;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>    tmp[6] = (uInteger64 &amp; 0xff00) &gt;&gt; 8;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>    tmp[7] = (uInteger64 &amp; 0xff);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>    <a class="code" href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a>(me, tmp, 8, uPos);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span> }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span> </div><div class="line"><a name="l00887"></a><span class="lineno">  887</span> <span class="comment"></span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span> <span class="comment">/**</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span> <span class="comment"> @brief Insert a float into the UsefulOutBuf</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span> <span class="comment"></span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span> <span class="comment"> @param[in] f Integer to insert</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span> <span class="comment"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span> <span class="comment"></span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span> <span class="comment"> The float will be inserted in network byte order (big endian)</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span> <span class="comment"> */</span></div><div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ae9423b177458f7a57b4cc7aa1174842f">  900</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ae9423b177458f7a57b4cc7aa1174842f">UsefulOutBuf_InsertFloat</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keywordtype">float</span> f, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span> {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>    <a class="code" href="_useful_buf_8h.html#a20b86b62bed3089bfa8fb2a4991add52">UsefulOutBuf_InsertUint32</a>(me, UsefulBufUtil_CopyFloatToUint32(f), uPos);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span> }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span> </div><div class="line"><a name="l00905"></a><span class="lineno">  905</span> <span class="comment"></span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span> <span class="comment">/**</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span> <span class="comment"> @brief Insert a double into the UsefulOutBuf</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span> <span class="comment"></span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBul</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span> <span class="comment"> @param[in] d Integer to insert</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span> <span class="comment"> @param[in] uPos Index in output buffer at which to insert</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span> <span class="comment"></span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This is the same with</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span> <span class="comment"> the difference being a single byte is to be inserted.</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span> <span class="comment"></span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span> <span class="comment"> The double will be inserted in network byte order (big endian)</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span> <span class="comment"> */</span></div><div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a1d96e1916fbcef14e2294b91b10a2f5c">  918</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a1d96e1916fbcef14e2294b91b10a2f5c">UsefulOutBuf_InsertDouble</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keywordtype">double</span> d, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span> {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>    <a class="code" href="_useful_buf_8h.html#ab1cc8120590ddb6e5b266d1d538a93e8">UsefulOutBuf_InsertUint64</a>(me, UsefulBufUtil_CopyDoubleToUint64(d), uPos);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span> }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span> </div><div class="line"><a name="l00923"></a><span class="lineno">  923</span> </div><div class="line"><a name="l00924"></a><span class="lineno">  924</span> <span class="comment"></span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span> <span class="comment">/**</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span> <span class="comment"> Append a UsefulBuf into the UsefulOutBuf</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span> <span class="comment"></span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span> <span class="comment"> @param[in] NewData UsefulBuf with the bytes to append</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span> <span class="comment"></span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span> <span class="comment"></span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span> <span class="comment">*/</span></div><div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aaa035d1d6051edb16815d711e004a206">  935</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#aaa035d1d6051edb16815d711e004a206">UsefulOutBuf_AppendUsefulBuf</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> NewData)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span> {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>    <span class="comment">// An append is just a insert at the end</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>    <a class="code" href="_useful_buf_8h.html#ad3d48f0714f1a12aad93e8513f587b1a">UsefulOutBuf_InsertUsefulBuf</a>(me, NewData, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span> }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span> </div><div class="line"><a name="l00941"></a><span class="lineno">  941</span> <span class="comment"></span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span> <span class="comment">/**</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span> <span class="comment"> Append bytes to the UsefulOutBuf</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span> <span class="comment"></span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span> <span class="comment"> @param[in] pBytes Pointer to bytes to append</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span> <span class="comment"> @param[in] uLen Index in output buffer at which to append</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span> <span class="comment"></span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span> <span class="comment"> */</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span> </div><div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ac85e6f98b8771d499ffe31b3b74fca1f">  953</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ac85e6f98b8771d499ffe31b3b74fca1f">UsefulOutBuf_AppendData</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keyword">const</span> <span class="keywordtype">void</span> *pBytes, <span class="keywordtype">size_t</span> uLen)</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span> {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>    <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Data = {pBytes, uLen};</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>    <a class="code" href="_useful_buf_8h.html#aaa035d1d6051edb16815d711e004a206">UsefulOutBuf_AppendUsefulBuf</a>(me, Data);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span> }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span> </div><div class="line"><a name="l00959"></a><span class="lineno">  959</span> <span class="comment"></span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span> <span class="comment">/**</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span> <span class="comment"> Append a NULL-terminated string to the UsefulOutBuf</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span> <span class="comment"></span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span> <span class="comment"> @param[in] szString string to append</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span> <span class="comment"></span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span> <span class="comment"> */</span></div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ac041e850e35371e9a4509ca39bb07bc7">  967</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#ac041e850e35371e9a4509ca39bb07bc7">UsefulOutBuf_AppendString</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString)</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span> {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>    <a class="code" href="_useful_buf_8h.html#aaa035d1d6051edb16815d711e004a206">UsefulOutBuf_AppendUsefulBuf</a>(me, (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){szString, strlen(szString)});</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span> }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span> </div><div class="line"><a name="l00972"></a><span class="lineno">  972</span> <span class="comment"></span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span> <span class="comment">/**</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span> <span class="comment"> @brief Append a byte to the UsefulOutBuf</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span> <span class="comment"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span> <span class="comment"> @param[in] byte Bytes to append</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span> <span class="comment"></span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span> <span class="comment"> */</span></div><div class="line"><a name="l00982"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a52338bb99011e31abc9267611a7da2b0">  982</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a52338bb99011e31abc9267611a7da2b0">UsefulOutBuf_AppendByte</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint8_t byte)</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span> {</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>    <a class="code" href="_useful_buf_8h.html#ac85e6f98b8771d499ffe31b3b74fca1f">UsefulOutBuf_AppendData</a>(me, &amp;byte, 1);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span> }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span> <span class="comment"></span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span> <span class="comment">/**</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span> <span class="comment"> @brief Append an integer to the UsefulOutBuf</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span> <span class="comment"></span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span> <span class="comment"> @param[in] uInteger16 Integer to append</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span> <span class="comment"></span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span> <span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span> <span class="comment"> The integer will be appended in network byte order (big endian).</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span> <span class="comment"> */</span></div><div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a47e6b3d192d2b6083ad0aa4a223de4da">  998</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a47e6b3d192d2b6083ad0aa4a223de4da">UsefulOutBuf_AppendUint16</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint16_t uInteger16){</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>    <a class="code" href="_useful_buf_8h.html#ad04a42b8dadd7839c207f1f50e3862ce">UsefulOutBuf_InsertUint16</a>(me, uInteger16, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span> }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span> <span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span> <span class="comment">/**</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span> <span class="comment"> @brief Append an integer to the UsefulOutBuf</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span> <span class="comment"></span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span> <span class="comment"> @param[in] uInteger32 Integer to append</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span> <span class="comment"></span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span> <span class="comment"></span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span> <span class="comment"> The integer will be appended in network byte order (big endian).</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span> <span class="comment"> */</span></div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#af8ee695f5fd5ec2360eddc4668b70d55"> 1013</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#af8ee695f5fd5ec2360eddc4668b70d55">UsefulOutBuf_AppendUint32</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint32_t uInteger32){</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>    <a class="code" href="_useful_buf_8h.html#a20b86b62bed3089bfa8fb2a4991add52">UsefulOutBuf_InsertUint32</a>(me, uInteger32, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span> }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span> <span class="comment"></span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span> <span class="comment">/**</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span> <span class="comment"> @brief Append an integer to the UsefulOutBuf</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span> <span class="comment"></span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span> <span class="comment"> @param[in] uInteger64 Integer to append</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span> <span class="comment"></span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span> <span class="comment"></span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span> <span class="comment"> The integer will be appended in network byte order (big endian).</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span> <span class="comment"> */</span></div><div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aa490ed52e9645f3c0872b47ffd8b66db"> 1028</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#aa490ed52e9645f3c0872b47ffd8b66db">UsefulOutBuf_AppendUint64</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, uint64_t uInteger64){</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>    <a class="code" href="_useful_buf_8h.html#ab1cc8120590ddb6e5b266d1d538a93e8">UsefulOutBuf_InsertUint64</a>(me, uInteger64, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span> }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span> </div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span> <span class="comment"></span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span> <span class="comment">/**</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span> <span class="comment"> @brief Append a float to the UsefulOutBuf</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span> <span class="comment"></span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span> <span class="comment"> @param[in] f Float to append</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span> <span class="comment"></span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span> <span class="comment"></span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span> <span class="comment"> The float will be appended in network byte order (big endian).</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span> <span class="comment"> */</span></div><div class="line"><a name="l01044"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a3e7daafc8802edc82014807b9cdab86e"> 1044</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a3e7daafc8802edc82014807b9cdab86e">UsefulOutBuf_AppendFloat</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keywordtype">float</span> f){</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>    <a class="code" href="_useful_buf_8h.html#ae9423b177458f7a57b4cc7aa1174842f">UsefulOutBuf_InsertFloat</a>(me, f, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span> }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span> <span class="comment"></span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span> <span class="comment">/**</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span> <span class="comment"> @brief Append a float to the UsefulOutBuf</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span> <span class="comment"></span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span> <span class="comment"> @param[in] d Double to append</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span> <span class="comment"></span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span> <span class="comment"> See UsefulOutBuf_InsertUsefulBuf() for details. This does the same</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span> <span class="comment"> with the insertion point at the end of the valid data.</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span> <span class="comment"></span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span> <span class="comment"> The double will be appended in network byte order (big endian).</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span> <span class="comment"> */</span></div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#afd3cfd1f368b9d44860f861a3e238878"> 1059</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#afd3cfd1f368b9d44860f861a3e238878">UsefulOutBuf_AppendDouble</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keywordtype">double</span> d){</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>    <a class="code" href="_useful_buf_8h.html#a1d96e1916fbcef14e2294b91b10a2f5c">UsefulOutBuf_InsertDouble</a>(me, d, <a class="code" href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a>(me));</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span> }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span> <span class="comment"></span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span> <span class="comment">/**</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span> <span class="comment"> @brief Returns the current error status</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span> <span class="comment"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span> <span class="comment"></span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span> <span class="comment"> @return 0 if all OK, 1 on error</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span> <span class="comment"></span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span> <span class="comment"> This is the error status since the call to either</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span> <span class="comment"> UsefulOutBuf_Reset() of UsefulOutBuf_Init().  Once it goes into error</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span> <span class="comment"> state it will stay until one of those functions is called.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span> <span class="comment"></span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span> <span class="comment"> Possible error conditions are:</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span> <span class="comment">   - bytes to be inserted will not fit</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span> <span class="comment">   - insertion point is out of buffer or past valid data</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span> <span class="comment">   - current position is off end of buffer (probably corruption or uninitialized)</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span> <span class="comment">   - detect corruption / uninitialized by bad magic number</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span> <span class="comment"> */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span> </div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a77c438f357f395c98e0613e592f0656a"> 1081</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a77c438f357f395c98e0613e592f0656a">UsefulOutBuf_GetError</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me)</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span> {</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>    <span class="keywordflow">return</span> me-&gt;err;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span> }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span> </div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span> <span class="comment"></span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span> <span class="comment">/**</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span> <span class="comment"> @brief Returns number of bytes unused used in the output buffer</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span> <span class="comment"></span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span> <span class="comment"></span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span> <span class="comment"> @return Number of unused bytes or zero</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span> <span class="comment"></span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span> <span class="comment"> Because of the error handling strategy and checks in UsefulOutBuf_InsertUsefulBuf()</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span> <span class="comment"> it is usually not necessary to use this.</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span> <span class="comment"> */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span> </div><div class="line"><a name="l01098"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a9907b47af6b49d02cfa893d8d0665bb3"> 1098</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="_useful_buf_8h.html#a9907b47af6b49d02cfa893d8d0665bb3">UsefulOutBuf_RoomLeft</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me)</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span> {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>    <span class="keywordflow">return</span> me-&gt;UB.len - me-&gt;data_len;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span> }</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span> </div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span> <span class="comment"></span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span> <span class="comment">/**</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span> <span class="comment"> @brief Returns true / false if some number of bytes will fit in the UsefulOutBuf</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span> <span class="comment"></span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span> <span class="comment"> @param[in] uLen Number of bytes for which to check</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span> <span class="comment"></span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span> <span class="comment"> @return 1 or 0 if nLen bytes would fit</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span> <span class="comment"></span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span> <span class="comment"> Because of the error handling strategy and checks in UsefulOutBuf_InsertUsefulBuf()</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span> <span class="comment"> it is usually not necessary to use this.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span> <span class="comment"> */</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span> </div><div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ad5357993f7cc22ad8c75a9894ca2d8b1"> 1116</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#ad5357993f7cc22ad8c75a9894ca2d8b1">UsefulOutBuf_WillItFit</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <span class="keywordtype">size_t</span> uLen)</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span> {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>    <span class="keywordflow">return</span> uLen &lt;= <a class="code" href="_useful_buf_8h.html#a9907b47af6b49d02cfa893d8d0665bb3">UsefulOutBuf_RoomLeft</a>(me);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span> }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span> </div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span> <span class="comment"></span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span> <span class="comment">/**</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span> <span class="comment">   @brief Returns the resulting valid data in a UsefulOutBuf</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span> <span class="comment"></span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span> <span class="comment">   @param[in] me Pointer to the UsefulOutBuf.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span> <span class="comment"></span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span> <span class="comment">   @return The valid data in UsefulOutBuf.</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span> <span class="comment"></span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span> <span class="comment">   The storage for the returned data is Storage parameter passed</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span> <span class="comment">   to UsefulOutBuf_Init(). See also UsefulOutBuf_CopyOut().</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span> <span class="comment"></span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span> <span class="comment">   This can be called anytime and many times to get intermediate</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span> <span class="comment">   results. It doesn't change the data or reset the current position</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span> <span class="comment">   so you can keep adding data.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span> <span class="comment"> */</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span> </div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#abda41e435b1d4464b9519005b1b01144">UsefulOutBuf_OutUBuf</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span> </div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span> <span class="comment"></span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span> <span class="comment">/**</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span> <span class="comment"> @brief Copies the valid data out into a supplied buffer</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span> <span class="comment"></span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span> <span class="comment"> @param[in] me Pointer to the UsefulOutBuf</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span> <span class="comment"> @param[out] Dest The destination buffer to copy into</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span> <span class="comment"></span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span> <span class="comment"> @return Pointer and length of copied data.</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span> <span class="comment"></span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span> <span class="comment"> This is the same as UsefulOutBuf_OutUBuf() except it copies the data.</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span> <span class="comment">*/</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span> </div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#a7f5873f5e6697f2bbd6226f5d3ad4594">UsefulOutBuf_CopyOut</a>(<a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a> *me, <a class="code" href="structuseful__buf.html">UsefulBuf</a> Dest);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span> </div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span> </div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span> </div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span> </div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span> </div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span> </div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span> </div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span> </div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span> </div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span> </div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span> </div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span> </div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span> <span class="comment"></span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span> <span class="comment">/**</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span> <span class="comment"> UsefulInputBuf is the counterpart to UsefulOutBuf and is for parsing</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span> <span class="comment"> data read or received.  Initialize it with the data</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span> <span class="comment"> from the network and its length. Then  use the functions</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span> <span class="comment"> here to get the various data types out of it. It maintains a position</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span> <span class="comment"> for getting the next item. This means you don't have to track a</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span> <span class="comment"> pointer as you get each object. UsefulInputBuf does that for you and</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span> <span class="comment"> makes sure it never goes off the end of the buffer.  The QCBOR</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span> <span class="comment"> implementation parser makes use of this for all its pointer math and</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span> <span class="comment"> length checking.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span> <span class="comment"></span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span> <span class="comment"> UsefulInputBuf also maintains an internal error state so you do not have</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span> <span class="comment"> to. Once data has been requested off the end of the buffer, it goes</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span> <span class="comment"> into an error state. You can keep calling functions to get more data</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span> <span class="comment"> but they will either return 0 or NULL. As long as you don't</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span> <span class="comment"> dereference the NULL, you can wait until all data items have been</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span> <span class="comment"> fetched before checking for the error and this can simplify your</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span> <span class="comment"> code.</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span> <span class="comment"></span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span> <span class="comment"> The integer and float parsing expects network byte order (big endian).</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span> <span class="comment"> Network byte order is what is used by TCP/IP, CBOR and most internet</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span> <span class="comment"> protocols.</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span> <span class="comment"></span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span> <span class="comment"> Lots of inlining is used to keep code size down. The code optimizer,</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span> <span class="comment"> particularly with the -Os, also reduces code size a lot. The only</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span> <span class="comment"> non-inline code is UsefulInputBuf_GetBytes() which is less than 100</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span> <span class="comment"> bytes so use of UsefulInputBuf doesn't add much code for all the messy</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span> <span class="comment"> hard-to-get right issues with parsing in C that is solves.</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span> <span class="comment"></span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span> <span class="comment"> The parse context size is:</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span> <span class="comment">   64-bit machine: 16 + 8 + 2 + 1 (5 bytes padding to align) = 32 bytes</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span> <span class="comment">   32-bit machine: 8 + 4 + 2 + 1 (1 byte padding to align) = 16 bytes</span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span> <span class="comment"></span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span> <span class="comment"> */</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span> </div><div class="line"><a name="l01200"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#af1e8acba0f0d344d630494c9bd76ec7b"> 1200</a></span> <span class="preprocessor">#define UIB_MAGIC (0xB00F)</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span> </div><div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="structuseful__input__buf.html"> 1202</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structuseful__input__buf.html">useful_input_buf</a> {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>    <span class="comment">// Private data structure</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>    <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB;     <span class="comment">// Data being parsed</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>    <span class="keywordtype">size_t</span>     cursor; <span class="comment">// Current offset in data being parse</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>    uint16_t   magic;  <span class="comment">// Check for corrupted or uninitialized UsefulInputBuf</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>    uint8_t    err;    <span class="comment">// Set request goes off end or magic number is bad</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span> } <a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span> </div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span> </div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span> <span class="comment"></span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span> <span class="comment">/**</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span> <span class="comment"> @brief Initialize the UsefulInputBuf structure before use.</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span> <span class="comment"></span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf instance.</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span> <span class="comment"> @param[in] UB Pointer to the data to parse.</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span> <span class="comment"></span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span> <span class="comment"> */</span></div><div class="line"><a name="l01219"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a9f0dfe64ae33da2b7c717813ffbc74cb"> 1219</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a9f0dfe64ae33da2b7c717813ffbc74cb">UsefulInputBuf_Init</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> UB)</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span> {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>    me-&gt;cursor = 0;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>    me-&gt;err    = 0;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>    me-&gt;magic  = <a class="code" href="_useful_buf_8h.html#af1e8acba0f0d344d630494c9bd76ec7b">UIB_MAGIC</a>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>    me-&gt;UB     = UB;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span> }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span> </div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span> <span class="comment"></span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span> <span class="comment">/**</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span> <span class="comment"> @brief Returns current position in input buffer</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span> <span class="comment"></span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span> <span class="comment"></span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span> <span class="comment"> @return Integer position of the cursor</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span> <span class="comment"></span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span> <span class="comment"> The position that the next bytes will be returned from.</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span> <span class="comment"></span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span> <span class="comment"> */</span></div><div class="line"><a name="l01238"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a93379fb3d2d675a013be69f2b4c3f7d9"> 1238</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="_useful_buf_8h.html#a93379fb3d2d675a013be69f2b4c3f7d9">UsefulInputBuf_Tell</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span> {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>    <span class="keywordflow">return</span> me-&gt;cursor;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span> }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span> </div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span> <span class="comment"></span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span> <span class="comment">/**</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span> <span class="comment"> @brief Sets current position in input buffer</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span> <span class="comment"></span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span> <span class="comment"> @param[in] uPos  Position to set to</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span> <span class="comment"></span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span> <span class="comment"> If the position is off the end of the input buffer, the error state</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span> <span class="comment"> is entered and all functions will do nothing.</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span> <span class="comment"></span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span> <span class="comment"> Seeking to a valid position in the buffer will not reset the error</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span> <span class="comment"> state. Only re initialization will do that.</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span> <span class="comment"></span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span> <span class="comment"> */</span></div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a8a083d644035e40efd72039a9532ac9c"> 1257</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="_useful_buf_8h.html#a8a083d644035e40efd72039a9532ac9c">UsefulInputBuf_Seek</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me, <span class="keywordtype">size_t</span> uPos)</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span> {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>    <span class="keywordflow">if</span>(uPos &gt; me-&gt;UB.len) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>       me-&gt;err = 1;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>       me-&gt;cursor = uPos;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>    }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span> }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span> </div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span> <span class="comment"></span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span> <span class="comment">/**</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span> <span class="comment"> @brief Returns the number of bytes from the cursor to the end of the buffer,</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span> <span class="comment"> the uncomsummed bytes.</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span> <span class="comment"></span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span> <span class="comment"></span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span> <span class="comment"> @return number of bytes unconsumed or 0 on error.</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span> <span class="comment"></span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span> <span class="comment"> This is a critical function for input length validation. This does</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span> <span class="comment"> some pointer / offset math.</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span> <span class="comment"></span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span> <span class="comment"> Returns 0 if the cursor it invalid or corruption of the structure is</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span> <span class="comment"> detected.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span> <span class="comment"></span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span> <span class="comment"> Code Reviewers: THIS FUNCTION DOES POINTER MATH</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span> <span class="comment"> */</span></div><div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aee57e20428005d3b2f5a958de36be2c9"> 1283</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="_useful_buf_8h.html#aee57e20428005d3b2f5a958de36be2c9">UsefulInputBuf_BytesUnconsumed</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span> {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>    <span class="comment">// Magic number is messed up. Either the structure got overwritten</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>    <span class="comment">// or was never initialized.</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>    <span class="keywordflow">if</span>(me-&gt;magic != <a class="code" href="_useful_buf_8h.html#af1e8acba0f0d344d630494c9bd76ec7b">UIB_MAGIC</a>) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>    }</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span> </div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>    <span class="comment">// The cursor is off the end of the input buffer given</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>    <span class="comment">// Presuming there are no bugs in this code, this should never happen.</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>    <span class="comment">// If it so, the struct was corrupted. The check is retained as</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>    <span class="comment">// as a defense in case there is a bug in this code or the struct is corrupted.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>    <span class="keywordflow">if</span>(me-&gt;cursor &gt; me-&gt;UB.len) {</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>    }</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span> </div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>    <span class="comment">// subtraction can't go neative because of check above</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>    <span class="keywordflow">return</span> me-&gt;UB.len - me-&gt;cursor;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span> }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span> </div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span> <span class="comment"></span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span> <span class="comment">/**</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span> <span class="comment"> @brief Check if there are any unconsumed bytes</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span> <span class="comment"></span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span> <span class="comment"></span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span> <span class="comment"> @return 1 if len bytes are available after the cursor, and 0 if not</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span> <span class="comment"></span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span> <span class="comment"> */</span></div><div class="line"><a name="l01312"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a7dcb29f47d728a95d3badd69bfdcd4ed"> 1312</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#a7dcb29f47d728a95d3badd69bfdcd4ed">UsefulInputBuf_BytesAvailable</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me, <span class="keywordtype">size_t</span> uLen)</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span> {</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>    <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#aee57e20428005d3b2f5a958de36be2c9">UsefulInputBuf_BytesUnconsumed</a>(me) &gt;= uLen ? 1 : 0;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span> }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span> </div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span> <span class="comment"></span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span> <span class="comment">/**</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span> <span class="comment"> @brief Get pointer to bytes out of the input buffer</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span> <span class="comment"></span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span> <span class="comment"> @param[in] uNum  Number of bytes to get</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span> <span class="comment"></span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span> <span class="comment"> @return Pointer to bytes.</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span> <span class="comment"></span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span> <span class="comment"> This consumes n bytes from the input buffer. It returns a pointer to</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span> <span class="comment"> the start of the n bytes.</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span> <span class="comment"></span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span> <span class="comment"> If there are not n bytes in the input buffer, NULL will be returned</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span> <span class="comment"> and an error will be set.</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span> <span class="comment"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span> <span class="comment"> It advances the current position by n bytes.</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span> <span class="comment"> */</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span> <span class="keyword">const</span> <span class="keywordtype">void</span> * <a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me, <span class="keywordtype">size_t</span> uNum);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span> </div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span> <span class="comment"></span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span> <span class="comment">/**</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span> <span class="comment"> @brief Get UsefulBuf out of the input buffer</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span> <span class="comment"></span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span> <span class="comment"> @param[in] uNum  Number of bytes to get</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span> <span class="comment"></span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span> <span class="comment"> @return UsefulBufC with ptr and length for bytes consumed.</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span> <span class="comment"></span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span> <span class="comment"> This consumes n bytes from the input buffer and returns the pointer</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span> <span class="comment"> and len to them as a UsefulBufC. The len returned will always be n.</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span> <span class="comment"></span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span> <span class="comment"> If there are not n bytes in the input buffer, UsefulBufC.ptr will be</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span> <span class="comment"> NULL and UsefulBufC.len will be 0. An error will be set.</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span> <span class="comment"></span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span> <span class="comment"> It advances the current position by n bytes.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span> <span class="comment"> */</span></div><div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ab2a8425ed162c189fd947d4a2d43badc"> 1353</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> <a class="code" href="_useful_buf_8h.html#ab2a8425ed162c189fd947d4a2d43badc">UsefulInputBuf_GetUsefulBuf</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me, <span class="keywordtype">size_t</span> uNum)</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span> {</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>    <span class="keyword">const</span> <span class="keywordtype">void</span> *pResult = <a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(me, uNum);</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>    <span class="keywordflow">if</span>(!pResult) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>       <span class="keywordflow">return</span> <a class="code" href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">NULLUsefulBufC</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>       <span class="keywordflow">return</span> (<a class="code" href="structuseful__buf__c.html">UsefulBufC</a>){pResult, uNum};</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>    }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span> }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span> </div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span> <span class="comment"></span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span> <span class="comment">/**</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span> <span class="comment"> @brief Get a byte out of the input buffer.</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span> <span class="comment"></span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span> <span class="comment"></span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span> <span class="comment"> @return The byte</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span> <span class="comment"></span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span> <span class="comment"> This consumes 1 byte from the input buffer. It returns the byte.</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span> <span class="comment"></span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span> <span class="comment"> If there is not 1 byte in the buffer, 0 will be returned for the byte</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span> <span class="comment"> and an error set internally.  You must check the error at some point</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span> <span class="comment"> to know whether the 0 was the real value or just returned in error,</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span> <span class="comment"> but you may not have to do that right away.  Check the error state</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span> <span class="comment"> with UsefulInputBuf_GetError().  You can also know you are in the</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span> <span class="comment"> error state if UsefulInputBuf_GetBytes() returns NULL or the ptr from</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span> <span class="comment"> UsefulInputBuf_GetUsefulBuf() is NULL.</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span> <span class="comment"></span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span> <span class="comment"> It advances the current position by 1 byte.</span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span> <span class="comment"> */</span></div><div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a1fba3ebb37c9fbd936218a215136814d"> 1383</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="_useful_buf_8h.html#a1fba3ebb37c9fbd936218a215136814d">UsefulInputBuf_GetByte</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span> {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>    <span class="keyword">const</span> <span class="keywordtype">void</span> *pResult = <a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(me, <span class="keyword">sizeof</span>(uint8_t));</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span> </div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>    <span class="keywordflow">return</span> pResult ? *(uint8_t *)pResult : 0;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span> }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span> </div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span> <span class="comment"></span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span> <span class="comment">/**</span></div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span> <span class="comment"> @brief Get a uint16_t out of the input buffer</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span> <span class="comment"></span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span> <span class="comment"></span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span> <span class="comment"> @return The uint16_t</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span> <span class="comment"></span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span> <span class="comment"> See UsefulInputBuf_GetByte(). This works the same, except it returns</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span> <span class="comment"> a uint16_t and two bytes are consumed.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span> <span class="comment"></span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span> <span class="comment"> The input bytes must be in network order (big endian).</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span> <span class="comment"> */</span></div><div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a273f113f2882e567f1d207a98197f33e"> 1403</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> uint16_t <a class="code" href="_useful_buf_8h.html#a273f113f2882e567f1d207a98197f33e">UsefulInputBuf_GetUint16</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span> {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>    <span class="keyword">const</span> uint8_t *pResult = (<span class="keyword">const</span> uint8_t *)<a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(me, <span class="keyword">sizeof</span>(uint16_t));</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span> </div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>    <span class="keywordflow">if</span>(!pResult) {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>    }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span> </div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>    <span class="keywordflow">return</span>  ((uint16_t)pResult[0] &lt;&lt; 8) + (uint16_t)pResult[1];</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span> }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span> </div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span> <span class="comment"></span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span> <span class="comment">/**</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span> <span class="comment"> @brief Get a uint32_t out of the input buffer</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span> <span class="comment"></span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span> <span class="comment"></span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span> <span class="comment"> @return The uint32_t</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span> <span class="comment"></span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span> <span class="comment"> See UsefulInputBuf_GetByte(). This works the same, except it returns</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span> <span class="comment"> a uint32_t and four bytes are consumed.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span> <span class="comment"></span></div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span> <span class="comment"> The input bytes must be in network order (big endian).</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span> <span class="comment"> */</span></div><div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a08b259f4fd8d866091e188fe25ac0853"> 1427</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="_useful_buf_8h.html#a08b259f4fd8d866091e188fe25ac0853">UsefulInputBuf_GetUint32</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span> {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>    <span class="keyword">const</span> uint8_t *pResult = (<span class="keyword">const</span> uint8_t *)<a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(me, <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span> </div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>    <span class="keywordflow">if</span>(!pResult) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>    }</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span> </div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>    <span class="keywordflow">return</span> ((uint32_t)pResult[0]&lt;&lt;24) +</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>           ((uint32_t)pResult[1]&lt;&lt;16) +</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>           ((uint32_t)pResult[2]&lt;&lt;8) +</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>            (uint32_t)pResult[3];</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span> }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span> </div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span> <span class="comment"></span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span> <span class="comment">/**</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span> <span class="comment"> @brief Get a uint64_t out of the input buffer</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span> <span class="comment"></span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span> <span class="comment"></span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span> <span class="comment"> @return The uint64_t</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span> <span class="comment"></span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span> <span class="comment"> See UsefulInputBuf_GetByte(). This works the same, except it returns</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span> <span class="comment"> a uint64_t and eight bytes are consumed.</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span> <span class="comment"></span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span> <span class="comment"> The input bytes must be in network order (big endian).</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span> <span class="comment"> */</span></div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#a699e452cd932a2c3b6afb2545a1ae312"> 1454</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> uint64_t <a class="code" href="_useful_buf_8h.html#a699e452cd932a2c3b6afb2545a1ae312">UsefulInputBuf_GetUint64</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span> {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>    <span class="keyword">const</span> uint8_t *pResult = (<span class="keyword">const</span> uint8_t *)<a class="code" href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a>(me, <span class="keyword">sizeof</span>(uint64_t));</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span> </div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>    <span class="keywordflow">if</span>(!pResult) {</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>       <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>    }</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span> </div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>    <span class="keywordflow">return</span>   ((uint64_t)pResult[0]&lt;&lt;56) +</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>             ((uint64_t)pResult[1]&lt;&lt;48) +</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>             ((uint64_t)pResult[2]&lt;&lt;40) +</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>             ((uint64_t)pResult[3]&lt;&lt;32) +</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>             ((uint64_t)pResult[4]&lt;&lt;24) +</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>             ((uint64_t)pResult[5]&lt;&lt;16) +</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>             ((uint64_t)pResult[6]&lt;&lt;8)  +</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>             (uint64_t)pResult[7];</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span> }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span> </div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span> <span class="comment"></span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span> <span class="comment">/**</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span> <span class="comment"> @brief Get a float out of the input buffer</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span> <span class="comment"></span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span> <span class="comment"></span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span> <span class="comment"> @return The float</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span> <span class="comment"></span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span> <span class="comment"> See UsefulInputBuf_GetByte(). This works the same, except it returns</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span> <span class="comment"> a float and four bytes are consumed.</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span> <span class="comment"></span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span> <span class="comment"> The input bytes must be in network order (big endian).</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span> <span class="comment"> */</span></div><div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aa499d4c10633cc28f11471cc251f7faa"> 1485</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="_useful_buf_8h.html#aa499d4c10633cc28f11471cc251f7faa">UsefulInputBuf_GetFloat</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span> {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>    uint32_t uResult = <a class="code" href="_useful_buf_8h.html#a08b259f4fd8d866091e188fe25ac0853">UsefulInputBuf_GetUint32</a>(me);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span> </div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>    <span class="keywordflow">return</span> uResult ? UsefulBufUtil_CopyUint32ToFloat(uResult) : 0;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span> }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span> <span class="comment"></span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span> <span class="comment">/**</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span> <span class="comment"> @brief Get a double out of the input buffer</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span> <span class="comment"></span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span> <span class="comment"></span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span> <span class="comment"> @return The double</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span> <span class="comment"></span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span> <span class="comment"> See UsefulInputBuf_GetByte(). This works the same, except it returns</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span> <span class="comment"> a double and eight bytes are consumed.</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span> <span class="comment"></span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span> <span class="comment"> The input bytes must be in network order (big endian).</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span> <span class="comment"> */</span></div><div class="line"><a name="l01504"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#aec2d2614b43eff278767083782b8c70d"> 1504</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="_useful_buf_8h.html#aec2d2614b43eff278767083782b8c70d">UsefulInputBuf_GetDouble</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span> {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>    uint64_t uResult = <a class="code" href="_useful_buf_8h.html#a699e452cd932a2c3b6afb2545a1ae312">UsefulInputBuf_GetUint64</a>(me);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span> </div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>    <span class="keywordflow">return</span> uResult ? UsefulBufUtil_CopyUint64ToDouble(uResult) : 0;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span> }</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span> </div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span> <span class="comment"></span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span> <span class="comment">/**</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span> <span class="comment"> @brief Get the error status</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span> <span class="comment"></span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span> <span class="comment"> @param[in] me Pointer to the UsefulInputBuf.</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span> <span class="comment"></span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span> <span class="comment"> @return The error.</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span> <span class="comment"></span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span> <span class="comment"> Zero is success, non-zero is error. Once in the error state, the only</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span> <span class="comment"> way to clear it is to call Init again.</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span> <span class="comment"></span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span> <span class="comment"> You may be able to only check the error state at the end after all</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span> <span class="comment"> the Get()'s have been done, but if what you get later depends on what</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span> <span class="comment"> you get sooner you cannot. For example if you get a length or count</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span> <span class="comment"> of following items you will have to check the error.</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span> <span class="comment"></span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span> <span class="comment"> */</span></div><div class="line"><a name="l01528"></a><span class="lineno"><a class="line" href="_useful_buf_8h.html#ae224e906579ba6af2f9fa48ce925735f"> 1528</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="_useful_buf_8h.html#ae224e906579ba6af2f9fa48ce925735f">UsefulInputBuf_GetError</a>(<a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> *me)</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span> {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>    <span class="keywordflow">return</span> me-&gt;err;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span> }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span> </div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span> </div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span> <span class="preprocessor">#endif  // _UsefulBuf_h</span></div><div class="ttc" id="_useful_buf_8h_html_ae224e906579ba6af2f9fa48ce925735f"><div class="ttname"><a href="_useful_buf_8h.html#ae224e906579ba6af2f9fa48ce925735f">UsefulInputBuf_GetError</a></div><div class="ttdeci">static int UsefulInputBuf_GetError(UsefulInputBuf *me)</div><div class="ttdoc">Get the error status. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01528">UsefulBuf.h:1528</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a67047ae2935388ca979de7a9083a427c"><div class="ttname"><a href="_useful_buf_8h.html#a67047ae2935388ca979de7a9083a427c">UsefulOutBuf_InsertByte</a></div><div class="ttdeci">static void UsefulOutBuf_InsertByte(UsefulOutBuf *me, uint8_t byte, size_t uPos)</div><div class="ttdoc">Insert a byte into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00808">UsefulBuf.h:808</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ab57b19dfa682d1806296f891bee01693"><div class="ttname"><a href="_useful_buf_8h.html#ab57b19dfa682d1806296f891bee01693">UsefulBuf_Compare</a></div><div class="ttdeci">int UsefulBuf_Compare(const UsefulBufC UB1, const UsefulBufC UB2)</div><div class="ttdoc">Compare two UsefulBufCs. </div></div>
<div class="ttc" id="_useful_buf_8h_html_acb4fb99a895e5384d30814ca07756777"><div class="ttname"><a href="_useful_buf_8h.html#acb4fb99a895e5384d30814ca07756777">UsefulBuf_Copy</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_Copy(UsefulBuf Dest, const UsefulBufC Src)</div><div class="ttdoc">Copy one UsefulBuf into another. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00386">UsefulBuf.h:386</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a93379fb3d2d675a013be69f2b4c3f7d9"><div class="ttname"><a href="_useful_buf_8h.html#a93379fb3d2d675a013be69f2b4c3f7d9">UsefulInputBuf_Tell</a></div><div class="ttdeci">static size_t UsefulInputBuf_Tell(UsefulInputBuf *me)</div><div class="ttdoc">Returns current position in input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01238">UsefulBuf.h:1238</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a0f9b5d672b2eca8dc93700107acfb2be"><div class="ttname"><a href="_useful_buf_8h.html#a0f9b5d672b2eca8dc93700107acfb2be">UsefulOutBuf_Reset</a></div><div class="ttdeci">static void UsefulOutBuf_Reset(UsefulOutBuf *me)</div><div class="ttdoc">Reset a UsefulOutBuf for re use. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00689">UsefulBuf.h:689</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a2bdc7b8c51dc874c4346c0dec8981674"><div class="ttname"><a href="_useful_buf_8h.html#a2bdc7b8c51dc874c4346c0dec8981674">UsefulOutBuf</a></div><div class="ttdeci">struct useful_out_buf UsefulOutBuf</div><div class="ttdoc">UsefulOutBuf is a structure and functions (an object) that are good for serializing data into a buffe...</div></div>
<div class="ttc" id="_useful_buf_8h_html_a1d96e1916fbcef14e2294b91b10a2f5c"><div class="ttname"><a href="_useful_buf_8h.html#a1d96e1916fbcef14e2294b91b10a2f5c">UsefulOutBuf_InsertDouble</a></div><div class="ttdeci">static void UsefulOutBuf_InsertDouble(UsefulOutBuf *me, double d, size_t uPos)</div><div class="ttdoc">Insert a double into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00918">UsefulBuf.h:918</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a7a1fb78b1a9331ee1214121dc8fb6272"><div class="ttname"><a href="_useful_buf_8h.html#a7a1fb78b1a9331ee1214121dc8fb6272">UsefulOutBuf_AtStart</a></div><div class="ttdeci">static int UsefulOutBuf_AtStart(UsefulOutBuf *me)</div><div class="ttdoc">Returns whether any data has been added to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00725">UsefulBuf.h:725</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a8ac63be86d630aeeb748cfd4491360f0"><div class="ttname"><a href="_useful_buf_8h.html#a8ac63be86d630aeeb748cfd4491360f0">UsefulOutBuf_Init</a></div><div class="ttdeci">void UsefulOutBuf_Init(UsefulOutBuf *me, UsefulBuf Storage)</div><div class="ttdoc">Initialize and supply the actual output buffer. </div></div>
<div class="ttc" id="_useful_buf_8h_html_a8393e525ebdcf3ac0454f8a97e4f159c"><div class="ttname"><a href="_useful_buf_8h.html#a8393e525ebdcf3ac0454f8a97e4f159c">UsefulOutBuf_GetEndPosition</a></div><div class="ttdeci">static size_t UsefulOutBuf_GetEndPosition(UsefulOutBuf *me)</div><div class="ttdoc">Returns position of end of data in the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00711">UsefulBuf.h:711</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_af571fcde9e6463bfef16b30e2cd76c1f"><div class="ttname"><a href="_useful_buf_8h.html#af571fcde9e6463bfef16b30e2cd76c1f">UsefulBuf_IsEmpty</a></div><div class="ttdeci">static int UsefulBuf_IsEmpty(UsefulBuf UB)</div><div class="ttdoc">Check if a UsefulBuf is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00220">UsefulBuf.h:220</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aa499d4c10633cc28f11471cc251f7faa"><div class="ttname"><a href="_useful_buf_8h.html#aa499d4c10633cc28f11471cc251f7faa">UsefulInputBuf_GetFloat</a></div><div class="ttdeci">static float UsefulInputBuf_GetFloat(UsefulInputBuf *me)</div><div class="ttdoc">Get a float out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01485">UsefulBuf.h:1485</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a7f5873f5e6697f2bbd6226f5d3ad4594"><div class="ttname"><a href="_useful_buf_8h.html#a7f5873f5e6697f2bbd6226f5d3ad4594">UsefulOutBuf_CopyOut</a></div><div class="ttdeci">UsefulBufC UsefulOutBuf_CopyOut(UsefulOutBuf *me, UsefulBuf Dest)</div><div class="ttdoc">Copies the valid data out into a supplied buffer. </div></div>
<div class="ttc" id="_useful_buf_8h_html_adf4e4704600249b867d732b43afe3279"><div class="ttname"><a href="_useful_buf_8h.html#adf4e4704600249b867d732b43afe3279">UsefulBuf</a></div><div class="ttdeci">struct useful_buf UsefulBuf</div><div class="ttdoc">The non-const UsefulBuf typically used for some allocated memory that is to be filled in...</div></div>
<div class="ttc" id="_useful_buf_8h_html_a8a083d644035e40efd72039a9532ac9c"><div class="ttname"><a href="_useful_buf_8h.html#a8a083d644035e40efd72039a9532ac9c">UsefulInputBuf_Seek</a></div><div class="ttdeci">static void UsefulInputBuf_Seek(UsefulInputBuf *me, size_t uPos)</div><div class="ttdoc">Sets current position in input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01257">UsefulBuf.h:1257</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aa503215b93456499876f69f7261aed1f"><div class="ttname"><a href="_useful_buf_8h.html#aa503215b93456499876f69f7261aed1f">UsefulBufC</a></div><div class="ttdeci">struct useful_buf_c UsefulBufC</div><div class="ttdoc">UsefulBufC and UsefulBuf are simple data structures to hold a pointer and length for a binary data...</div></div>
<div class="ttc" id="_useful_buf_8h_html_a71f9265753384286f3a1aaf394f00bf7"><div class="ttname"><a href="_useful_buf_8h.html#a71f9265753384286f3a1aaf394f00bf7">UsefulBuf_Set</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_Set(UsefulBuf pDest, uint8_t value)</div><div class="ttdoc">Set all bytes in a UsefulBuf to a value, for example 0. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00401">UsefulBuf.h:401</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a08a028eb81150d93fc1fc83b1ea7ac6b"><div class="ttname"><a href="_useful_buf_8h.html#a08a028eb81150d93fc1fc83b1ea7ac6b">UsefulBuf_FindBytes</a></div><div class="ttdeci">size_t UsefulBuf_FindBytes(UsefulBufC BytesToSearch, UsefulBufC BytesToFind)</div><div class="ttdoc">Find one UsefulBuf in another. </div></div>
<div class="ttc" id="structuseful__buf_html"><div class="ttname"><a href="structuseful__buf.html">useful_buf</a></div><div class="ttdoc">The non-const UsefulBuf typically used for some allocated memory that is to be filled in...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00160">UsefulBuf.h:160</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a7dcb29f47d728a95d3badd69bfdcd4ed"><div class="ttname"><a href="_useful_buf_8h.html#a7dcb29f47d728a95d3badd69bfdcd4ed">UsefulInputBuf_BytesAvailable</a></div><div class="ttdeci">static int UsefulInputBuf_BytesAvailable(UsefulInputBuf *me, size_t uLen)</div><div class="ttdoc">Check if there are any unconsumed bytes. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01312">UsefulBuf.h:1312</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a12d237545f02c630dc59d1d9a4540df1"><div class="ttname"><a href="_useful_buf_8h.html#a12d237545f02c630dc59d1d9a4540df1">UsefulBuf_Unconst</a></div><div class="ttdeci">static UsefulBuf UsefulBuf_Unconst(const UsefulBufC UBC)</div><div class="ttdoc">Convert a const UsefulBufC to a non-const UsefulBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00282">UsefulBuf.h:282</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a9907b47af6b49d02cfa893d8d0665bb3"><div class="ttname"><a href="_useful_buf_8h.html#a9907b47af6b49d02cfa893d8d0665bb3">UsefulOutBuf_RoomLeft</a></div><div class="ttdeci">static size_t UsefulOutBuf_RoomLeft(UsefulOutBuf *me)</div><div class="ttdoc">Returns number of bytes unused used in the output buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01098">UsefulBuf.h:1098</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aec2d2614b43eff278767083782b8c70d"><div class="ttname"><a href="_useful_buf_8h.html#aec2d2614b43eff278767083782b8c70d">UsefulInputBuf_GetDouble</a></div><div class="ttdeci">static double UsefulInputBuf_GetDouble(UsefulInputBuf *me)</div><div class="ttdoc">Get a double out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01504">UsefulBuf.h:1504</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a52338bb99011e31abc9267611a7da2b0"><div class="ttname"><a href="_useful_buf_8h.html#a52338bb99011e31abc9267611a7da2b0">UsefulOutBuf_AppendByte</a></div><div class="ttdeci">static void UsefulOutBuf_AppendByte(UsefulOutBuf *me, uint8_t byte)</div><div class="ttdoc">Append a byte to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00982">UsefulBuf.h:982</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aee57e20428005d3b2f5a958de36be2c9"><div class="ttname"><a href="_useful_buf_8h.html#aee57e20428005d3b2f5a958de36be2c9">UsefulInputBuf_BytesUnconsumed</a></div><div class="ttdeci">static size_t UsefulInputBuf_BytesUnconsumed(UsefulInputBuf *me)</div><div class="ttdoc">Returns the number of bytes from the cursor to the end of the buffer, the uncomsummed bytes...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01283">UsefulBuf.h:1283</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aeae9f4782b8555340d73e8d63ec2691e"><div class="ttname"><a href="_useful_buf_8h.html#aeae9f4782b8555340d73e8d63ec2691e">UsefulBuf_IsNULLOrEmpty</a></div><div class="ttdeci">static int UsefulBuf_IsNULLOrEmpty(UsefulBuf UB)</div><div class="ttdoc">Check if a UsefulBuf is NULL or empty. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00244">UsefulBuf.h:244</a></div></div>
<div class="ttc" id="structuseful__buf__c_html"><div class="ttname"><a href="structuseful__buf__c.html">useful_buf_c</a></div><div class="ttdoc">UsefulBufC and UsefulBuf are simple data structures to hold a pointer and length for a binary data...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00149">UsefulBuf.h:149</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_af8ee695f5fd5ec2360eddc4668b70d55"><div class="ttname"><a href="_useful_buf_8h.html#af8ee695f5fd5ec2360eddc4668b70d55">UsefulOutBuf_AppendUint32</a></div><div class="ttdeci">static void UsefulOutBuf_AppendUint32(UsefulOutBuf *me, uint32_t uInteger32)</div><div class="ttdoc">Append an integer to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01013">UsefulBuf.h:1013</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_af1e8acba0f0d344d630494c9bd76ec7b"><div class="ttname"><a href="_useful_buf_8h.html#af1e8acba0f0d344d630494c9bd76ec7b">UIB_MAGIC</a></div><div class="ttdeci">#define UIB_MAGIC</div><div class="ttdoc">UsefulInputBuf is the counterpart to UsefulOutBuf and is for parsing data read or received...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01200">UsefulBuf.h:1200</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad3d48f0714f1a12aad93e8513f587b1a"><div class="ttname"><a href="_useful_buf_8h.html#ad3d48f0714f1a12aad93e8513f587b1a">UsefulOutBuf_InsertUsefulBuf</a></div><div class="ttdeci">void UsefulOutBuf_InsertUsefulBuf(UsefulOutBuf *me, UsefulBufC NewData, size_t uPos)</div><div class="ttdoc">Inserts bytes into the UsefulOutBuf. </div></div>
<div class="ttc" id="_useful_buf_8h_html_aca503e3b347234429acf80e460e31cdd"><div class="ttname"><a href="_useful_buf_8h.html#aca503e3b347234429acf80e460e31cdd">UsefulBuf_IsNULLOrEmptyC</a></div><div class="ttdeci">static int UsefulBuf_IsNULLOrEmptyC(UsefulBufC UB)</div><div class="ttdoc">Check if a UsefulBufC is NULL or empty. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00256">UsefulBuf.h:256</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ab2a209bfa56b5977034b67e0016708ed"><div class="ttname"><a href="_useful_buf_8h.html#ab2a209bfa56b5977034b67e0016708ed">UsefulOutBuf_InsertData</a></div><div class="ttdeci">static void UsefulOutBuf_InsertData(UsefulOutBuf *me, const void *pBytes, size_t uLen, size_t uPos)</div><div class="ttdoc">Insert a data buffer into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00778">UsefulBuf.h:778</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a08b259f4fd8d866091e188fe25ac0853"><div class="ttname"><a href="_useful_buf_8h.html#a08b259f4fd8d866091e188fe25ac0853">UsefulInputBuf_GetUint32</a></div><div class="ttdeci">static uint32_t UsefulInputBuf_GetUint32(UsefulInputBuf *me)</div><div class="ttdoc">Get a uint32_t out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01427">UsefulBuf.h:1427</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a47e6b3d192d2b6083ad0aa4a223de4da"><div class="ttname"><a href="_useful_buf_8h.html#a47e6b3d192d2b6083ad0aa4a223de4da">UsefulOutBuf_AppendUint16</a></div><div class="ttdeci">static void UsefulOutBuf_AppendUint16(UsefulOutBuf *me, uint16_t uInteger16)</div><div class="ttdoc">Append an integer to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00998">UsefulBuf.h:998</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_af5319ec44822f228c7ed5a316ea52775"><div class="ttname"><a href="_useful_buf_8h.html#af5319ec44822f228c7ed5a316ea52775">UsefulInputBuf_GetBytes</a></div><div class="ttdeci">const void * UsefulInputBuf_GetBytes(UsefulInputBuf *me, size_t uNum)</div><div class="ttdoc">Get pointer to bytes out of the input buffer. </div></div>
<div class="ttc" id="_useful_buf_8h_html_a64e21918b707e90e5a8af563eaaa1c5d"><div class="ttname"><a href="_useful_buf_8h.html#a64e21918b707e90e5a8af563eaaa1c5d">UsefulBuf_IsEmptyC</a></div><div class="ttdeci">static int UsefulBuf_IsEmptyC(UsefulBufC UB)</div><div class="ttdoc">Check if a UsefulBufC is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00232">UsefulBuf.h:232</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ab2a8425ed162c189fd947d4a2d43badc"><div class="ttname"><a href="_useful_buf_8h.html#ab2a8425ed162c189fd947d4a2d43badc">UsefulInputBuf_GetUsefulBuf</a></div><div class="ttdeci">static UsefulBufC UsefulInputBuf_GetUsefulBuf(UsefulInputBuf *me, size_t uNum)</div><div class="ttdoc">Get UsefulBuf out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01353">UsefulBuf.h:1353</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a9f0dfe64ae33da2b7c717813ffbc74cb"><div class="ttname"><a href="_useful_buf_8h.html#a9f0dfe64ae33da2b7c717813ffbc74cb">UsefulInputBuf_Init</a></div><div class="ttdeci">static void UsefulInputBuf_Init(UsefulInputBuf *me, UsefulBufC UB)</div><div class="ttdoc">Initialize the UsefulInputBuf structure before use. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01219">UsefulBuf.h:1219</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ac041e850e35371e9a4509ca39bb07bc7"><div class="ttname"><a href="_useful_buf_8h.html#ac041e850e35371e9a4509ca39bb07bc7">UsefulOutBuf_AppendString</a></div><div class="ttdeci">static void UsefulOutBuf_AppendString(UsefulOutBuf *me, const char *szString)</div><div class="ttdoc">Append a NULL-terminated string to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00967">UsefulBuf.h:967</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a20b86b62bed3089bfa8fb2a4991add52"><div class="ttname"><a href="_useful_buf_8h.html#a20b86b62bed3089bfa8fb2a4991add52">UsefulOutBuf_InsertUint32</a></div><div class="ttdeci">static void UsefulOutBuf_InsertUint32(UsefulOutBuf *me, uint32_t uInteger32, size_t uPos)</div><div class="ttdoc">Insert a 32-bit integer into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00848">UsefulBuf.h:848</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aa490ed52e9645f3c0872b47ffd8b66db"><div class="ttname"><a href="_useful_buf_8h.html#aa490ed52e9645f3c0872b47ffd8b66db">UsefulOutBuf_AppendUint64</a></div><div class="ttdeci">static void UsefulOutBuf_AppendUint64(UsefulOutBuf *me, uint64_t uInteger64)</div><div class="ttdoc">Append an integer to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01028">UsefulBuf.h:1028</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a3e7daafc8802edc82014807b9cdab86e"><div class="ttname"><a href="_useful_buf_8h.html#a3e7daafc8802edc82014807b9cdab86e">UsefulOutBuf_AppendFloat</a></div><div class="ttdeci">static void UsefulOutBuf_AppendFloat(UsefulOutBuf *me, float f)</div><div class="ttdoc">Append a float to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01044">UsefulBuf.h:1044</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_aaa035d1d6051edb16815d711e004a206"><div class="ttname"><a href="_useful_buf_8h.html#aaa035d1d6051edb16815d711e004a206">UsefulOutBuf_AppendUsefulBuf</a></div><div class="ttdeci">static void UsefulOutBuf_AppendUsefulBuf(UsefulOutBuf *me, UsefulBufC NewData)</div><div class="ttdoc">Append a UsefulBuf into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00935">UsefulBuf.h:935</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a1fba3ebb37c9fbd936218a215136814d"><div class="ttname"><a href="_useful_buf_8h.html#a1fba3ebb37c9fbd936218a215136814d">UsefulInputBuf_GetByte</a></div><div class="ttdeci">static uint8_t UsefulInputBuf_GetByte(UsefulInputBuf *me)</div><div class="ttdoc">Get a byte out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01383">UsefulBuf.h:1383</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ae9423b177458f7a57b4cc7aa1174842f"><div class="ttname"><a href="_useful_buf_8h.html#ae9423b177458f7a57b4cc7aa1174842f">UsefulOutBuf_InsertFloat</a></div><div class="ttdeci">static void UsefulOutBuf_InsertFloat(UsefulOutBuf *me, float f, size_t uPos)</div><div class="ttdoc">Insert a float into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00900">UsefulBuf.h:900</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a699e452cd932a2c3b6afb2545a1ae312"><div class="ttname"><a href="_useful_buf_8h.html#a699e452cd932a2c3b6afb2545a1ae312">UsefulInputBuf_GetUint64</a></div><div class="ttdeci">static uint64_t UsefulInputBuf_GetUint64(UsefulInputBuf *me)</div><div class="ttdoc">Get a uint64_t out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01454">UsefulBuf.h:1454</a></div></div>
<div class="ttc" id="structuseful__out__buf_html"><div class="ttname"><a href="structuseful__out__buf.html">useful_out_buf</a></div><div class="ttdoc">UsefulOutBuf is a structure and functions (an object) that are good for serializing data into a buffe...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00642">UsefulBuf.h:642</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad04a42b8dadd7839c207f1f50e3862ce"><div class="ttname"><a href="_useful_buf_8h.html#ad04a42b8dadd7839c207f1f50e3862ce">UsefulOutBuf_InsertUint16</a></div><div class="ttdeci">static void UsefulOutBuf_InsertUint16(UsefulOutBuf *me, uint16_t uInteger16, size_t uPos)</div><div class="ttdoc">Insert a 16-bit integer into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00826">UsefulBuf.h:826</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ab1cc8120590ddb6e5b266d1d538a93e8"><div class="ttname"><a href="_useful_buf_8h.html#ab1cc8120590ddb6e5b266d1d538a93e8">UsefulOutBuf_InsertUint64</a></div><div class="ttdeci">static void UsefulOutBuf_InsertUint64(UsefulOutBuf *me, uint64_t uInteger64, size_t uPos)</div><div class="ttdoc">Insert a 64-bit integer into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00872">UsefulBuf.h:872</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad1b9924b51c67d6363fae93c0c6b4a95"><div class="ttname"><a href="_useful_buf_8h.html#ad1b9924b51c67d6363fae93c0c6b4a95">UsefulBuf_Const</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_Const(const UsefulBuf UB)</div><div class="ttdoc">Convert a non const UsefulBuf to a const UsefulBufC. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00269">UsefulBuf.h:269</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a29f51e2194792e98be0a0192579e3e2b"><div class="ttname"><a href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_FromSZ(const char *szString)</div><div class="ttdoc">Convert a NULL terminated string to a UsefulBufC. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00342">UsefulBuf.h:342</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_afd3cfd1f368b9d44860f861a3e238878"><div class="ttname"><a href="_useful_buf_8h.html#afd3cfd1f368b9d44860f861a3e238878">UsefulOutBuf_AppendDouble</a></div><div class="ttdeci">static void UsefulOutBuf_AppendDouble(UsefulOutBuf *me, double d)</div><div class="ttdoc">Append a float to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01059">UsefulBuf.h:1059</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad8a21703d4dac011f8ecb3f695ee3c59"><div class="ttname"><a href="_useful_buf_8h.html#ad8a21703d4dac011f8ecb3f695ee3c59">UsefulBuf_Head</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_Head(UsefulBufC UB, size_t uAmount)</div><div class="ttdoc">Returns a truncation of a UsefulBufC. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00440">UsefulBuf.h:440</a></div></div>
<div class="ttc" id="structuseful__input__buf_html"><div class="ttname"><a href="structuseful__input__buf.html">useful_input_buf</a></div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01202">UsefulBuf.h:1202</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ac85e6f98b8771d499ffe31b3b74fca1f"><div class="ttname"><a href="_useful_buf_8h.html#ac85e6f98b8771d499ffe31b3b74fca1f">UsefulOutBuf_AppendData</a></div><div class="ttdeci">static void UsefulOutBuf_AppendData(UsefulOutBuf *me, const void *pBytes, size_t uLen)</div><div class="ttdoc">Append bytes to the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00953">UsefulBuf.h:953</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_abda41e435b1d4464b9519005b1b01144"><div class="ttname"><a href="_useful_buf_8h.html#abda41e435b1d4464b9519005b1b01144">UsefulOutBuf_OutUBuf</a></div><div class="ttdeci">UsefulBufC UsefulOutBuf_OutUBuf(UsefulOutBuf *me)</div><div class="ttdoc">Returns the resulting valid data in a UsefulOutBuf. </div></div>
<div class="ttc" id="_useful_buf_8h_html_a77c438f357f395c98e0613e592f0656a"><div class="ttname"><a href="_useful_buf_8h.html#a77c438f357f395c98e0613e592f0656a">UsefulOutBuf_GetError</a></div><div class="ttdeci">static int UsefulOutBuf_GetError(UsefulOutBuf *me)</div><div class="ttdoc">Returns the current error status. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01081">UsefulBuf.h:1081</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a5bfed827589d6ed9f53a650ddd58b58a"><div class="ttname"><a href="_useful_buf_8h.html#a5bfed827589d6ed9f53a650ddd58b58a">UsefulBuf_IsNULLC</a></div><div class="ttdeci">static int UsefulBuf_IsNULLC(UsefulBufC UB)</div><div class="ttdoc">Check if a UsefulBufC is NULL or not. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00198">UsefulBuf.h:198</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad5357993f7cc22ad8c75a9894ca2d8b1"><div class="ttname"><a href="_useful_buf_8h.html#ad5357993f7cc22ad8c75a9894ca2d8b1">UsefulOutBuf_WillItFit</a></div><div class="ttdeci">static int UsefulOutBuf_WillItFit(UsefulOutBuf *me, size_t uLen)</div><div class="ttdoc">Returns true / false if some number of bytes will fit in the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01116">UsefulBuf.h:1116</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a05579733aab2773ab445be396f744276"><div class="ttname"><a href="_useful_buf_8h.html#a05579733aab2773ab445be396f744276">UsefulBuf_CopyPtr</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_CopyPtr(UsefulBuf Dest, const void *ptr, size_t len)</div><div class="ttdoc">Copy a pointer into a UsefulBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00425">UsefulBuf.h:425</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_ad1dfb319f1c101a0e555e9b00bac0597"><div class="ttname"><a href="_useful_buf_8h.html#ad1dfb319f1c101a0e555e9b00bac0597">UsefulOutBuf_InsertString</a></div><div class="ttdeci">static void UsefulOutBuf_InsertString(UsefulOutBuf *me, const char *szString, size_t uPos)</div><div class="ttdoc">Insert a NULL-terminated string into the UsefulOutBuf. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00792">UsefulBuf.h:792</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_adaceb62d7b73b18be451c06a5d2540e5"><div class="ttname"><a href="_useful_buf_8h.html#adaceb62d7b73b18be451c06a5d2540e5">UsefulBuf_Tail</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_Tail(UsefulBufC UB, size_t uAmount)</div><div class="ttdoc">Returns bytes from the end of a UsefulBufC. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00462">UsefulBuf.h:462</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a682553796f9ce5361bc9a70d4347444d"><div class="ttname"><a href="_useful_buf_8h.html#a682553796f9ce5361bc9a70d4347444d">UsefulBuf_IsNULL</a></div><div class="ttdeci">static int UsefulBuf_IsNULL(UsefulBuf UB)</div><div class="ttdoc">Check if a UsefulBuf is NULL or not. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00186">UsefulBuf.h:186</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a273f113f2882e567f1d207a98197f33e"><div class="ttname"><a href="_useful_buf_8h.html#a273f113f2882e567f1d207a98197f33e">UsefulInputBuf_GetUint16</a></div><div class="ttdeci">static uint16_t UsefulInputBuf_GetUint16(UsefulInputBuf *me)</div><div class="ttdoc">Get a uint16_t out of the input buffer. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01403">UsefulBuf.h:1403</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a82cbe966444cc482aaeef036ae801ebd"><div class="ttname"><a href="_useful_buf_8h.html#a82cbe966444cc482aaeef036ae801ebd">UsefulBuf_CopyOffset</a></div><div class="ttdeci">UsefulBufC UsefulBuf_CopyOffset(UsefulBuf Dest, size_t uOffset, const UsefulBufC Src)</div><div class="ttdoc">Copy one UsefulBuf into another at an offset. </div></div>
<div class="ttc" id="_useful_buf_8h_html_aef281b38ce49e9413dad0893d225c70d"><div class="ttname"><a href="_useful_buf_8h.html#aef281b38ce49e9413dad0893d225c70d">NULLUsefulBufC</a></div><div class="ttdeci">#define NULLUsefulBufC</div><div class="ttdoc">A "NULL" UsefulBufC is one that has no value in the same way a NULL pointer has no value...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00171">UsefulBuf.h:171</a></div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_useful_buf_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:29:52 GMT -->
</html>
