<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_e_s_p8266_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:23:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | ESP8266.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="_e_s_p8266_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_e_s_p8266_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/_e_s_p8266_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_456207283565120b441ff9733579e7b8.html">connectivity</a></li><li class="navelem"><a class="el" href="dir_59977a0c207738c890dea4a1d368376e.html">drivers</a></li><li class="navelem"><a class="el" href="dir_465fc08ef7a88ed42de4e140d6385b82.html">wifi</a></li><li class="navelem"><a class="el" href="dir_3cda454e6fa5386123b9026397654a0f.html">esp8266-driver</a></li><li class="navelem"><a class="el" href="dir_05c6d0c2e79e7e5a5f89dc617bcf3211.html">ESP8266</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ESP8266.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/* ESP8266Interface Example</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> * Copyright (c) 2015 ARM Limited</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> * SPDX-License-Identifier: Apache-2.0</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> * Licensed under the Apache License, Version 2.0 (the "License");</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment"> * distributed under the License is distributed on an "AS IS" BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment"> */</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> </div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="preprocessor">#ifndef ESP8266_H</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="preprocessor">#define ESP8266_H</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> </div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="preprocessor">#if DEVICE_SERIAL &amp;&amp; DEVICE_INTERRUPTIN &amp;&amp; defined(MBED_CONF_EVENTS_PRESENT) &amp;&amp; defined(MBED_CONF_NSAPI_PRESENT) &amp;&amp; defined(MBED_CONF_RTOS_API_PRESENT)</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="preprocessor">#include &lt;ctime&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> </div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="preprocessor">#include "drivers/BufferedSerial.h"</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="preprocessor">#include "netsocket/nsapi_types.h"</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="preprocessor">#include "netsocket/WiFiAccessPoint.h"</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="preprocessor">#include "PinNames.h"</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="preprocessor">#include "platform/ATCmdParser.h"</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="preprocessor">#include "platform/Callback.h"</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="preprocessor">#include "platform/mbed_chrono.h"</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="preprocessor">#include "platform/mbed_error.h"</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> <span class="preprocessor">#include "rtos/Mutex.h"</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> <span class="preprocessor">#include "rtos/ThisThread.h"</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="preprocessor">#include "<a class="code" href="_socket_address_8h.html">netsocket/SocketAddress.h</a>"</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> </div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment">// Various timeouts for different ESP8266 operations</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment">// (some of these can't use literal form as they're needed for defaults in this header, where</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment">// we shouldn't add a using directive for them. Defines only used in the C++ file can use literals).</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="preprocessor">#ifndef ESP8266_CONNECT_TIMEOUT</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="preprocessor">#define ESP8266_CONNECT_TIMEOUT 15s</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="preprocessor">#ifndef ESP8266_SEND_TIMEOUT</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="preprocessor">#define ESP8266_SEND_TIMEOUT    2s</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="preprocessor">#ifndef ESP8266_RECV_TIMEOUT</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> <span class="preprocessor">#define ESP8266_RECV_TIMEOUT    std::chrono::seconds(2)</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="preprocessor">#ifndef ESP8266_MISC_TIMEOUT</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="preprocessor">#define ESP8266_MISC_TIMEOUT    std::chrono::seconds(2)</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="preprocessor">#ifndef ESP8266_DNS_TIMEOUT</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="preprocessor">#define ESP8266_DNS_TIMEOUT     15s</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> </div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="preprocessor">#define ESP8266_SCAN_TIME_MIN 0ms</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> <span class="preprocessor">#define ESP8266_SCAN_TIME_MAX 1500ms</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="preprocessor">#define ESP8266_SCAN_TIME_MIN_DEFAULT 120ms</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="preprocessor">#define ESP8266_SCAN_TIME_MAX_DEFAULT 360ms</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> </div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="comment">// Firmware version</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="preprocessor">#define ESP8266_SDK_VERSION 2000000</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> <span class="preprocessor">#define ESP8266_SDK_VERSION_MAJOR ESP8266_SDK_VERSION/1000000</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="preprocessor">#define ESP8266_AT_VERSION 1000000</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span> <span class="preprocessor">#define ESP8266_AT_VERSION_MAJOR ESP8266_AT_VERSION/1000000</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="preprocessor">#define ESP8266_AT_VERSION_TCP_PASSIVE_MODE 1070000</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> <span class="preprocessor">#define ESP8266_AT_VERSION_WIFI_SCAN_CHANGE 1060000</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="preprocessor">#define FW_AT_LEAST_VERSION(MAJOR,MINOR,PATCH,NUSED</span><span class="comment">/*Not used*/</span><span class="preprocessor">,REF) \</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="preprocessor">    (((MAJOR)*1000000+(MINOR)*10000+(PATCH)*100) &gt;= REF ? true : false)</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> </div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="keyword">struct </span>esp8266_socket {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>     <span class="keywordtype">int</span> id;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>     nsapi_protocol_t proto;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>     <span class="keywordtype">bool</span> connected;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>     <span class="keywordtype">bool</span> bound;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>     <a class="code" href="class_socket_address.html">SocketAddress</a> addr;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>     <span class="keywordtype">int</span> keepalive; <span class="comment">// TCP</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> };</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="comment"></span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="comment">/** ESP8266Interface class.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> <span class="comment">    This is an interface to a ESP8266 radio.</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> <span class="comment"> */</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="keyword">class </span>ESP8266 {</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="keyword">public</span>:</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>     ESP8266(PinName tx, PinName rx, <span class="keywordtype">bool</span> <a class="code" href="group__platform__debug.html#ga6323152a16378cf85c6e7a9a09d23924">debug</a> = <span class="keyword">false</span>, PinName rts = NC, PinName cts = NC);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"></span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment">    /**</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment">    * ESP8266 firmware SDK version</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="comment">    *</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> <span class="comment">    * @param major Major version number</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> <span class="comment">    * @param minor Minor version number</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment">    * @param patch Patch version number</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment">    */</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>     <span class="keyword">struct </span>fw_sdk_version {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>         <span class="keywordtype">int</span> major;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>         <span class="keywordtype">int</span> minor;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>         <span class="keywordtype">int</span> patch;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>         fw_sdk_version(<span class="keywordtype">int</span> major, <span class="keywordtype">int</span> minor, <span class="keywordtype">int</span> patch) : major(major), minor(minor), patch(patch) {}</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>     };</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment">    /**</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment">    * ESP8266 firmware AT version</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment">    *</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment">    * @param major Major version number</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment">    * @param minor Minor version number</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment">    * @param patch Patch version number</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment">    */</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>     <span class="keyword">struct </span>fw_at_version {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>         <span class="keywordtype">int</span> major;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>         <span class="keywordtype">int</span> minor;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>         <span class="keywordtype">int</span> patch;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>         fw_at_version(<span class="keywordtype">int</span> major, <span class="keywordtype">int</span> minor, <span class="keywordtype">int</span> patch) : major(major), minor(minor), patch(patch) {}</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>     };</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span> <span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span> <span class="comment">    /**</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span> <span class="comment">    * Check AT command interface of ESP8266</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span> <span class="comment">    *</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span> <span class="comment">    * @return true if ready to respond on AT commands</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span> <span class="comment">    */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>     <span class="keywordtype">bool</span> at_available(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span> <span class="comment"></span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span> <span class="comment">    /**</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> <span class="comment">     * Disable echo - required for OOB processing to work</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> <span class="comment">     *</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> <span class="comment">     * @return true if echo was successfully disabled</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment">     */</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>     <span class="keywordtype">bool</span> echo_off(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment">    /**</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment">    * Check sdk version from which firmware is created</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment">    *</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment">    * @return fw_sdk_version which tells major, minor and patch version</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment">    */</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>     <span class="keyword">struct </span>fw_sdk_version sdk_version(void);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment"></span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span> <span class="comment">    /**</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span> <span class="comment">    * Check AT instruction set version from which firmware is created</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span> <span class="comment">    *</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span> <span class="comment">    * @return fw_at_version which tells major, minor and patch version</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span> <span class="comment">    */</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>     <span class="keyword">struct </span>fw_at_version at_version(void);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> <span class="comment"></span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> <span class="comment">    /**</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment">    * Startup the ESP8266</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment">    *</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment">    * @param mode mode of WIFI 1-client, 2-host, 3-both</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span> <span class="comment">    * @return true only if ESP8266 was setup correctly</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span> <span class="comment">    */</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>     <span class="keywordtype">bool</span> startup(<span class="keywordtype">int</span> mode);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> <span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> <span class="comment">    /**</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment">    * Reset ESP8266</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment">    *</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment">    * @return true only if ESP8266 resets successfully</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span> <span class="comment">    */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>     <span class="keywordtype">bool</span> reset(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span> <span class="comment"></span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span> <span class="comment">    /**</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span> <span class="comment">    * Enable/Disable DHCP</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span> <span class="comment">    *</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span> <span class="comment">    * @param enabled DHCP enabled when true</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> <span class="comment">    * @param mode mode of DHCP 0-softAP, 1-station, 2-both</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> <span class="comment">    * @return true only if ESP8266 enables/disables DHCP successfully</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> <span class="comment">    */</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>     <span class="keywordtype">bool</span> dhcp(<span class="keywordtype">bool</span> enabled, <span class="keywordtype">int</span> mode);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment"></span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment">    /**</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment">    * Connect ESP8266 to AP</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment">    *</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment">    * @param ap the name of the AP</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment">    * @param passPhrase the password of AP</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment">    * @return NSAPI_ERROR_OK in success, negative error code in failure</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">    */</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>     <a class="code" href="group__netsocket.html#ga67a8f07758d2ee2a1809293fa52bdf14">nsapi_error_t</a> connect(<span class="keyword">const</span> <span class="keywordtype">char</span> *ap, <span class="keyword">const</span> <span class="keywordtype">char</span> *passPhrase);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span> <span class="comment"></span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span> <span class="comment">    /**</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span> <span class="comment">    * Disconnect ESP8266 from AP</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span> <span class="comment">    *</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span> <span class="comment">    * @return true only if ESP8266 is disconnected successfully</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span> <span class="comment">    */</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>     <span class="keywordtype">bool</span> disconnect(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span> <span class="comment"></span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> <span class="comment">    /**</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span> <span class="comment">    * Enable or disable Remote IP and Port printing with +IPD</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span> <span class="comment">    *</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span> <span class="comment">    * @param enable, 1 on, 0 off</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span> <span class="comment">    * @return true only if ESP8266 is disconnected successfully</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span> <span class="comment">    */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>     <span class="keywordtype">bool</span> ip_info_print(<span class="keywordtype">int</span> enable);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span> <span class="comment"></span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span> <span class="comment">    /**</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span> <span class="comment">    * Get the IP address of ESP8266</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> <span class="comment">    *</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> <span class="comment">    * @return null-teriminated IP address or null if no IP address is assigned</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment">    */</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>     <span class="keyword">const</span> <span class="keywordtype">char</span> *ip_addr(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="comment"></span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="comment">    /**</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> <span class="comment">     * Set static IP address, gateway and netmask</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> <span class="comment">     *</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment">     * @param ip IP address to set</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment">     * @param gateway (optional) gateway to set</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment">     * @param netmask (optional) netmask to set</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment">     *</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment">     * @return true if operation was successful and flase otherwise</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> <span class="comment">     */</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>     <span class="keywordtype">bool</span> set_ip_addr(<span class="keyword">const</span> <span class="keywordtype">char</span> *ip, <span class="keyword">const</span> <span class="keywordtype">char</span> *gateway, <span class="keyword">const</span> <span class="keywordtype">char</span> *netmask);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> <span class="comment"></span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment">    /**</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment">    * Get the MAC address of ESP8266</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment">    *</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">    * @return null-terminated MAC address or null if no MAC address is assigned</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment">    */</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>     <span class="keyword">const</span> <span class="keywordtype">char</span> *mac_addr(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> <span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment">    /** Get the local gateway</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="comment">    *</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> <span class="comment">    *  @return         Null-terminated representation of the local gateway</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment">    *                  or null if no network mask has been recieved</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="comment">    */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>     <span class="keyword">const</span> <span class="keywordtype">char</span> *gateway();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment"></span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="comment">    /** Get the local network mask</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> <span class="comment">     *</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment">     *  @return         Null-terminated representation of the local network mask</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment">     *                  or null if no network mask has been recieved</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="comment">     */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>     <span class="keyword">const</span> <span class="keywordtype">char</span> *netmask();</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>     <span class="comment">/* Return RSSI for active connection</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> <span class="comment">     *</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment">     * @return      Measured RSSI</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment">     */</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>     int8_t rssi();</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="comment"></span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> <span class="comment">    /** Scan mode</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment">     */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>     <span class="keyword">enum</span> scan_mode {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>         SCANMODE_ACTIVE = 0, <span class="comment">/*!&lt; active mode */</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>         SCANMODE_PASSIVE = 1 <span class="comment">/*!&lt; passive mode */</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>     };</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> <span class="comment"></span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> <span class="comment">    /** Scan for available networks</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">     *</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment">     * @param  ap    Pointer to allocated array to store discovered AP</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment">     * @param  limit Size of allocated @a res array, or 0 to only count available AP</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment">     * @param  t_max Maximum scan time per channel</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="comment">     * @param  t_min Minimum scan time per channel in active mode, can be omitted in passive mode</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="comment">     * @return       Number of entries in @a res, or if @a count was 0 number of available networks, negative on error</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="comment">     *               see @a nsapi_error</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="comment">     */</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>     <span class="keywordtype">int</span> scan(<a class="code" href="class_wi_fi_access_point.html">WiFiAccessPoint</a> *res, <span class="keywordtype">unsigned</span> limit, scan_mode mode,</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>              std::chrono::duration&lt;unsigned, std::milli&gt; t_max,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>              std::chrono::duration&lt;unsigned, std::milli&gt; t_min);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="comment"></span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> <span class="comment">    /**Perform a dns query</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> <span class="comment">    *</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">    * @param name Hostname to resolve</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment">    * @param ip   Buffer to store IP address</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment">    * @return 0 true on success, false on failure</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment">    */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>     <span class="keywordtype">bool</span> dns_lookup(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">char</span> *ip);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> <span class="comment"></span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> <span class="comment">    /**</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment">    * Open a socketed connection</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment">    *</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment">    * @param type the type of socket to open "UDP" or "TCP"</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment">    * @param id id to give the new socket, valid 0-4</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">    * @param port port to open connection with</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span> <span class="comment">    * @param addr the IP address of the destination</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment">    * @param port the port on the destination</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span> <span class="comment">    * @param local_port UDP socket's local port, zero means any</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="comment">    * @param udp_mode UDP socket's mode, zero means can't change remote, 1 can change once, 2 can change multiple times</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="comment">    * @return NSAPI_ERROR_OK in success, negative error code in failure</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="comment">    */</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>     <a class="code" href="group__netsocket.html#ga67a8f07758d2ee2a1809293fa52bdf14">nsapi_error_t</a> open_udp(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> port, <span class="keywordtype">int</span> local_port = 0, <span class="keywordtype">int</span> udp_mode = 0);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> <span class="comment"></span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="comment">    /**</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="comment">    * Open a socketed connection</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="comment">    *</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> <span class="comment">    * @param type the type of socket to open "UDP" or "TCP"</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment">    * @param id id to give the new socket, valid 0-4</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="comment">    * @param port port to open connection with</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> <span class="comment">    * @param addr the IP address of the destination</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="comment">    * @param port the port on the destination</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment">    * @param tcp_keepalive TCP connection's keep alive time, zero means disabled</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="comment">    * @return NSAPI_ERROR_OK in success, negative error code in failure</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="comment">    */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>     <a class="code" href="group__netsocket.html#ga67a8f07758d2ee2a1809293fa52bdf14">nsapi_error_t</a> open_tcp(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> port, <span class="keywordtype">int</span> keepalive = 0);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span> <span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment">    /**</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span> <span class="comment">    * Sends data to an open socket</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment">    *</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span> <span class="comment">    * @param id id of socket to send to</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment">    * @param data data to be sent</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span> <span class="comment">    * @param amount amount of data to be sent - max 2048</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment">    * @return number of bytes on success, negative error code in failure</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span> <span class="comment">    */</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>     <a class="code" href="group__netsocket.html#ga1aef0d1a2599df92bb4499b5c4262d25">nsapi_size_or_error_t</a> send(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, uint32_t amount);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span> <span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> <span class="comment">    /**</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="comment">    * Receives datagram from an open UDP socket</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> <span class="comment">    *</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="comment">    * @param id id to receive from</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="comment">    * @param data placeholder for returned information</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="comment">    * @param amount number of bytes to be received</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> <span class="comment">    * @return the number of bytes received</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="comment">    */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>     int32_t recv_udp(<span class="keyword">struct</span> esp8266_socket *socket, <span class="keywordtype">void</span> *data, uint32_t amount, mbed::chrono::milliseconds_u32 timeout = ESP8266_RECV_TIMEOUT);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment">    /**</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span> <span class="comment">    * Receives stream data from an open TCP socket</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> <span class="comment">    *</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span> <span class="comment">    * @param id id to receive from</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> <span class="comment">    * @param data placeholder for returned information</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment">    * @param amount number of bytes to be received</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment">    * @return the number of bytes received</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment">    */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>     int32_t recv_tcp(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *data, uint32_t amount, mbed::chrono::milliseconds_u32 timeout = ESP8266_RECV_TIMEOUT);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="comment"></span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="comment">    /**</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="comment">    * Closes a socket</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="comment">    *</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="comment">    * @param id id of socket to close, valid only 0-4</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="comment">    * @return true only if socket is closed successfully</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="comment">    */</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>     <span class="keywordtype">bool</span> close(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> <span class="comment"></span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> <span class="comment">    /**</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> <span class="comment">    * Allows timeout to be changed between commands</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment">    *</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment">    * @param timeout_ms timeout of the connection</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment">    */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>     <span class="keywordtype">void</span> set_timeout(mbed::chrono::milliseconds_u32 timeout = ESP8266_MISC_TIMEOUT);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment"></span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment">    /**</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment">    * Checks if data is available</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment">    */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>     <span class="keywordtype">bool</span> readable();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> <span class="comment"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span> <span class="comment">    /**</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> <span class="comment">    * Checks if data can be written</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> <span class="comment">    */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>     <span class="keywordtype">bool</span> writeable();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment">    /**</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment">    * Attach a function to call whenever sigio happens in the serial</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment">    *</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment">    * @param func A pointer to a void function, or 0 to set as none</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment">    */</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>     <span class="keywordtype">void</span> sigio(<a class="code" href="classmbed_1_1_callback.html">mbed::Callback</a>&lt;<span class="keywordtype">void</span>()&gt; func);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment"></span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment">    /**</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment">    * Attach a function to call whenever sigio happens in the serial</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment">    *</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment">    * @param obj pointer to the object to call the member function on</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment">    * @param method pointer to the member function to call</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment">    */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> M&gt;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>     <span class="keywordtype">void</span> sigio(T *obj, M method)</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>     {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>         sigio(<a class="code" href="classmbed_1_1_callback.html">mbed::Callback</a>&lt;<span class="keywordtype">void</span>()&gt;(obj, method));</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>     }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment"></span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment">    /**</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment">    * Attach a function to call whenever network state has changed.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment">    *</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment">    * @param func A pointer to a void function, or 0 to set as none</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment">    */</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>     <span class="keywordtype">void</span> attach(<a class="code" href="classmbed_1_1_callback.html">mbed::Callback</a>&lt;<span class="keywordtype">void</span>()&gt; status_cb);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment"></span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment">    /**</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment">     * Configure SNTP (Simple Network Time Protocol)</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment">     *</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment">     * @param enable   true to enable SNTP or false to disable it</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment">     * @param timezone timezone offset [-11,13] (0 by default)</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment">     * @param server0  optional parameter indicating the first SNTP server ("cn.ntp.org.cn" by default)</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment">     * @param server1  optional parameter indicating the second SNTP server ("ntp.sjtu.edu.cn" by default)</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment">     * @param server2  optional parameter indicating the third SNTP server ("us.pool.ntp.org" by default)</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment">     *</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment">     * @retval true if successful, false otherwise</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment">     */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>     <span class="keywordtype">bool</span> set_sntp_config(<span class="keywordtype">bool</span> enable, <span class="keywordtype">int</span> timezone = 0, <span class="keyword">const</span> <span class="keywordtype">char</span> *server0 = <span class="keyword">nullptr</span>,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>                          <span class="keyword">const</span> <span class="keywordtype">char</span> *server1 = <span class="keyword">nullptr</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *server2 = <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment">    /**</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment">     * Read out the configuration of SNTP (Simple Network Time Protocol)</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment">     *</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment">     * @param enable   true if SNTP is enabled</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment">     * @param timezone timezone offset [-11,13]</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment">     * @param server0  name of the first SNTP server</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment">     * @param server1  name of the second SNTP server (optional, nullptr if not set)</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment">     * @param server2  name of the third SNTP server (optional, nullptr if not set)</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment">     *</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment">     * @retval true if successful, false otherwise</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment">     */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>     <span class="keywordtype">bool</span> get_sntp_config(<span class="keywordtype">bool</span> *enable, <span class="keywordtype">int</span> *timezone, <span class="keywordtype">char</span> *server0,</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>                          <span class="keywordtype">char</span> *server1, <span class="keywordtype">char</span> *server2);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment"></span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment">    /**</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment">     * Read out SNTP time from ESP8266.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment">     *</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> <span class="comment">     * @param t std::tm structure to be filled in</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span> <span class="comment">     * @retval true on success, false otherwise</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment">     *</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment">     * @note ESP8266 must be connected and needs a couple of seconds</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment">     * before returning correct time. It may return 1 Jan 1970 if it is not ready.</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment">     *</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment">     * @note esp8266.sntp-enable must be set to true in mbed_app.json file.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment">     */</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>     <span class="keywordtype">bool</span> get_sntp_time(std::tm *t);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> </div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> M&gt;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>     <span class="keywordtype">void</span> attach(T *obj, M method)</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>     {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>         attach(<a class="code" href="classmbed_1_1_callback.html">mbed::Callback</a>&lt;<span class="keywordtype">void</span>()&gt;(obj, method));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>     }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment"></span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment">    /**</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="comment">     * Read default Wifi mode from flash</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment">     *</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span> <span class="comment">     * return Station, SoftAP or SoftAP+Station - 0 on failure</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span> <span class="comment">     */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>     int8_t default_wifi_mode();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span> <span class="comment"></span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> <span class="comment">    /**</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span> <span class="comment">     * Default Wifi mode written to flash only if changes</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> <span class="comment">     */</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>     <span class="keywordtype">bool</span> set_default_wifi_mode(<span class="keyword">const</span> int8_t mode);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span> <span class="comment"></span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="comment">    /**</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment">     * @param track_ap      if TRUE, sets the county code to be the same as the AP's that ESP is connected to,</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment">     *                      if FALSE the code will not change</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment">     * @param country_code  ISO 3166-1 Alpha-2 coded country code</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment">     * @param channel_start the channel number to start at</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span> <span class="comment">     * @param channels      number of channels</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment">     */</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>     <span class="keywordtype">bool</span> set_country_code_policy(<span class="keywordtype">bool</span> track_ap, <span class="keyword">const</span> <span class="keywordtype">char</span> *country_code, <span class="keywordtype">int</span> channel_start, <span class="keywordtype">int</span> channels);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> <span class="comment"></span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span> <span class="comment">    /** Get the connection status</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span> <span class="comment">     *</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span> <span class="comment">     *  @return         The connection status according to ConnectionStatusType</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span> <span class="comment">     */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>     nsapi_connection_status_t connection_status() <span class="keyword">const</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> <span class="comment"></span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment">    /**</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment">     * Start board's and ESP8266's UART flow control</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> <span class="comment">     *</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment">     * @return true if started</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment">     */</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>     <span class="keywordtype">bool</span> start_uart_hw_flow_ctrl();</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment"></span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment">    /**</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment">     * Stop board's and ESP8266's UART flow control</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span> <span class="comment">     *</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span> <span class="comment">     * @param board_only    true to apply to board only, false to apply both</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span> <span class="comment">     * @return true if started</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span> <span class="comment">     */</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>     <span class="keywordtype">bool</span> stop_uart_hw_flow_ctrl(<span class="keywordtype">bool</span> board_only = <span class="keyword">false</span>);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span> </div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>     <span class="comment">/*</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span> <span class="comment">     * From AT firmware v1.7.0.0 onwards enables TCP passive mode</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> <span class="comment">     */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>     <span class="keywordtype">bool</span> cond_enable_tcp_passive_mode();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span> <span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span> <span class="comment">    /**</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span> <span class="comment">     * For executing OOB processing on background</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span> <span class="comment">     *</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span> <span class="comment">     * @param timeout AT parser receive timeout</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span> <span class="comment">     * @param if TRUE, process all OOBs instead of only one</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> <span class="comment">     */</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>     <span class="keywordtype">void</span> bg_process_oob(std::chrono::duration&lt;uint32_t, std::milli&gt; timeout, <span class="keywordtype">bool</span> all);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> <span class="comment"></span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> <span class="comment">    /**</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment">     * Flush the serial port input buffers.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span> <span class="comment">     *</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="comment">     * If you do HW reset for ESP module, you should</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> <span class="comment">     * flush the input buffers from existing responses</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="comment">     * from the device.</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment">     */</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>     <span class="keywordtype">void</span> flush();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span> </div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>     <span class="keyword">static</span> <span class="keyword">const</span> int8_t WIFIMODE_STATION = 1;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>     <span class="keyword">static</span> <span class="keyword">const</span> int8_t WIFIMODE_SOFTAP = 2;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>     <span class="keyword">static</span> <span class="keyword">const</span> int8_t WIFIMODE_STATION_SOFTAP = 3;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>     <span class="keyword">static</span> <span class="keyword">const</span> int8_t SOCKET_COUNT = 5;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span> <span class="comment">    /**</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment">     * Enables or disables uart input and deep sleep</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment">     *</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment">     * @param lock if TRUE, uart input is enabled and  deep sleep is locked</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment">     * if FALSE, uart input is disabled and  deep sleep is unlocked</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment">     */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>     <span class="keywordtype">int</span> uart_enable_input(<span class="keywordtype">bool</span> lock);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> </div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="keyword">private</span>:</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>     <span class="comment">// FW version</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>     <span class="keyword">struct </span>fw_sdk_version _sdk_v;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>     <span class="keyword">struct </span>fw_at_version _at_v;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> </div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>     <span class="comment">// FW version specific settings and functionalities</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>     <span class="keywordtype">bool</span> _tcp_passive;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>     int32_t _recv_tcp_passive(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *data, uint32_t amount, std::chrono::duration&lt;uint32_t, std::milli&gt; timeout);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>     <a class="code" href="classmbed_1_1_callback.html">mbed::Callback&lt;void()&gt;</a> _callback;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span> </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>     <span class="comment">// UART settings</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>     <a class="code" href="classmbed_1_1_buffered_serial.html">mbed::BufferedSerial</a> _serial;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>     PinName _serial_rts;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>     PinName _serial_cts;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>     <a class="code" href="classrtos_1_1_mutex.html">rtos::Mutex</a> _smutex; <span class="comment">// Protect serial port access</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> </div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>     <span class="comment">// AT Command Parser</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>     <a class="code" href="classmbed_1_1_a_t_cmd_parser.html">mbed::ATCmdParser</a> _parser;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> </div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>     <span class="comment">// Wifi scan result handling</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>     <span class="keywordtype">bool</span> _recv_ap(<a class="code" href="structnsapi__wifi__ap.html">nsapi_wifi_ap_t</a> *ap);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> </div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>     <span class="comment">// Socket data buffer</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>     <span class="keyword">struct </span>packet {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>         <span class="keyword">struct </span>packet *next;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>         <span class="keywordtype">int</span> id;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>         <span class="keywordtype">char</span> remote_ip[16];</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>         <span class="keywordtype">int</span> remote_port;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>         uint32_t len; <span class="comment">// Remaining length</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>         uint32_t alloc_len; <span class="comment">// Original length</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>         <span class="comment">// data follows</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>     } *_packets, * *_packets_end;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>     <span class="keywordtype">void</span> _clear_socket_packets(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>     <span class="keywordtype">void</span> _clear_socket_sending(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>     <span class="keywordtype">int</span> _sock_active_id;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span> </div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>     <span class="comment">// Memory statistics</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>     <span class="keywordtype">size_t</span> _heap_usage; <span class="comment">// (Socket data buffer usage)</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span> </div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>     <span class="comment">// OOB processing</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>     <span class="keywordtype">void</span> _process_oob(std::chrono::duration&lt;uint32_t, std::milli&gt; timeout, <span class="keywordtype">bool</span> all);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span> </div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>     <span class="comment">// OOB message handlers</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>     <span class="keywordtype">void</span> _oob_packet_hdlr();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>     <span class="keywordtype">void</span> _oob_connect_err();</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>     <span class="keywordtype">void</span> _oob_conn_already();</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>     <span class="keywordtype">void</span> _oob_err();</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>     <span class="keywordtype">void</span> _oob_socket0_closed();</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>     <span class="keywordtype">void</span> _oob_socket1_closed();</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>     <span class="keywordtype">void</span> _oob_socket2_closed();</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>     <span class="keywordtype">void</span> _oob_socket3_closed();</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>     <span class="keywordtype">void</span> _oob_socket4_closed();</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>     <span class="keywordtype">void</span> _oob_connection_status();</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>     <span class="keywordtype">void</span> _oob_socket_close_err();</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>     <span class="keywordtype">void</span> _oob_watchdog_reset();</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>     <span class="keywordtype">void</span> _oob_busy();</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>     <span class="keywordtype">void</span> _oob_tcp_data_hdlr();</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>     <span class="keywordtype">void</span> _oob_ready();</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>     <span class="keywordtype">void</span> _oob_scan_results();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>     <span class="keywordtype">void</span> _oob_send_ok_received();</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>     <span class="keywordtype">void</span> _oob_send_fail_received();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span> </div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>     <span class="comment">// OOB state variables</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>     <span class="keywordtype">int</span> _connect_error;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>     <span class="keywordtype">bool</span> _disconnect;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>     <span class="keywordtype">bool</span> _fail;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>     <span class="keywordtype">bool</span> _sock_already;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>     <span class="keywordtype">bool</span> _closed;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>     <span class="keywordtype">bool</span> _error;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>     <span class="keywordtype">bool</span> _busy;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>     <span class="keywordtype">bool</span> _reset_done;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>     <span class="keywordtype">int</span> _sock_sending_id;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span> </div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>     <span class="comment">// Modem's address info</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>     <span class="keywordtype">char</span> _ip_buffer[16];</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>     <span class="keywordtype">char</span> _gateway_buffer[16];</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>     <span class="keywordtype">char</span> _netmask_buffer[16];</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>     <span class="keywordtype">char</span> _mac_buffer[18];</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span> </div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>     <span class="comment">// Modem's socket info</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>     <span class="keyword">struct </span>_sock_info {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>         <span class="keywordtype">bool</span> open;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>         nsapi_protocol_t proto;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>         <span class="keywordtype">char</span> *tcp_data;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>         int32_t tcp_data_avbl; <span class="comment">// Data waiting on modem</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>         int32_t tcp_data_rcvd;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>         <span class="keywordtype">bool</span> send_fail;     <span class="comment">// Received 'SEND FAIL'. Expect user will close the socket.</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>     };</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>     <span class="keyword">struct </span>_sock_info _sock_i[SOCKET_COUNT];</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span> </div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>     <span class="comment">// Scan results</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>     <span class="keyword">struct </span>_scan_results {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>         <a class="code" href="class_wi_fi_access_point.html">WiFiAccessPoint</a> *res;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>         <span class="keywordtype">unsigned</span> limit;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>         <span class="keywordtype">unsigned</span> cnt;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>     };</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>     <span class="keyword">struct </span>_scan_results _scan_r;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span> </div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>     <span class="comment">// Connection state reporting</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>     nsapi_connection_status_t _conn_status;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>     <a class="code" href="classmbed_1_1_callback.html">mbed::Callback&lt;void()&gt;</a> _conn_stat_cb; <span class="comment">// ESP8266Interface registered</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span> };</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span> <span class="preprocessor">#endif</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span> <span class="preprocessor">#endif</span></div><div class="ttc" id="_socket_address_8h_html"><div class="ttname"><a href="_socket_address_8h.html">SocketAddress.h</a></div><div class="ttdoc">SocketAddress class. </div></div>
<div class="ttc" id="group__netsocket_html_ga67a8f07758d2ee2a1809293fa52bdf14"><div class="ttname"><a href="group__netsocket.html#ga67a8f07758d2ee2a1809293fa52bdf14">nsapi_error_t</a></div><div class="ttdeci">signed int nsapi_error_t</div><div class="ttdoc">Type used to represent error codes. </div><div class="ttdef"><b>Definition:</b> <a href="nsapi__types_8h_source.html#l00142">nsapi_types.h:142</a></div></div>
<div class="ttc" id="group__netsocket_html_ga1aef0d1a2599df92bb4499b5c4262d25"><div class="ttname"><a href="group__netsocket.html#ga1aef0d1a2599df92bb4499b5c4262d25">nsapi_size_or_error_t</a></div><div class="ttdeci">signed int nsapi_size_or_error_t</div><div class="ttdoc">Type used to represent either a size or error passed through sockets. </div><div class="ttdef"><b>Definition:</b> <a href="nsapi__types_8h_source.html#l00153">nsapi_types.h:153</a></div></div>
<div class="ttc" id="structnsapi__wifi__ap_html"><div class="ttname"><a href="structnsapi__wifi__ap.html">nsapi_wifi_ap</a></div><div class="ttdoc">nsapi_wifi_ap structure </div><div class="ttdef"><b>Definition:</b> <a href="nsapi__types_8h_source.html#l00358">nsapi_types.h:358</a></div></div>
<div class="ttc" id="class_socket_address_html"><div class="ttname"><a href="class_socket_address.html">SocketAddress</a></div><div class="ttdoc">SocketAddress class. </div><div class="ttdef"><b>Definition:</b> <a href="_socket_address_8h_source.html#l00037">SocketAddress.h:37</a></div></div>
<div class="ttc" id="classrtos_1_1_mutex_html"><div class="ttname"><a href="classrtos_1_1_mutex.html">rtos::Mutex</a></div><div class="ttdoc">The Mutex class is used to synchronize the execution of threads. </div><div class="ttdef"><b>Definition:</b> <a href="_mutex_8h_source.html#l00070">Mutex.h:70</a></div></div>
<div class="ttc" id="classmbed_1_1_buffered_serial_html"><div class="ttname"><a href="classmbed_1_1_buffered_serial.html">mbed::BufferedSerial</a></div><div class="ttdoc">Class providing buffered UART communication functionality using separate circular buffer for send and...</div><div class="ttdef"><b>Definition:</b> <a href="_buffered_serial_8h_source.html#l00052">BufferedSerial.h:52</a></div></div>
<div class="ttc" id="classmbed_1_1_a_t_cmd_parser_html"><div class="ttname"><a href="classmbed_1_1_a_t_cmd_parser.html">mbed::ATCmdParser</a></div><div class="ttdoc">Parser class for parsing AT commands. </div><div class="ttdef"><b>Definition:</b> <a href="_a_t_cmd_parser_8h_source.html#l00056">ATCmdParser.h:56</a></div></div>
<div class="ttc" id="group__platform__debug_html_ga6323152a16378cf85c6e7a9a09d23924"><div class="ttname"><a href="group__platform__debug.html#ga6323152a16378cf85c6e7a9a09d23924">debug</a></div><div class="ttdeci">static void debug(const char *format,...) MBED_PRINTF(1</div><div class="ttdoc">Output a debug message. </div><div class="ttdef"><b>Definition:</b> <a href="mbed__debug_8h_source.html#l00044">mbed_debug.h:44</a></div></div>
<div class="ttc" id="classmbed_1_1_callback_html"><div class="ttname"><a href="classmbed_1_1_callback.html">mbed::Callback</a></div><div class="ttdoc">Callback class based on template specialization. </div><div class="ttdef"><b>Definition:</b> <a href="_callback_8h_source.html#l00053">Callback.h:53</a></div></div>
<div class="ttc" id="class_wi_fi_access_point_html"><div class="ttname"><a href="class_wi_fi_access_point.html">WiFiAccessPoint</a></div><div class="ttdoc">WiFiAccessPoint class. </div><div class="ttdef"><b>Definition:</b> <a href="_wi_fi_access_point_8h_source.html#l00029">WiFiAccessPoint.h:29</a></div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/_e_s_p8266_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:23:16 GMT -->
</html>
