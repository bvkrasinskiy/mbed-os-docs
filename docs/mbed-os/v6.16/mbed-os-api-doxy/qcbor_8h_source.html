<!DOCTYPE html>
<html>
    
<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/qcbor_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:26:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
        <meta charset="utf-8"/>
        <title>Mbed OS Reference | qcbor.h Source File</title>
        <link href="../static/css/vendor/foundation-6.2.4.min.mbed-cache-4c48f6c816971070eb1e4eca75f0ec30.css" rel="stylesheet"/>
        <link href="search/search.css" rel="stylesheet"/>
        <link href="../static/css/app.mbed-cache-a44289fe9f5ca07036a335d6ad7ed8ad.css" rel="stylesheet"/>
        <script src="../static/js/vendor/jquery-3.2.1.min.mbed-cache-c9f5aeeca3ad37bf2aa006139b935f0a.js"></script>
        <script src="dynsections.js"></script>
        <script src="search/searchdata.js"></script>
        <script src="search/search.js"></script>
        <script>
            $(document).ready(function() {
                init_search();
            });
        </script>
    
        

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1447836-8');
ga('require', 'GTM-WXMLD4S')
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl+'&gtm_auth=SMYNPwM0ICsV00c1ZHETqQ&gtm_preview=env-2&gtm_cookies_win=x';f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M6FZ495');</script>


    <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:971746,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>



<!-- Favicons -->
<link rel="apple-touch-icon" sizes="57x57" href="../../../../static/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../../../static/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../../../static/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../../../static/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../../../static/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../../../static/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../../../static/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../../../static/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../../../static/img/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../../../static/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../../static/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../../../static/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../../static/img/favicons/favicon-16x16.png">
<link rel="manifest" href="https://os.mbed.com/static/img/favicons/manifest.json">
<link rel="shortcut icon" href="https://os.mbed.com/static/img/favicon.ico?">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/static/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">

<link rel="stylesheet" href="../../../../static/CACHE/css/output.811e2930ab34.css" type="text/css">

<link href="../../../../static/docs/css/doc_viewer.css" rel="stylesheet">
<link href="../../../../static/fonts.css" rel="stylesheet">
<link href="../../../../static/docs-nav-and-footer1b26.css?v2" rel="stylesheet">


<link rel="canonical" href="qcbor_8h_source.html">
<script src="../../../../static/mbed-nav-vertical-menu.js"></script>


    </head>
    <body>
        








<div class="mbed-nav">
    <div class="mbed-nav__mobile-menu-control">
        <i class="mbed-nav__mobile-menu-control-open fas fa-bars fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-close fas fa-times is-hidden fa-fw"></i>
        <i class="mbed-nav__mobile-menu-control-back fas fa-angle-left is-hidden fa-fw"></i>
    </div>
    <div class="mbed-nav__logo">
        <a href="https://os.mbed.com/">
            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#logo"></use></svg>
        </a>
    </div>
    <div class="mbed-nav__menu">

        <!-- Main menu -->
        <nav class="mbed-nav__main-menu">
            <ul class="mbed-nav__dropdown-menu">
                <li class="has-dropdown">
                    Overview

                    <div class="mbed-nav__dropdown-menu-content">

                        <!-- Overview dropdown menu -->
                        <div class="mbed-nav__overview-menu">
                            <section>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <div>
                                                <p>Mbed OS</p>
                                                <p>The open source OS for Cortex-M devices</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link-detail">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <div>
                                                <p>Keil Studio Cloud</p>
                                                <p>Arm's IDE for IoT, embedded and Mbed development</p>
                                            </div>
                                         </a>
                                     </li>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <div>
                                                <p>Mbed Studio</p>
                                                <p>Download the desktop IDE for Mbed OS</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link-detail">

                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <div>
                                               <p>Mbed CLI</p>
                                               <p>Command line access to Mbed tools and services</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>

                            <section>
                                <p>Security and Connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <div>
                                                <p>Mbed TLS and Mbed Crypto</p>
                                                <p>Industry standard TLS stack and crypto library</p>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link-detail">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <div>
                                                <p>Connectivity</p>
                                                <p>BLE, WiFi, Cellular, LoRaWAN and more</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </li>
                <li class="has-dropdown">
                    Hardware

                    <!-- Hardware dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__hardware-dropdown">
                            <ul class="mbed-nav__hardware-menu">
                                <li>
                                    <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                        <div>
                                            <p>Boards</p>
                                            <p>Build your Mbed projects with development boards for Arm Cortex processors and MCUs</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                        <div>
                                            <p>Modules</p>
                                            <p>Modules include a MCU, connectivity and onboard memory, making them ideal for designing IoT products for mass production</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                        <div>
                                            <p>Components</p>
                                            <p>The component database hosts libraries for different sensors, actuators, radios, inputs, middleware and IoT services</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                        <div>
                                            <p>Hardware overview & Mbed Enabled</p>
                                            <p>Learn about hardware support for Mbed, as well as the Mbed Enabled program, which identifies Mbed compatible products</p>
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link-detail">
                                        <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                        <div>
                                            <p>Mbed HDK</p>
                                            <p>Reference designs, schematics and board layouts to develop production hardware and Mbed-compatible development boards</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li class="has-dropdown">
                    Documentation

                    <!-- Documentation dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__documentation-dropdown">
                            <ul class="mbed-nav__documentation-menu">
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a>
                                </li>
                                <li>
                                    <a
                                        href="https://developer.arm.com/documentation/102497/latest/Arm-Keil-Studio-Cloud">
                                        Keil Studio
                                    </a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li class="has-dropdown">
                    Community

                    <!-- Community dropdown menu -->
                    <div class="mbed-nav__dropdown-menu-content">
                        <div class="mbed-nav__community-dropdown">
                            <ul class="mbed-nav__community-menu">
                                <li>
                                    <a href="https://forums.mbed.com/">Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a>
                                </li>
                                <li>
                                    <a href="https://os.mbed.com/support/">Report a problem</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li>
                    <a href="https://os.mbed.com/blog/">Blog</a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="mbed-nav__user-controls">
        <div class="mbed-nav__user-controls-top">
            <div class="mbed-nav__search">
                <form id="mbed-nav__search-box" class="is-hidden" action="https://os.mbed.com/search" method="GET">
                    <div class="mbed-nav__search-box">
                        <input type="search" name="q" placeholder="Search...">
                        <button type="submit">
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                        </button>
                    </div>
                </form>
                <i class="mbed-nav__search-close fas fa-times is-hidden"></i>
                <svg class="mbed-nav__search-open stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
            </div>
            <a class="mbed-nav__cta" href="https://studio.keil.arm.com/mbed" target="_blank">
                Keil Studio Cloud
            </a>

            
                
                <nav class="mbed-nav__logged-out-nav">
                    <ul class="mbed-nav__dropdown-menu">
                        <li>
                            <svg class="stroke-white"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#profile"></use></svg>

                            <!-- Logged out dropdown menu -->
                            <div class="mbed-nav__dropdown-menu-content">
                                <div class="mbed-nav__logged-out-dropdown">
                                    <ul class="mbed-nav__logged-out-menu">
                                        <li><a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/qcbor_8h_source.html">Log in or Sign up</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                
            
        </div>
    </div>
    <div class="mbed-nav__spacer"></div>
</div>
<div class="mbed-nav__mobile-menu-cover is-hidden">
    <div class="mbed-nav__mobile-menu">

        <div id="mbed-nav__main-menu-mobile">
            <div class="mbed-nav__user-controls-mobile">
                <div class="mbed-nav__user-controls-top-mobile">
                    <form action="https://os.mbed.com/search" method="GET">
                        <div class="mbed-nav__search-box mbed-nav__search-box--light">
                            <input type="search" name="q" placeholder="Search...">
                            <button type="submit">
                                <svg class="stroke-dark-grey"><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#search"></use></svg>
                            </button>
                        </div>
                    </form>
                    
                        
                        <a href="https://os.mbed.com/account/login/?next=/docs/mbed-os/v6.16/mbed-os-api-doxy/qcbor_8h_source.html">Log in or Sign up</a>
                        
                    
                </div>
            </div>

            <ul class="mbed-nav__side-menu">
                <li>
                    <input type="checkbox" name="accordion-toggle" id="overview-accordion">
                    <label for="overview-accordion">Overview</label>
                    <div class="accordion_content">
                        <ul class="overview-menu-mobile">
                            <li>
                                <p>Operating system</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/mbed-os/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_os"></use></svg>
                                            <p>Mbed OS</p>
                                        </a>
                                    </li>
                                    

                                </ul>
                            </li>
                            <li>
                                <p>Development tools</p>
                                <ul>
                                    <li>
                                        <a href="https://os.mbed.com/studio/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_studio"></use></svg>
                                            <p>Mbed Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://www.keil.arm.com/mbed/?utm_source=mbed_com&amp;utm_medium=compiler_button&amp;utm_campaign=mbed_com_promo" class="mbed-nav__icon-link">
                                             <svg><use href="https://os.mbed.com/static/img/keil_studio_icon.2c56c28014c6.svg?#keil_studio_icon"></use></svg>
                                            <p>Keil Studio</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/docs/mbed-os/latest/quick-start/offline-with-mbed-cli.html" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_cli"></use></svg>
                                            <p>Mbed CLI</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <p>Security and connectivity</p>
                                <ul>
                                    <li>
                                        <a href="https://tls.mbed.org/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_tls_crypto"></use></svg>
                                            <p>Mbed TLS and Mbed Crypto</p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://os.mbed.com/connectivity-technologies/" class="mbed-nav__icon-link">
                                            <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#connectivity"></use></svg>
                                            <p>Connectivity</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="hardware-accordion">
                    <label for="hardware-accordion">Hardware</label>
                    <div class="accordion_content">
                        <ul>
                            <li>
                                <a href="https://os.mbed.com/platforms/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#boards"></use></svg>
                                    <p>Boards</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/modules/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#modules"></use></svg>
                                    <p>Modules</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/components/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#components"></use></svg>
                                    <p>Components</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/hardware/" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#hardware_overview"></use></svg>
                                    <p>Hardware overview & Mbed Enabled</p>
                                </a>
                            </li>
                            <li>
                                <a href="https://os.mbed.com/docs/mbed-os/latest/porting/arm-mbed-hdk.html" class="mbed-nav__icon-link">
                                    <svg><use xlink:href="https://os.mbed.com/static/img/mbed_nav_spritesheet.8ac20221a123.svg?v3#mbed_hdk"></use></svg>
                                    <p>Mbed HDK</p>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/code/">Code</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="documentation-accordion">
                    <label for="documentation-accordion">Documentation</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://os.mbed.com/docs/mbed-os/">Mbed OS</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-studio/">Mbed Studio</a></li>
                            <li>
                              <a
                                href="https://developer.arm.com/documentation/102497/1-5/Arm-Keil-Studio/?utm_source=mbed_com&amp;utm_medium=nav_docs_link&amp;utm_campaign=mbed_com_promo">
                                Keil Studio
                              </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/built-with-mbed/">Case studies</a></li>
                <li>
                    <input type="checkbox" name="accordion-toggle" id="community-accordion">
                    <label for="community-accordion">Community</label>
                    <div class="accordion_content">
                        <ul>
                            <li><a href="https://forums.mbed.com/">Forum</a></li>
                            <li><a href="https://os.mbed.com/docs/mbed-os/latest/contributing/index.html">Contribute</a></li>
                            <li><a href="https://www.youtube.com/playlist?list=PLKjl7IFAwc4R4plIZe4IuHlsn8zW7rvKh">Mbed OS Tech Forum</a></li>
                            <li><a href="https://os.mbed.com/support/">Report a problem</a></li>
                        </ul>
                    </div>
                </li>
                <li><a href="https://os.mbed.com/blog/">Blog</a></li>
            </ul>
        </div>

        
    </div>
</div>



<div class="version-picker-container">
    
    <select class="version-picker" onchange="goToVersion(this.value)">
        
            <option
                value="v6.16"
                selected
            >
                v6.16
            </option>
        
            <option
                value="v6.15"
                
            >
                v6.15
            </option>
        
            <option
                value="v6.14"
                
            >
                v6.14
            </option>
        
            <option
                value="v6.13"
                
            >
                v6.13
            </option>
        
            <option
                value="v6.12"
                
            >
                v6.12
            </option>
        
            <option
                value="v6.11"
                
            >
                v6.11
            </option>
        
            <option
                value="v6.10"
                
            >
                v6.10
            </option>
        
            <option
                value="v6.9"
                
            >
                v6.9
            </option>
        
            <option
                value="v6.8"
                
            >
                v6.8
            </option>
        
            <option
                value="v6.7"
                
            >
                v6.7
            </option>
        
            <option
                value="v6.6"
                
            >
                v6.6
            </option>
        
            <option
                value="v6.5"
                
            >
                v6.5
            </option>
        
            <option
                value="v5.15"
                
            >
                v5.15
            </option>
        
    </select>
    

    <div class="contact-us">
        Mistake on this page?
        
            <br>
            <a href="https://github.com/ARMmbed/mbed-os-5-docs/issues">
                Report an issue in GitHub
                <i class="fab fa-github"></i>
            </a>
            or
            <a href="mailto:mbed-support@arm.com">
                email us
                <i class="fas fa-envelope"></i>
            </a>
        
    </div>
</div>

<script>
    function goToVersion(version) {
        window.location.href = window.location.href.replace(
            "v6.16",
            version
        )
    }
</script>

        
        <div class="topbar" id="top">
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div class="tabs" id="navrow1">
    <ul class="tablist">
      <li><a href="index.html"><span>Main Page</span></a></li>
      <li><a href="pages.html"><span>Related Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div class="MSearchBoxInactive" id="MSearchBox">
        <span class="left">
          <img alt="" id="MSearchSelect" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()" src="search/mag_sel.png"/>
          <input accesskey="S" id="MSearchField" onblur="searchBox.OnSearchFieldFocus(false)" onfocus="searchBox.OnSearchFieldFocus(true)" onkeyup="searchBox.OnSearchFieldChange(event)" type="text" value="Search"/>
          </span><span class="right">
            <a href="javascript:searchBox.CloseResultsWindow()" id="MSearchClose"><img alt="" border="0" id="MSearchCloseImg" src="search/close.png"/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2" id="navrow2">
    <ul class="tablist">
      <li><a href="files.html"><span>File List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onkeydown="return searchBox.OnSearchSelectKey(event)" onmouseout="return searchBox.OnSearchSelectHide()" onmouseover="return searchBox.OnSearchSelectShow()">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe frameborder="0" id="MSearchResults" name="MSearchResults" src="javascript:void(0)">
</iframe>
</div>

<div class="navpath" id="nav-path">
  <ul>
<li class="navelem"><a class="el" href="dir_5fdebfbd0a4b5643a5e85bf3c8b1558b.html">mbed-os</a></li><li class="navelem"><a class="el" href="dir_d00fafdb9414f6e624fcf4d73ffde065.html">platform</a></li><li class="navelem"><a class="el" href="dir_a72924067aea8bbead751f11070268f4.html">FEATURE_EXPERIMENTAL_API</a></li><li class="navelem"><a class="el" href="dir_007a19531d3d09289f9f9c2cf309e91b.html">FEATURE_PSA</a></li><li class="navelem"><a class="el" href="dir_05e0d8a557d855fa23572451f1c8ea18.html">TARGET_MBED_PSA_SRV</a></li><li class="navelem"><a class="el" href="dir_ca746bf8ecd12d766019f43663efcc0b.html">services</a></li><li class="navelem"><a class="el" href="dir_923835f9769c78775a68e44a6b879543.html">attestation</a></li><li class="navelem"><a class="el" href="dir_3e8e74e557914f05fcb63c739dc062d4.html">qcbor</a></li><li class="navelem"><a class="el" href="dir_39375c5e13307d3e1d0539a6cbb9bd8a.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">qcbor.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="qcbor_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span> <span class="comment">/*==============================================================================</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span> <span class="comment"> Copyright (c) 2016-2018, The Linux Foundation.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span> <span class="comment"> Copyright (c) 2018-2019, Laurence Lundblade.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span> <span class="comment"> All rights reserved.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span> <span class="comment"> SPDX-License-Identifier: BSD-3-Clause</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span> <span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span> <span class="comment">Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span> <span class="comment">modification, are permitted provided that the following conditions are</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span> <span class="comment">met:</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span> <span class="comment">    * Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span> <span class="comment">      notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span> <span class="comment">    * Redistributions in binary form must reproduce the above</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span> <span class="comment">      copyright notice, this list of conditions and the following</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span> <span class="comment">      disclaimer in the documentation and/or other materials provided</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span> <span class="comment">      with the distribution.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span> <span class="comment">    * Neither the name of The Linux Foundation nor the names of its</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span> <span class="comment">      contributors, nor the name "Laurence Lundblade" may be used to</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span> <span class="comment">      endorse or promote products derived from this software without</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span> <span class="comment">      specific prior written permission.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span> <span class="comment"></span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span> <span class="comment">THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span> <span class="comment">WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span> <span class="comment">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span> <span class="comment">ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span> <span class="comment">BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span> <span class="comment">CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span> <span class="comment">SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span> <span class="comment">BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span> <span class="comment">WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span> <span class="comment">OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span> <span class="comment">IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span> <span class="comment"> ==============================================================================*/</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span> </div><div class="line"><a name="l00034"></a><span class="lineno">   34</span> </div><div class="line"><a name="l00035"></a><span class="lineno">   35</span> <span class="comment">/*===================================================================================</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span> <span class="comment"> FILE:  qcbor.h</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span> <span class="comment"></span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span> <span class="comment"> DESCRIPTION:  This is the full public API and data structures for QCBOR</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span> <span class="comment"></span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span> <span class="comment"> EDIT HISTORY FOR FILE:</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span> <span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span> <span class="comment"> This section contains comments describing changes made to the module.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span> <span class="comment"> Notice that changes are listed in reverse chronological order.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span> <span class="comment"></span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span> <span class="comment"> when               who             what, where, why</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span> <span class="comment"> --------           ----            ---------------------------------------------------</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span> <span class="comment"> 12/18/18           llundblade      Move decode malloc optional code to separate repository</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span> <span class="comment"> 12/13/18           llundblade      Documentatation improvements</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span> <span class="comment"> 11/29/18           llundblade      Rework to simpler handling of tags and labels.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span> <span class="comment"> 11/9/18            llundblade      Error codes are now enums.</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span> <span class="comment"> 11/1/18            llundblade      Floating support.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span> <span class="comment"> 10/31/18           llundblade      Switch to one license that is almost BSD-3.</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span> <span class="comment"> 10/15/18           llundblade      Indefinite length maps and arrays supported</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span> <span class="comment"> 10/8/18            llundblade      Indefinite length strings supported</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span> <span class="comment"> 09/28/18           llundblade      Added bstr wrapping feature for COSE implementation.</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span> <span class="comment"> 07/05/17           llundbla        Add bstr wrapping of maps/arrays for COSE.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span> <span class="comment"> 03/01/17           llundbla        More data types; decoding improvements and fixes.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span> <span class="comment"> 11/13/16           llundbla        Integrate most TZ changes back into github version.</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span> <span class="comment"> 09/30/16           gkanike         Porting to TZ.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span> <span class="comment"> 03/15/16           llundbla        Initial Version.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span> <span class="comment"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span> <span class="comment"> =====================================================================================*/</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span> </div><div class="line"><a name="l00064"></a><span class="lineno">   64</span> <span class="preprocessor">#ifndef __QCBOR__qcbor__</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span> <span class="preprocessor">#define __QCBOR__qcbor__</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span> </div><div class="line"><a name="l00067"></a><span class="lineno">   67</span> <span class="comment">/*...... This is a ruler that is 80 characters long...........................*/</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span> </div><div class="line"><a name="l00069"></a><span class="lineno">   69</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span> <span class="comment">   BEGINNING OF PRIVATE PART OF THIS FILE</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span> <span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span> <span class="comment">   Caller of QCBOR should not reference any of the details below up until</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span> <span class="comment">   the start of the public part.</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span> <span class="comment">   =========================================================================== */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span> </div><div class="line"><a name="l00076"></a><span class="lineno">   76</span> <span class="comment">/*</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span> <span class="comment"> Standard integer types are used in the interface to be precise about</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span> <span class="comment"> sizes to be better at preventing underflow/overflow errors.</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span> <span class="comment"> */</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span> <span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span> <span class="preprocessor">#include &lt;stdbool.h&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span> <span class="preprocessor">#include "<a class="code" href="_useful_buf_8h.html">UsefulBuf.h</a>"</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span> </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span> </div><div class="line"><a name="l00085"></a><span class="lineno">   85</span> <span class="comment">/*</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span> <span class="comment"> The maxium nesting of arrays and maps when encoding or decoding.</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span> <span class="comment"> (Further down in the file there is a definition that refers to this</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span> <span class="comment"> that is public. This is done this way so there can be a nice</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span> <span class="comment"> separation of public and private parts in this file.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span> <span class="comment">*/</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span> <span class="preprocessor">#define QCBOR_MAX_ARRAY_NESTING1 15 // Do not increase this over 255</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span> </div><div class="line"><a name="l00093"></a><span class="lineno">   93</span> </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span> <span class="comment">/* The largest offset to the start of an array or map. It is slightly</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span> <span class="comment"> less than UINT32_MAX so the error condition can be tests on 32-bit machines.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span> <span class="comment"> UINT32_MAX comes from uStart in QCBORTrackNesting being a uin32_t.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span> <span class="comment"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span> <span class="comment"> This will cause trouble on a machine where size_t is less than 32-bits.</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span> <span class="comment"> */</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span> <span class="preprocessor">#define QCBOR_MAX_ARRAY_OFFSET  (UINT32_MAX - 100)</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span> </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span> <span class="comment">/*</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span> <span class="comment"> PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span> <span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span> <span class="comment"> Holds the data for tracking array and map nesting during encoding. Pairs up with</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span> <span class="comment"> the Nesting_xxx functions to make an "object" to handle nesting encoding.</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span> <span class="comment"></span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span> <span class="comment"> uStart is a uint32_t instead of a size_t to keep the size of this</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span> <span class="comment"> struct down so it can be on the stack without any concern.  It would be about</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span> <span class="comment"> double if size_t was used instead.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span> <span class="comment"></span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span> <span class="comment"> Size approximation (varies with CPU/compiler):</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span> <span class="comment">    64-bit machine: (15 + 1) * (4 + 2 + 1 + 1 pad) + 8 = 136 bytes</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span> <span class="comment">    32-bit machine: (15 + 1) * (4 + 2 + 1 + 1 pad) + 4 = 132 bytes</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span> <span class="comment">*/</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="struct_____q_c_b_o_r_track_nesting.html">  116</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_____q_c_b_o_r_track_nesting.html">__QCBORTrackNesting</a> {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>    <span class="keyword">struct </span>{</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>       <span class="comment">// See function OpenArrayInternal() for detailed comments on how this works</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>       uint32_t  uStart;     <span class="comment">// uStart is the byte position where the array starts</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>       uint16_t  uCount;     <span class="comment">// Number of items in the arrary or map; counts items in a map, not pairs of items</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>       uint8_t   uMajorType; <span class="comment">// Indicates if item is a map or an array</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>    } pArrays[QCBOR_MAX_ARRAY_NESTING1+1], <span class="comment">// stored state for the nesting levels</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>    *pCurrentNesting; <span class="comment">// the current nesting level</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span> } <a class="code" href="struct_____q_c_b_o_r_track_nesting.html">QCBORTrackNesting</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span> </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span> </div><div class="line"><a name="l00128"></a><span class="lineno">  128</span> <span class="comment">/*</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span> <span class="comment"> PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span> <span class="comment"></span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span> <span class="comment"> Context / data object for encoding some CBOR. Used by all encode functions to</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span> <span class="comment"> form a public "object" that does the job of encdoing.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span> <span class="comment"></span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span> <span class="comment"> Size approximation (varies with CPU/compiler):</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span> <span class="comment">   64-bit machine: 27 + 1 (+ 4 padding) + 136 = 32 + 136 = 168 bytes</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span> <span class="comment">   32-bit machine: 15 + 1 + 132 = 148 bytes</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span> <span class="comment">*/</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_encode_context.html">  138</a></span> <span class="keyword">struct </span><a class="code" href="struct___q_c_b_o_r_encode_context.html">_QCBOREncodeContext</a> {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>    <span class="comment">// PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>    <a class="code" href="structuseful__out__buf.html">UsefulOutBuf</a>      OutBuf;  <span class="comment">// Pointer to output buffer, its length and position in it</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>    uint8_t           uError;  <span class="comment">// Error state</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>    <a class="code" href="struct_____q_c_b_o_r_track_nesting.html">QCBORTrackNesting</a> nesting; <span class="comment">// Keep track of array and map nesting</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span> };</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span> </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span> </div><div class="line"><a name="l00146"></a><span class="lineno">  146</span> <span class="comment">/*</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span> <span class="comment"> PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span> <span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span> <span class="comment"> Holds the data for array and map nesting for decoding work. This structure</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span> <span class="comment"> and the DecodeNesting_xxx functions form an "object" that does the work</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span> <span class="comment"> for arrays and maps.</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span> <span class="comment"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span> <span class="comment"> Size approximation (varies with CPU/compiler):</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span> <span class="comment">   64-bit machine: 4 * 16 + 8 = 72</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span> <span class="comment">   32-bit machine: 4 * 16 + 4 = 68</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span> <span class="comment"> */</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="struct_____q_c_b_o_r_decode_nesting.html">  157</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_____q_c_b_o_r_decode_nesting.html">__QCBORDecodeNesting</a>  {</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>   <span class="comment">// PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>    <span class="keyword">struct </span>{</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>       uint16_t uCount;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>       uint8_t  uMajorType;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>    } pMapsAndArrays[QCBOR_MAX_ARRAY_NESTING1+1],</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>    *pCurrent;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span> } <a class="code" href="struct_____q_c_b_o_r_decode_nesting.html">QCBORDecodeNesting</a>;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span> </div><div class="line"><a name="l00166"></a><span class="lineno">  166</span> </div><div class="line"><a name="l00167"></a><span class="lineno">  167</span> <span class="comment">/*</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span> <span class="comment"> PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span> <span class="comment"></span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span> <span class="comment"> The decode context. This data structure plus the public QCBORDecode_xxx</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span> <span class="comment"> functions form an "object" that does CBOR decoding.</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span> <span class="comment"></span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span> <span class="comment"> Size approximation (varies with CPU/compiler):</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span> <span class="comment">   64-bit machine: 32 + 1 + 1 + 6 bytes padding + 72 + 16 = 128 bytes</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span> <span class="comment">   32-bit machine: 16 + 1 + 1 + 2 bytes padding + 68 + 8  = 68 bytes</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span> <span class="comment"> */</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_decode_context.html">  177</a></span> <span class="keyword">struct </span><a class="code" href="struct___q_c_b_o_r_decode_context.html">_QCBORDecodeContext</a> {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>    <span class="comment">// PRIVATE DATA STRUCTURE</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>    <a class="code" href="structuseful__input__buf.html">UsefulInputBuf</a> InBuf;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span> </div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>    uint8_t        uDecodeMode;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>    uint8_t        bStringAllocateAll;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span> </div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>    <a class="code" href="struct_____q_c_b_o_r_decode_nesting.html">QCBORDecodeNesting</a> nesting;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span> </div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>    <span class="comment">// This is NULL or points to a QCBORStringAllocator. It is void</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// here because _QCBORDecodeContext is defined early in the</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// private part of this file and QCBORStringAllocat is defined</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>    <span class="comment">// later in the public part of this file.</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>    <span class="keywordtype">void</span> *pStringAllocator;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span> </div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// This is NULL or points to QCBORTagList.</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>    <span class="comment">// It is type void for the same reason as above.</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>    <span class="keyword">const</span> <span class="keywordtype">void</span> *pCallerConfiguredTagList;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span> };</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span> </div><div class="line"><a name="l00197"></a><span class="lineno">  197</span> <span class="comment">// Used internally in the impementation here</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span> <span class="comment">// Must not conflict with any of the official CBOR types</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span> <span class="preprocessor">#define CBOR_MAJOR_NONE_TYPE_RAW  9</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span> <span class="preprocessor">#define CBOR_MAJOR_NONE_TAG_LABEL_REORDER 10</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span> </div><div class="line"><a name="l00202"></a><span class="lineno">  202</span> </div><div class="line"><a name="l00203"></a><span class="lineno">  203</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span> <span class="comment">   END OF PRIVATE PART OF THIS FILE</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span> <span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span> <span class="comment">   BEGINNING OF PUBLIC PART OF THIS FILE</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span> <span class="comment">   =========================================================================== */</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span> </div><div class="line"><a name="l00209"></a><span class="lineno">  209</span> </div><div class="line"><a name="l00210"></a><span class="lineno">  210</span> </div><div class="line"><a name="l00211"></a><span class="lineno">  211</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span> <span class="comment">   BEGINNING OF CONSTANTS THAT COME FROM THE CBOR STANDARD, RFC 7049</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span> <span class="comment"></span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span> <span class="comment">   It is not necessary to use these directly when encoding or decoding</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span> <span class="comment">   CBOR with this implementation.</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span> <span class="comment">   =========================================================================== */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span> </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span> <span class="comment">/* Standard CBOR Major type for positive integers of various lengths */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_POSITIVE_INT 0</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span> </div><div class="line"><a name="l00221"></a><span class="lineno">  221</span> <span class="comment">/* Standard CBOR Major type for negative integer of various lengths */</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_NEGATIVE_INT 1</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span> </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span> <span class="comment">/* Standard CBOR Major type for an array of arbitrary 8-bit bytes. */</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_BYTE_STRING  2</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span> </div><div class="line"><a name="l00227"></a><span class="lineno">  227</span> <span class="comment">/* Standard CBOR Major type for a UTF-8 string. Note this is true 8-bit UTF8</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span> <span class="comment"> with no encoding and no NULL termination */</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_TEXT_STRING  3</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span> </div><div class="line"><a name="l00231"></a><span class="lineno">  231</span> <span class="comment">/* Standard CBOR Major type for an ordered array of other CBOR data items */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_ARRAY        4</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span> </div><div class="line"><a name="l00234"></a><span class="lineno">  234</span> <span class="comment">/* Standard CBOR Major type for CBOR MAP. Maps an array of pairs. The</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span> <span class="comment"> first item in the pair is the "label" (key, name or identfier) and the second</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span> <span class="comment"> item is the value.  */</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_MAP          5</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span> </div><div class="line"><a name="l00239"></a><span class="lineno">  239</span> <span class="comment">/* Standard CBOR optional tagging. This tags things like dates and URLs */</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_OPTIONAL     6</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span> </div><div class="line"><a name="l00242"></a><span class="lineno">  242</span> <span class="comment">/* Standard CBOR extra simple types like floats and the values true and false */</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span> <span class="preprocessor">#define CBOR_MAJOR_TYPE_SIMPLE       7</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span> </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span> </div><div class="line"><a name="l00246"></a><span class="lineno">  246</span> <span class="comment">/*</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span> <span class="comment"> These are special values for the AdditionalInfo bits that are part of the first byte.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span> <span class="comment"> Mostly they encode the length of the data item.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span> <span class="comment"> */</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span> <span class="preprocessor">#define LEN_IS_ONE_BYTE    24</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span> <span class="preprocessor">#define LEN_IS_TWO_BYTES   25</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span> <span class="preprocessor">#define LEN_IS_FOUR_BYTES  26</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span> <span class="preprocessor">#define LEN_IS_EIGHT_BYTES 27</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span> <span class="preprocessor">#define ADDINFO_RESERVED1  28</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span> <span class="preprocessor">#define ADDINFO_RESERVED2  29</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span> <span class="preprocessor">#define ADDINFO_RESERVED3  30</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span> <span class="preprocessor">#define LEN_IS_INDEFINITE  31</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span> </div><div class="line"><a name="l00259"></a><span class="lineno">  259</span> </div><div class="line"><a name="l00260"></a><span class="lineno">  260</span> <span class="comment">/*</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span> <span class="comment"> 24 is a special number for CBOR. Integers and lengths</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span> <span class="comment"> less than it are encoded in the same byte as the major type</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span> <span class="comment"> */</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span> <span class="preprocessor">#define CBOR_TWENTY_FOUR   24</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span> </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span> </div><div class="line"><a name="l00267"></a><span class="lineno">  267</span> <span class="comment">/*</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span> <span class="comment"> Tags that are used with CBOR_MAJOR_TYPE_OPTIONAL. These are</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span> <span class="comment"> the ones defined in the CBOR spec.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span> <span class="comment"> */</span><span class="comment"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span> <span class="comment">/** See QCBOREncode_AddDateString() below */</span></div><div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a5f01747fee8d393dd1bda112484ab040">  272</a></span> <span class="preprocessor">#define CBOR_TAG_DATE_STRING    0</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span> <span class="comment">/** See QCBOREncode_AddDateEpoch_2() */</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a7dedcb07c8058893a67efe42f6740990">  274</a></span> <span class="preprocessor">#define CBOR_TAG_DATE_EPOCH     1</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span> <span class="preprocessor">#define CBOR_TAG_POS_BIGNUM     2</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span> <span class="preprocessor">#define CBOR_TAG_NEG_BIGNUM     3</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span> <span class="preprocessor">#define CBOR_TAG_FRACTION       4</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span> <span class="preprocessor">#define CBOR_TAG_BIGFLOAT       5</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span> </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span> <span class="preprocessor">#define CBOR_TAG_COSE_ENCRYPTO 16</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span> <span class="preprocessor">#define CBOR_TAG_COSE_MAC0     17</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span> <span class="preprocessor">#define CBOR_TAG_COSE_SIGN1    18</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span> </div><div class="line"><a name="l00284"></a><span class="lineno">  284</span> <span class="comment">/* The data in byte string should be converted in base 64 URL when encoding in JSON or similar text-based representations */</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span> <span class="preprocessor">#define CBOR_TAG_ENC_AS_B64URL 21</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span> <span class="comment">/* The data in byte string should be encoded in base 64 when encoding in JSON */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span> <span class="preprocessor">#define CBOR_TAG_ENC_AS_B64    22</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span> <span class="comment">/* The data in byte string should be encoded in base 16 when encoding in JSON */</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span> <span class="preprocessor">#define CBOR_TAG_ENC_AS_B16    23</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span> <span class="preprocessor">#define CBOR_TAG_CBOR          24</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span> <span class="comment">/** The data in the string is a URIs, as defined in RFC3986 */</span></div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a4ae8a1164ab0a3341445582cfe81613f">  292</a></span> <span class="preprocessor">#define CBOR_TAG_URI           32</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span> <span class="comment">/** The data in the string is a base 64'd URL */</span></div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a531e2d609d863de2e6cd1287d42c0357">  294</a></span> <span class="preprocessor">#define CBOR_TAG_B64URL        33</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span> <span class="comment">/** The data in the string is base 64'd */</span></div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a82fe584ddba0632aeda34609d4fabeed">  296</a></span> <span class="preprocessor">#define CBOR_TAG_B64           34</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span> <span class="comment">/** regular expressions in Perl Compatible Regular Expressions (PCRE) / JavaScript syntax ECMA262. */</span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aa819563ea8b98c073c4533ef345eeef2">  298</a></span> <span class="preprocessor">#define CBOR_TAG_REGEX         35</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span> <span class="comment">/** MIME messages (including all headers), as defined in RFC2045 */</span></div><div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="qcbor_8h.html#af8bb552dc369fa13a9aaa74cd84f191b">  300</a></span> <span class="preprocessor">#define CBOR_TAG_MIME          36</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span> <span class="comment">/** Binary UUID */</span></div><div class="line"><a name="l00302"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a83d58429f77ffbe918a6d923b0c54735">  302</a></span> <span class="preprocessor">#define CBOR_TAG_BIN_UUID      37</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span> </div><div class="line"><a name="l00304"></a><span class="lineno">  304</span> <span class="preprocessor">#define CBOR_TAG_CWT           61</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span> </div><div class="line"><a name="l00306"></a><span class="lineno">  306</span> <span class="preprocessor">#define CBOR_TAG_ENCRYPT       96</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span> <span class="preprocessor">#define CBOR_TAG_MAC           97</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span> <span class="preprocessor">#define CBOR_TAG_SIGN          98</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span> </div><div class="line"><a name="l00310"></a><span class="lineno">  310</span> <span class="preprocessor">#define CBOR_TAG_GEO_COORD    103</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span> </div><div class="line"><a name="l00312"></a><span class="lineno">  312</span> <span class="comment"></span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span> <span class="comment">/** The data is CBOR data */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="qcbor_8h.html#acae1b64585c657d98bef46b06e9757b6">  314</a></span> <span class="preprocessor">#define CBOR_TAG_CBOR_MAGIC 55799</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span> <span class="preprocessor">#define CBOR_TAG_NONE  UINT64_MAX</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span> </div><div class="line"><a name="l00317"></a><span class="lineno">  317</span> </div><div class="line"><a name="l00318"></a><span class="lineno">  318</span> <span class="comment">/*</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span> <span class="comment"> Values for the 5 bits for items of major type 7</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span> <span class="comment"> */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span> <span class="preprocessor">#define CBOR_SIMPLEV_FALSE   20</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span> <span class="preprocessor">#define CBOR_SIMPLEV_TRUE    21</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span> <span class="preprocessor">#define CBOR_SIMPLEV_NULL    22</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span> <span class="preprocessor">#define CBOR_SIMPLEV_UNDEF   23</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span> <span class="preprocessor">#define CBOR_SIMPLEV_ONEBYTE 24</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span> <span class="preprocessor">#define HALF_PREC_FLOAT      25</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span> <span class="preprocessor">#define SINGLE_PREC_FLOAT    26</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span> <span class="preprocessor">#define DOUBLE_PREC_FLOAT    27</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span> <span class="preprocessor">#define CBOR_SIMPLE_BREAK    31</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span> </div><div class="line"><a name="l00331"></a><span class="lineno">  331</span> </div><div class="line"><a name="l00332"></a><span class="lineno">  332</span> </div><div class="line"><a name="l00333"></a><span class="lineno">  333</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span> <span class="comment"></span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span> <span class="comment"> END OF CONSTANTS THAT COME FROM THE CBOR STANDARD, RFC 7049</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span> <span class="comment"></span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span> <span class="comment"> BEGINNING OF PUBLIC INTERFACE FOR QCBOR ENCODER / DECODER</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span> <span class="comment"></span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span> <span class="comment"> =========================================================================== */</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span> <span class="comment"></span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span> <span class="comment">/**</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span> <span class="comment"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span> <span class="comment"> @file qcbor.h</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span> <span class="comment"></span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span> <span class="comment"> Q C B O R   E n c o d e / D e c o d e</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span> <span class="comment"></span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span> <span class="comment"> This implements CBOR -- Concise Binary Object Representation as defined</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span> <span class="comment"> in RFC 7049. More info is at http://cbor.io.  This is a near-complete</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span> <span class="comment"> implementation of the specification. Limitations are listed further down.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span> <span class="comment"></span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span> <span class="comment"> CBOR is intentionally designed to be translatable to JSON, but not</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span> <span class="comment"> all CBOR can convert to JSON. See RFC 7049 for more info on how to</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span> <span class="comment"> construct CBOR that is the most JSON friendly.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span> <span class="comment"></span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span> <span class="comment"> The memory model for encoding and decoding is that encoded CBOR</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span> <span class="comment"> must be in a contiguous buffer in memory.  During encoding the</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span> <span class="comment"> caller must supply an output buffer and if the encoding would go</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span> <span class="comment"> off the end of the buffer an error is returned.  During decoding</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span> <span class="comment"> the caller supplies the encoded CBOR in a contiguous buffer</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span> <span class="comment"> and the decoder returns pointers and lengths into that buffer</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span> <span class="comment"> for strings.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span> <span class="comment"></span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span> <span class="comment"> This implementation does not require malloc. All data structures</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span> <span class="comment"> passed in/out of the APIs can fit on the stack.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span> <span class="comment"></span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span> <span class="comment"> Decoding of indefinite length strings is a special case that requires</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span> <span class="comment"> a "string allocator" to allocate memory into which the segments of</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span> <span class="comment"> the string are coalesced. Without this, decoding will error out if</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span> <span class="comment"> an indefinite length string is encountered (indefinite length maps</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span> <span class="comment"> and arrays do not require the string allocator). A simple string</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span> <span class="comment"> allocator called MemPool is built-in and will work if supplied with</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span> <span class="comment"> a block of memory to allocate. The string allocator can optionally</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span> <span class="comment"> use malloc() or some other custom scheme.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span> <span class="comment"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span> <span class="comment"> Here are some terms and definitions:</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span> <span class="comment"></span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span> <span class="comment"> - "Item", "Data Item": An integer or string or such. The basic "thing" that</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span> <span class="comment"> CBOR is about. An array is an item itself that contains some items.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span> <span class="comment"></span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span> <span class="comment"> - "Array": An ordered sequence of items, the same as JSON.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span> <span class="comment"></span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span> <span class="comment"> - "Map": A collection of label/value pairs. Each pair is a data</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span> <span class="comment"> item. A JSON "object" is the same as a CBOR "map".</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span> <span class="comment"></span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span> <span class="comment"> - "Label": The data item in a pair in a map that names or identifies the</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span> <span class="comment"> pair, not the value. This implementation refers to it as a "label".</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span> <span class="comment"> JSON refers to it as the "name". The CBOR RFC refers to it this as a "key".</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span> <span class="comment"> This implementation chooses label instead because key is too easily confused</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span> <span class="comment"> with a cryptographic key. The COSE standard, which uses CBOR, has also</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span> <span class="comment"> chosen to use the term "label" rather than "key" for this same reason.</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span> <span class="comment"></span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span> <span class="comment"> - "Key": See "Label" above.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span> <span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span> <span class="comment"> - "Tag": Optional info that can be added before each data item. This is always</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span> <span class="comment"> CBOR major type 6.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span> <span class="comment"></span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span> <span class="comment"> - "Initial Byte": The first byte of an encoded item. Encoding and decoding of</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span> <span class="comment"> this byte is taken care of by the implementation.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span> <span class="comment"></span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span> <span class="comment"> - "Additional Info": In addition to the major type, all data items have some</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span> <span class="comment"> other info. This is usually the length of the data, but can be several</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span> <span class="comment"> other things. Encoding and decoding of this is taken care of by the</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span> <span class="comment"> implementation.</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span> <span class="comment"></span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span> <span class="comment"> CBOR has two mechanisms for tagging and labeling the data</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span> <span class="comment"> values like integers and strings. For example, an integer that</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span> <span class="comment"> represents someone's birthday in epoch seconds since Jan 1, 1970</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span> <span class="comment"> could be encoded like this:</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span> <span class="comment"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span> <span class="comment"> - First it is CBOR_MAJOR_TYPE_POSITIVE_INT, the primitive positive</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span> <span class="comment"> integer.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span> <span class="comment"> - Next it has a "tag" CBOR_TAG_DATE_EPOCH indicating the integer</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span> <span class="comment"> represents a date in the form of the number of seconds since</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span> <span class="comment"> Jan 1, 1970.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span> <span class="comment"> - Last it has a string "label" like "BirthDate" indicating</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span> <span class="comment"> the meaning of the data.</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span> <span class="comment"></span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span> <span class="comment"> The encoded binary looks like this:</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span> <span class="comment">   a1                      # Map of 1 item</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span> <span class="comment">      69                   # Indicates text string of 9 bytes</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span> <span class="comment">        426972746844617465 # The text "BirthDate"</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span> <span class="comment">     c1                    # Tags next int as epoch date</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span> <span class="comment">        1a                 # Indicates 4 byte integer</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span> <span class="comment">            580d4172       # unsigned integer date 1477263730</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span> <span class="comment"></span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span> <span class="comment"> Implementors using this API will primarily work with labels. Generally</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span> <span class="comment"> tags are only needed for making up new data types. This implementation</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span> <span class="comment"> covers most of the data types defined in the RFC using tags. It also,</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span> <span class="comment"> allows for the creation of news tags if necessary.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span> <span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span> <span class="comment"> This implementation explicitly supports labels that are text strings</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span> <span class="comment"> and integers. Text strings translate nicely into JSON objects and</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span> <span class="comment"> are very readable.  Integer labels are much less readable, but</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span> <span class="comment"> can be very compact. If they are in the range of -23 to</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span> <span class="comment"> 23 they take up only one byte.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span> <span class="comment"></span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span> <span class="comment"> CBOR allows a label to be any type of data including an array or</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span> <span class="comment"> a map. It is possible to use this API to construct and</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span> <span class="comment"> parse such labels, but it is not explicitly supported.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span> <span class="comment"></span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span> <span class="comment"> A common encoding usage mode is to invoke the encoding twice. First</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span> <span class="comment"> with no output buffer to compute the length of the needed output</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span> <span class="comment"> buffer. Then the correct sized output buffer is allocated. Last the</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span> <span class="comment"> encoder is invoked again, this time with the output buffer.</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span> <span class="comment"></span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span> <span class="comment"> The double invocation is not required if the max output buffer size</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span> <span class="comment"> can be predicted. This is usually possible for simple CBOR structures.</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span> <span class="comment"> If the double invocation is implemented, it can be</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span> <span class="comment"> in a loop or function as in the example code so that the code doesn't</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span> <span class="comment"> have to actually be written twice, saving code size.</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span> <span class="comment"></span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span> <span class="comment"> If a buffer too small to hold the encoded output is given, the error</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span> <span class="comment"> QCBOR_ERR_BUFFER_TOO_SMALL will be returned. Data will never be</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span> <span class="comment"> written off the end of the output buffer no matter which functions</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span> <span class="comment"> here are called or what parameters are passed to them.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span> <span class="comment"></span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span> <span class="comment"> The error handling is simple. The only possible errors are trying to</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span> <span class="comment"> encode structures that are too large or too complex. There are no</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span> <span class="comment"> internal malloc calls so there will be no failures for out of memory.</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span> <span class="comment"> Only the final call, QCBOREncode_Finish(), returns an error code.</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span> <span class="comment"> Once an error happens, the encoder goes into an error state and calls</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span> <span class="comment"> to it will do nothing so the encoding can just go on. An error</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span> <span class="comment"> check is not needed after every data item is added.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span> <span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span> <span class="comment"> Encoding generally proceeds by calling QCBOREncode_Init(), calling</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span> <span class="comment"> lots of "Add" functions and calling QCBOREncode_Finish(). There</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span> <span class="comment"> are many "Add" functions for various data types. The input</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span> <span class="comment"> buffers need only to be valid during the "Add" calls. The</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span> <span class="comment"> data is copied into the output buf during the "Add" call.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span> <span class="comment"></span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span> <span class="comment"> There are three `Add` functions for each data type. The first</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span> <span class="comment"> / main one for the type is for adding the data item to an array.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span> <span class="comment"> The second one's name ends in `ToMap`, is used for adding</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span> <span class="comment"> data items to maps and takes a string</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span> <span class="comment"> argument that is its label in the map. The third one ends in</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span> <span class="comment"> `ToMapN`, is also used for adding data items to maps, and</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span> <span class="comment"> takes an integer argument that is its label in the map.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span> <span class="comment"></span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span> <span class="comment"> The simplest aggregate type is an array, which is a simple ordered</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span> <span class="comment"> set of items without labels the same as JSON arrays. Call</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span> <span class="comment"> QCBOREncode_OpenArray() to open a new array, then "Add" to</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span> <span class="comment"> put items in the array and then QCBOREncode_CloseArray(). Nesting</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span> <span class="comment"> to a limit is allowed.  All opens must be matched by closes or an</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span> <span class="comment"> encoding error will be returned.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span> <span class="comment"></span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span> <span class="comment"> The other aggregate type is a map which does use labels. The</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span> <span class="comment"> `Add` functions that end in `ToMap` and `ToMapN` are convenient</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span> <span class="comment"> ways to add labeled data items to a map. You can also call</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span> <span class="comment"> any type of `Add` function once to add a label of any time and</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span> <span class="comment"> then call any type of `Add` again to add its value.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span> <span class="comment"></span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span> <span class="comment"> Note that when you nest arrays or maps in a map, the nested</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span> <span class="comment"> array or map has a label.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span> <span class="comment"></span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span> <span class="comment"> Usually it is not necessary to add tags explicitly as most</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span> <span class="comment"> tagged types have functions here, but they can be added by</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span> <span class="comment"> calling QCBOREncode_AddTag().  There is an IANA registry for new tags that are</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span> <span class="comment"> for broad use and standardization as per RFC 7049. It is also</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span> <span class="comment"> allowed for protocols to make up new tags in the range above 256.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span> <span class="comment"> Note that even arrays and maps can be tagged.</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span> <span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span> <span class="comment"> Summary Limits of this implementation:</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span> <span class="comment"> - The entire encoded CBOR must fit into contiguous memory.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span> <span class="comment"> - Max size of encoded / decoded CBOR data is UINT32_MAX (4GB).</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span> <span class="comment"> - Max array / map nesting level when encoding / decoding is</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span> <span class="comment">   QCBOR_MAX_ARRAY_NESTING (this is typically 15).</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span> <span class="comment"> - Max items in an array or map when encoding / decoding is</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span> <span class="comment">   QCBOR_MAX_ITEMS_IN_ARRAY (typically 65,536).</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span> <span class="comment"> - Does not support encoding indefinite lengths (decoding is supported).</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span> <span class="comment"> - Does not directly support some tagged types: decimal fractions, big floats</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span> <span class="comment"> - Does not directly support labels in maps other than text strings and ints.</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span> <span class="comment"> - Does not directly support int labels greater than INT64_MAX</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span> <span class="comment"> - Epoch dates limited to INT64_MAX (+/- 292 billion years)</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span> <span class="comment"> - Tags on labels are ignored during decoding</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span> <span class="comment"></span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span> <span class="comment"> This implementation is intended to run on 32 and 64-bit CPUs. Minor</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span> <span class="comment"> modifications are needed for it to work on 16-bit CPUs.</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span> <span class="comment"></span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span> <span class="comment"> The public interface uses size_t for all lengths. Internally the</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span> <span class="comment"> implementation uses 32-bit lengths by design to use less memory and</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span> <span class="comment"> fit structures on the stack. This limits the encoded</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span> <span class="comment"> CBOR it can work with to size UINT32_MAX (4GB) which should be</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span> <span class="comment"> enough.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span> <span class="comment"></span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span> <span class="comment"> This implementation assumes two's compliment integer</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span> <span class="comment"> machines. Stdint.h also requires this. It of course would be easy to</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span> <span class="comment"> fix this implementation for another integer representation, but all</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span> <span class="comment"> modern machines seem to be two's compliment.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span> <span class="comment"></span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span> <span class="comment"> */</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span> </div><div class="line"><a name="l00532"></a><span class="lineno">  532</span> <span class="comment"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span> <span class="comment">/**</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span> <span class="comment"> The maximum number of items in a single array or map when encoding of decoding.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span> <span class="comment">*/</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span> <span class="comment">// -1 is because the value UINT16_MAX is used to track indefinite length arraysUINT16_MAX</span></div><div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="qcbor_8h.html#adb9b599e92af0a69453a8f8b61ec7777">  537</a></span> <span class="preprocessor">#define QCBOR_MAX_ITEMS_IN_ARRAY (UINT16_MAX-1)</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span> <span class="comment"></span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span> <span class="comment">/**</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span> <span class="comment"> The maximum nesting of arrays and maps when encoding or decoding. The</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span> <span class="comment"> error QCBOR_ERR_ARRAY_NESTING_TOO_DEEP will be returned on encoding</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span> <span class="comment"> of decoding if it is exceeded</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span> <span class="comment">*/</span></div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="qcbor_8h.html#adecdeb0c5bc02f8892a2c89cdae3e25e">  544</a></span> <span class="preprocessor">#define QCBOR_MAX_ARRAY_NESTING  QCBOR_MAX_ARRAY_NESTING1</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span> <span class="comment"></span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span> <span class="comment">/**</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span> <span class="comment"> The maximum number of tags that can be in QCBORTagListIn and passed to</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span> <span class="comment"> QCBORDecode_SetCallerConfiguredTagList()</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span> <span class="comment"> */</span></div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="qcbor_8h.html#acc2134be6f6197c468ec2190a16b7086">  550</a></span> <span class="preprocessor">#define QCBOR_MAX_CUSTOM_TAGS    16</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span> </div><div class="line"><a name="l00552"></a><span class="lineno">  552</span> </div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">  553</a></span> <span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span> <span class="comment">   /** The encode or decode completely correctly. */</span></div><div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af59ba798361a9a941d7312c6304a6fba">  555</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af59ba798361a9a941d7312c6304a6fba">QCBOR_SUCCESS</a> = 0,</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span> <span class="comment"></span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span> <span class="comment">   /** The buffer provided for the encoded output when doing encoding was</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span> <span class="comment">       too small and the encoded output will not fit. Also, when the buffer</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span> <span class="comment">       given to QCBORDecode_SetMemPool() is too small. */</span></div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42aea5398e1a2b27fc437b99b9ab91aaafd">  560</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42aea5398e1a2b27fc437b99b9ab91aaafd">QCBOR_ERR_BUFFER_TOO_SMALL</a>,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span> <span class="comment"></span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span> <span class="comment">   /** During encoding or decoding, the array or map nesting was deeper than</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span> <span class="comment">    this implementation can handle. Note that in the interest of code size</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span> <span class="comment">    and memory use, this implementation has a hard limit on array nesting. The</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span> <span class="comment">    limit is defined as the constant QCBOR_MAX_ARRAY_NESTING. */</span></div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a0d74cc5b94f9510ecc5f330c238508b8">  566</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a0d74cc5b94f9510ecc5f330c238508b8">QCBOR_ERR_ARRAY_NESTING_TOO_DEEP</a>,</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span> <span class="comment"></span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span> <span class="comment">   /** During decoding or encoding, the array or map had too many items in it.</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span> <span class="comment">       This limit QCBOR_MAX_ITEMS_IN_ARRAY, typically 65,535. */</span></div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a16d78e7c134706bfa0c5b221774cc9b4">  570</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a16d78e7c134706bfa0c5b221774cc9b4">QCBOR_ERR_ARRAY_TOO_LONG</a>,</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span> <span class="comment"></span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span> <span class="comment">   /** During encoding, more arrays or maps were closed than opened. This is a</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span> <span class="comment">       coding error on the part of the caller of the encoder. */</span></div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab79ef3fec6d6ef45c85d925a5f9c78c6">  574</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab79ef3fec6d6ef45c85d925a5f9c78c6">QCBOR_ERR_TOO_MANY_CLOSES</a>,</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span> <span class="comment"></span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span> <span class="comment">   /** During decoding, some CBOR construct was encountered that this decoder</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span> <span class="comment">        doesn't support, primarily this is the reserved additional info values,</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span> <span class="comment">        28 through 30. */</span></div><div class="line"><a name="l00579"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a7976ba2a67d65d4b0048fcafbf183655">  579</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a7976ba2a67d65d4b0048fcafbf183655">QCBOR_ERR_UNSUPPORTED</a>,</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span> <span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span> <span class="comment">   /** During decoding, hit the end of the given data to decode. For example,</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span> <span class="comment">       a byte string of 100 bytes was expected, but the end of the input was</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span> <span class="comment">       hit before finding those 100 bytes.  Corrupted CBOR input will often</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span> <span class="comment">       result in this error. */</span></div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af851c38293b14b0335c65b02140e8a3d">  585</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af851c38293b14b0335c65b02140e8a3d">QCBOR_ERR_HIT_END</a>,</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span> <span class="comment"></span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span> <span class="comment">   /** During encoding, the length of the encoded CBOR exceeded UINT32_MAX.</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span> <span class="comment">     */</span></div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a1056d95e93e9f01c05b3dce6e82907a4">  589</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a1056d95e93e9f01c05b3dce6e82907a4">QCBOR_ERR_BUFFER_TOO_LARGE</a>,</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span> <span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span> <span class="comment">   /** During decoding, an integer smaller than INT64_MIN was received (CBOR</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span> <span class="comment">       can represent integers smaller than INT64_MIN, but C cannot). */</span></div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab4148715700ffcc769193f2c47bec7ec">  593</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab4148715700ffcc769193f2c47bec7ec">QCBOR_ERR_INT_OVERFLOW</a>,</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span> <span class="comment"></span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span> <span class="comment">   /** During decoding, the label for a map entry is bad. What causes this</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span> <span class="comment">       error depends on the decoding mode. */</span></div><div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a72071afbe1fe98d8b5b8e798e2b50878">  597</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a72071afbe1fe98d8b5b8e798e2b50878">QCBOR_ERR_MAP_LABEL_TYPE</a>,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span> <span class="comment"></span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span> <span class="comment">   /** During encoding or decoding, the number of array or map opens was not</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span> <span class="comment">       matched by the number of closes. */</span></div><div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a5880606db007bdf5dba9498ea877fd84">  601</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a5880606db007bdf5dba9498ea877fd84">QCBOR_ERR_ARRAY_OR_MAP_STILL_OPEN</a>,</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span> <span class="comment"></span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span> <span class="comment">   /** During encoding, the simple value is not between CBOR_SIMPLEV_FALSE</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span> <span class="comment">       and CBOR_SIMPLEV_UNDEF. */</span></div><div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a691c5b5a79727b84b1da18a1d1c30877">  605</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a691c5b5a79727b84b1da18a1d1c30877">QCBOR_ERR_BAD_SIMPLE</a>,</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span> <span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span> <span class="comment">   /** During decoding, a date greater than +- 292 billion years from Jan 1</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span> <span class="comment">       1970 encountered during parsing. */</span></div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a042e4c7585f18aed1883721ad0cde1fe">  609</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a042e4c7585f18aed1883721ad0cde1fe">QCBOR_ERR_DATE_OVERFLOW</a>,</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span> <span class="comment"></span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span> <span class="comment">   /** During decoding, the CBOR is not valid, primarily a simple type is encoded in</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span> <span class="comment">      a prohibited way. */</span></div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a99b8608d0a8ae97155576b2c5590d1cb">  613</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a99b8608d0a8ae97155576b2c5590d1cb">QCBOR_ERR_INVALID_CBOR</a>,</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span> <span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span> <span class="comment">   /** Optional tagging that doesn't make sense (an int is tagged as a</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span> <span class="comment">       date string) or can't be handled. */</span></div><div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42add540e42603e163282db5edf279cff07">  617</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42add540e42603e163282db5edf279cff07">QCBOR_ERR_BAD_OPT_TAG</a>,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span> <span class="comment"></span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span> <span class="comment">   /** Returned by QCBORDecode_Finish() if all the inputs bytes have not</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span> <span class="comment">       been consumed. */</span></div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a52c51d8c1ab843c1c1d550414ea378ad">  621</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a52c51d8c1ab843c1c1d550414ea378ad">QCBOR_ERR_EXTRA_BYTES</a>,</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span> <span class="comment"></span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span> <span class="comment">   /** During encoding, QCBOREncode_Close() call with a different type than</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span> <span class="comment">       is currently open. */</span></div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a439657577b3780303291244cbac1077e">  625</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a439657577b3780303291244cbac1077e">QCBOR_ERR_CLOSE_MISMATCH</a>,</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span> <span class="comment"></span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span> <span class="comment">   /** Unable to decode an indefinite length string because no string</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span> <span class="comment">       allocator was configured. */</span></div><div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a64e0fa8767c2d022ecd7885ab2653664">  629</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a64e0fa8767c2d022ecd7885ab2653664">QCBOR_ERR_NO_STRING_ALLOCATOR</a>,</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span> <span class="comment"></span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span> <span class="comment">   /** One of the chunks in an indefinite length string is not of the type of</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span> <span class="comment">       the string. */</span></div><div class="line"><a name="l00633"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a90bbf40200a6be9f7838db9557eff274">  633</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a90bbf40200a6be9f7838db9557eff274">QCBOR_ERR_INDEFINITE_STRING_CHUNK</a>,</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span> <span class="comment"></span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span> <span class="comment">   /** Error allocating space for a string, usually for an indefinite length</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span> <span class="comment">       string. */</span></div><div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ac137e2e0f81190b6cbb0dbd8837f16e8">  637</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ac137e2e0f81190b6cbb0dbd8837f16e8">QCBOR_ERR_STRING_ALLOCATE</a>,</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span> <span class="comment"></span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span> <span class="comment">   /** During decoding, a break occurred outside an indefinite length item. */</span></div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a30db911b5d817e7a56499f50a3b59dfa">  640</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a30db911b5d817e7a56499f50a3b59dfa">QCBOR_ERR_BAD_BREAK</a>,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span> <span class="comment"></span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span> <span class="comment">   /** During decoding, too many tags in the caller-configured tag list, or not</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span> <span class="comment">       enough space in QCBORTagListOut. */</span></div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ad1256c54a3aabfc05e434272d510d222">  644</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ad1256c54a3aabfc05e434272d510d222">QCBOR_ERR_TOO_MANY_TAGS</a>,</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span> <span class="comment"></span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span> <span class="comment">   /** Returned by QCBORDecode_SetMemPool() when xx is too small. This should</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span> <span class="comment">       never happen on a machine with 64-bit or smaller pointers. Fixing</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span> <span class="comment">       it is probably by increasing QCBOR_DECODE_MIN_MEM_POOL_SIZE. */</span></div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42adf78b2cf913ea4a47220db8a8c352bc2">  649</a></span>    <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42adf78b2cf913ea4a47220db8a8c352bc2">QCBOR_ERR_MEM_POOL_INTERNAL</a></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span> </div><div class="line"><a name="l00651"></a><span class="lineno">  651</span> } <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span> </div><div class="line"><a name="l00653"></a><span class="lineno">  653</span> </div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58">  654</a></span> <span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span> <span class="comment">   /** See QCBORDecode_Init() */</span></div><div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a25dbb7ce42d1c8113a26c9d14a417ccf">  656</a></span>    <a class="code" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a25dbb7ce42d1c8113a26c9d14a417ccf">QCBOR_DECODE_MODE_NORMAL</a> = 0,<span class="comment"></span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span> <span class="comment">   /** See QCBORDecode_Init() */</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a4116f650e4fa0e0279371dff415152c7">  658</a></span>    <a class="code" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a4116f650e4fa0e0279371dff415152c7">QCBOR_DECODE_MODE_MAP_STRINGS_ONLY</a> = 1,<span class="comment"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span> <span class="comment">   /** See QCBORDecode_Init() */</span></div><div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58aff9fda08b08890a0d6fb6fa362d0c4e5">  660</a></span>    <a class="code" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58aff9fda08b08890a0d6fb6fa362d0c4e5">QCBOR_DECODE_MODE_MAP_AS_ARRAY</a> = 2</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span> } <a class="code" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58">QCBORDecodeMode</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span> </div><div class="line"><a name="l00663"></a><span class="lineno">  663</span> </div><div class="line"><a name="l00664"></a><span class="lineno">  664</span> </div><div class="line"><a name="l00665"></a><span class="lineno">  665</span> </div><div class="line"><a name="l00666"></a><span class="lineno">  666</span> </div><div class="line"><a name="l00667"></a><span class="lineno">  667</span> <span class="comment">/* Do not renumber these. Code depends on some of these values. */</span><span class="comment"></span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span> <span class="comment">/** The type is unknown, unset or invalid */</span></div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a5917b8146669036e62a49a54b5c4c601">  669</a></span> <span class="preprocessor">#define QCBOR_TYPE_NONE           0</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span> <span class="comment">/** Type for an integer that decoded either between INT64_MIN and INT32_MIN or INT32_MAX and INT64_MAX; val.int64 */</span></div><div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aad060737704d85d5407ea2f342df9a66">  671</a></span> <span class="preprocessor">#define QCBOR_TYPE_INT64          2</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span> <span class="comment">/** Type for an integer that decoded to a more than INT64_MAX and UINT64_MAX; val.uint64 */</span></div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a16a54fa5ae26645015243d1681331405">  673</a></span> <span class="preprocessor">#define QCBOR_TYPE_UINT64         3</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span> <span class="comment">/** Type for an array. The number of items in the array is in val.uCount. */</span></div><div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aa4d5e4cd1373d0da4e537be46fb6960f">  675</a></span> <span class="preprocessor">#define QCBOR_TYPE_ARRAY          4</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span> <span class="comment">/** Type for a map; number of items in map is in val.uCount */</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ac2d68008ebd9bf49e4417a21be81e429">  677</a></span> <span class="preprocessor">#define QCBOR_TYPE_MAP            5</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span> <span class="comment">/** Type for a buffer full of bytes. Data is in val.string. */</span></div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ae886c89aec2e7cf66c01b6eddb95a96d">  679</a></span> <span class="preprocessor">#define QCBOR_TYPE_BYTE_STRING    6</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span> <span class="comment">/** Type for a UTF-8 string. It is not NULL terminated. Data is in val.string.  */</span></div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a76a815aef632d06e4cf6f8d9df53edf4">  681</a></span> <span class="preprocessor">#define QCBOR_TYPE_TEXT_STRING    7</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span> <span class="comment">/** Type for a positive big number. Data is in val.bignum, a pointer and a length. */</span></div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="qcbor_8h.html#adaa198d9c5262e614999afd356b653ba">  683</a></span> <span class="preprocessor">#define QCBOR_TYPE_POSBIGNUM     9</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span> <span class="comment">/** Type for a negative big number. Data is in val.bignum, a pointer and a length. */</span></div><div class="line"><a name="l00685"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ae9c803e8cc9062cda64c79ce227ec6ab">  685</a></span> <span class="preprocessor">#define QCBOR_TYPE_NEGBIGNUM     10</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span> <span class="comment">/** Type for RFC 3339 date string, possibly with time zone. Data is in val.dateString */</span></div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a3ada2e6df4c177daf197808f006279c7">  687</a></span> <span class="preprocessor">#define QCBOR_TYPE_DATE_STRING   11</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span> <span class="comment">/** Type for integer seconds since Jan 1970 + floating point fraction. Data is in val.epochDate */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aec90d1718b1b06f0dedab210ae53593d">  689</a></span> <span class="preprocessor">#define QCBOR_TYPE_DATE_EPOCH    12</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span> <span class="comment">/** A simple type that this CBOR implementation doesn't know about; Type is in val.uSimple. */</span></div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a028f8c16e763a72709662c9119cebcfd">  691</a></span> <span class="preprocessor">#define QCBOR_TYPE_UKNOWN_SIMPLE 13</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span> <span class="comment">/** Type for the simple value false; nothing more; nothing in val union. */</span></div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="qcbor_8h.html#af7ad705c12ce13feb36465c7667569d1">  693</a></span> <span class="preprocessor">#define QCBOR_TYPE_FALSE         20</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span> <span class="comment">/** Type for the simple value true; nothing more; nothing in val union. */</span></div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a4625f4d10093a48fbcc274bc4823082b">  695</a></span> <span class="preprocessor">#define QCBOR_TYPE_TRUE          21</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span> <span class="comment">/** Type for the simple value null; nothing more; nothing in val union. */</span></div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a5f2f594f9dc2703e7eaff43a186953ff">  697</a></span> <span class="preprocessor">#define QCBOR_TYPE_NULL          22</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span> <span class="comment">/** Type for the simple value undef; nothing more; nothing in val union. */</span></div><div class="line"><a name="l00699"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aaf1b9d3bc96e09b9881582491bc70138">  699</a></span> <span class="preprocessor">#define QCBOR_TYPE_UNDEF         23</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span> <span class="comment">/** Type for a floating point number. Data is in val.float. */</span></div><div class="line"><a name="l00701"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a3d6b81ebf8ffb251ac1cee59329aa9e3">  701</a></span> <span class="preprocessor">#define QCBOR_TYPE_FLOAT         26</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span> <span class="comment">/** Type for a double floating point number. Data is in val.double. */</span></div><div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="qcbor_8h.html#adaeb5fec90e5121d21bfcefef094f9d0">  703</a></span> <span class="preprocessor">#define QCBOR_TYPE_DOUBLE        27</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span> <span class="comment">/** For QCBOR_DECODE_MODE_MAP_AS_ARRAY decode mode, a map that is being traversed as an array. See QCBORDecode_Init() */</span></div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ad02b6f79a71304eda226a7ac33305479">  705</a></span> <span class="preprocessor">#define QCBOR_TYPE_MAP_AS_ARRAY  32</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span> </div><div class="line"><a name="l00707"></a><span class="lineno">  707</span> <span class="preprocessor">#define QCBOR_TYPE_BREAK         31 // Used internally; never returned</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span> </div><div class="line"><a name="l00709"></a><span class="lineno">  709</span> <span class="preprocessor">#define QCBOR_TYPE_OPTTAG       254 // Used internally; never returned</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span> </div><div class="line"><a name="l00711"></a><span class="lineno">  711</span> </div><div class="line"><a name="l00712"></a><span class="lineno">  712</span> </div><div class="line"><a name="l00713"></a><span class="lineno">  713</span> <span class="comment">/*</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span> <span class="comment"> Approx Size of this:</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span> <span class="comment">   8 + 8 + 1 + 1 + 1 + (1 padding) + (4 padding on 64-bit machine) = 24 for first part (20 on a 32-bit machine)</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span> <span class="comment">   16 bytes for the val union</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span> <span class="comment">   16 bytes for label union</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span> <span class="comment">   total = 56 bytes (52 bytes on 32-bit machine)</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span> <span class="comment"> */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span> <span class="comment"></span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span> <span class="comment">/**</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span> <span class="comment"> QCBORItem holds the type, value and other info for a decoded item returned by GetNextItem().</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span> <span class="comment"> */</span></div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html">  724</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___q_c_b_o_r_item.html">_QCBORItem</a> {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>    uint8_t  uDataType;     <span class="comment">/** Tells what element of the val union to use. One of QCBOR_TYPE_XXXX */</span></div><div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#aaaa1de70ec2e25957a0bb02edf84c23a">  726</a></span>    uint8_t  <a class="code" href="struct___q_c_b_o_r_item.html#aaaa1de70ec2e25957a0bb02edf84c23a">uNestingLevel</a>; <span class="comment">/** How deep the nesting from arrays and maps are. 0 is the top level with no arrays or maps entered */</span></div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#abc918d2ee9e41334ad8744116fcd848e">  727</a></span>    uint8_t  <a class="code" href="struct___q_c_b_o_r_item.html#abc918d2ee9e41334ad8744116fcd848e">uLabelType</a>;    <span class="comment">/** Tells what element of the label union to use */</span></div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a7e603acab557c1f771b94b32e29fa66c">  728</a></span>    uint8_t  <a class="code" href="struct___q_c_b_o_r_item.html#a7e603acab557c1f771b94b32e29fa66c">uDataAlloc</a>;    <span class="comment">/** 1 if allocated with string allocator, 0 if not. See QCBORDecode_MakeMallocStringAllocator() */</span></div><div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a2e6b90a829eb935989a281e45acf2cae">  729</a></span>    uint8_t  <a class="code" href="struct___q_c_b_o_r_item.html#a2e6b90a829eb935989a281e45acf2cae">uLabelAlloc</a>;   <span class="comment">/** Like uDataAlloc, but for label */</span></div><div class="line"><a name="l00730"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#abe003e63b65be77aadef7ecd3a42461e">  730</a></span>    uint8_t  <a class="code" href="struct___q_c_b_o_r_item.html#abe003e63b65be77aadef7ecd3a42461e">uNextNestLevel</a>; <span class="comment">/** If not equal to uNestingLevel, this item closed out at least one map/array */</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span> </div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>    <span class="keyword">union </span>{</div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a45d113f8d303eebb3734306531862812">  733</a></span>       int64_t     <a class="code" href="struct___q_c_b_o_r_item.html#a45d113f8d303eebb3734306531862812">int64</a>;      <span class="comment">/** The value for uDataType QCBOR_TYPE_INT64 */</span></div><div class="line"><a name="l00734"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a6ff40d695ba97a9cabbf48b34af1a6e3">  734</a></span>       uint64_t    <a class="code" href="struct___q_c_b_o_r_item.html#a6ff40d695ba97a9cabbf48b34af1a6e3">uint64</a>;     <span class="comment">/** The value for uDataType QCBOR_TYPE_UINT64 */</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span> </div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a2caaaca3ffd0dc2d28a890663953d2e9">  736</a></span>       <a class="code" href="structuseful__buf__c.html">UsefulBufC</a>  <a class="code" href="struct___q_c_b_o_r_item.html#a2caaaca3ffd0dc2d28a890663953d2e9">string</a>;     <span class="comment">/** The value for uDataType QCBOR_TYPE_BYTE_STRING and QCBOR_TYPE_TEXT_STRING */</span></div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#ada1db914c30f5d52f4df8f51f17fed9b">  737</a></span>       uint16_t    <a class="code" href="struct___q_c_b_o_r_item.html#ada1db914c30f5d52f4df8f51f17fed9b">uCount</a>;     <span class="comment">/** The "value" for uDataType QCBOR_TYPE_ARRAY or QCBOR_TYPE_MAP -- the number of items in the array or map</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span> <span class="comment">                                  UINT16_MAX when decoding indefinite lengths maps and arrays. */</span></div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a306b98088326b10d0768c89de4cf7b7e">  739</a></span>       <span class="keywordtype">double</span>      <a class="code" href="struct___q_c_b_o_r_item.html#a306b98088326b10d0768c89de4cf7b7e">dfnum</a>;      <span class="comment">/** The value for uDataType QCBOR_TYPE_DOUBLE */</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>       <span class="keyword">struct </span>{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>          int64_t  nSeconds;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>          <span class="keywordtype">double</span>   fSecondsFraction;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>       } epochDate;            <span class="comment">/** The value for uDataType QCBOR_TYPE_DATE_EPOCH */</span></div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a8727f50e2d5d40b7b38713b665626804">  744</a></span>       <a class="code" href="structuseful__buf__c.html">UsefulBufC</a>  <a class="code" href="struct___q_c_b_o_r_item.html#a8727f50e2d5d40b7b38713b665626804">dateString</a>; <span class="comment">/** The value for uDataType QCBOR_TYPE_DATE_STRING */</span></div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a21166fd2b73f0edc2592e3c71812e3ec">  745</a></span>       <a class="code" href="structuseful__buf__c.html">UsefulBufC</a>  <a class="code" href="struct___q_c_b_o_r_item.html#a21166fd2b73f0edc2592e3c71812e3ec">bigNum</a>;     <span class="comment">/** The value for uDataType QCBOR_TYPE_BIGNUM */</span></div><div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a28a14738c0cabacf70b82a7cd644266a">  746</a></span>       uint8_t     <a class="code" href="struct___q_c_b_o_r_item.html#a28a14738c0cabacf70b82a7cd644266a">uSimple</a>;    <span class="comment">/** The integer value for unknown simple types */</span></div><div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#a4fea8079d7394ec9d4599ec4de3015ba">  747</a></span>       uint64_t    <a class="code" href="struct___q_c_b_o_r_item.html#a4fea8079d7394ec9d4599ec4de3015ba">uTagV</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span> </div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>    } val;  <span class="comment">/** The union holding the item's value. Select union member based on uDataType */</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span> </div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>    <span class="keyword">union </span>{</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>       <a class="code" href="structuseful__buf__c.html">UsefulBufC</a>  string;  <span class="comment">/** The label for uLabelType QCBOR_TYPE_BYTE_STRING and QCBOR_TYPE_TEXT_STRING */</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>       int64_t     int64;   <span class="comment">/** The label for uLabelType for QCBOR_TYPE_INT64 */</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>       uint64_t    uint64;  <span class="comment">/** The label for uLabelType for QCBOR_TYPE_UINT64 */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>    } label; <span class="comment">/** Union holding the different label types selected based on uLabelType */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span> </div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="struct___q_c_b_o_r_item.html#ad22bb44931a291374a3013153804bc35">  757</a></span>    uint64_t <a class="code" href="struct___q_c_b_o_r_item.html#ad22bb44931a291374a3013153804bc35">uTagBits</a>; <span class="comment">/** Bit indicating which tags (major type 6) on this item.  */</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span> </div><div class="line"><a name="l00759"></a><span class="lineno">  759</span> } <a class="code" href="qcbor_8h.html#acf2564f1c732f4899737aa991701184b">QCBORItem</a>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span> </div><div class="line"><a name="l00761"></a><span class="lineno">  761</span> <span class="comment"></span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span> <span class="comment">/**</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span> <span class="comment"> This is a set of functions and pointer context (in object-oriented parlance,</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span> <span class="comment"> an "object") used to allocate memory for coalescing the segments of an indefinite</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span> <span class="comment"> length string into one.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span> <span class="comment"></span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span> <span class="comment"> The fAllocate function works as an initial allocator and a reallocator to</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span> <span class="comment"> expand the string for each new segment. When it is an initial allocator</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span> <span class="comment"> pOldMem is NULL.</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span> <span class="comment"></span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span> <span class="comment"> The fFree function is called to clean up an individual allocation when an error occurs.</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span> <span class="comment"></span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span> <span class="comment"> The fDesctructor function is called when QCBORDecode_Finish is called.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span> <span class="comment"></span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span> <span class="comment"> Any memory allocated with this will be marked by setting uDataAlloc</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span> <span class="comment"> or uLabelAlloc in the QCBORItem structure so the caller knows they</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span> <span class="comment"> have to free it.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span> <span class="comment"></span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span> <span class="comment"> fAllocate is only ever called to increase the single most recent</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span> <span class="comment"> allocation made, making implementation of a memory pool very simple.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span> <span class="comment"></span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span> <span class="comment"> fFree is also only called on the single most recent allocation.</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span> <span class="comment"> */</span></div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="struct_q_c_b_o_r_string_allocator.html">  784</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>    <span class="keywordtype">void</span>       *pAllocaterContext;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>    <a class="code" href="_useful_buf_8h.html#adf4e4704600249b867d732b43afe3279">UsefulBuf</a> (*fAllocate)(<span class="keywordtype">void</span> *pAllocaterContext, <span class="keywordtype">void</span> *pOldMem, <span class="keywordtype">size_t</span> uNewSize);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>    void      (*fFree)(<span class="keywordtype">void</span> *pAllocaterContext, <span class="keywordtype">void</span> *pMem);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>    void      (*fDestructor)(<span class="keywordtype">void</span> *pAllocaterContext);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span> } <a class="code" href="struct_q_c_b_o_r_string_allocator.html">QCBORStringAllocator</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span> </div><div class="line"><a name="l00791"></a><span class="lineno">  791</span> <span class="comment"></span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span> <span class="comment">/**</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span> <span class="comment"> This only matters if you use a string allocator</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span> <span class="comment"> and and set it up with QCBORDecode_SetMemPool(). It is</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span> <span class="comment"> the size of the overhead needed needed by</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span> <span class="comment"> QCBORDecode_SetMemPool().  If you write your own</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span> <span class="comment"> string allocator or use the separately available malloc</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span> <span class="comment"> based string allocator, this size will not apply</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span> <span class="comment"> */</span></div><div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ab4377ad62925e5d38c948b6a00ac52a0">  800</a></span> <span class="preprocessor">#define QCBOR_DECODE_MIN_MEM_POOL_SIZE 72</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span> </div><div class="line"><a name="l00802"></a><span class="lineno">  802</span> <span class="comment"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span> <span class="comment">/**</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span> <span class="comment"> This is used to tell the decoder about tags that it should</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span> <span class="comment"> record in uTagBits in QCBORItem beyond the built-in</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span> <span class="comment"> tags. puTags points to an</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span> <span class="comment"> array of uint64_t integers that are the tags. uNumTags</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span> <span class="comment"> is the number of integers in the array. The maximum</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span> <span class="comment"> size is QCBOR_MAX_CUSTOM_TAGS.  See QCBORDecode_IsTagged()</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span> <span class="comment"> and QCBORDecode_SetCallerAddedTagMap().</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span> <span class="comment"> */</span></div><div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="struct_q_c_b_o_r_tag_list_in.html">  812</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>    uint8_t uNumTags;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>    <span class="keyword">const</span> uint64_t *puTags;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span> } <a class="code" href="struct_q_c_b_o_r_tag_list_in.html">QCBORTagListIn</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span> </div><div class="line"><a name="l00817"></a><span class="lineno">  817</span> <span class="comment"></span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span> <span class="comment">/**</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span> <span class="comment"> This is for QCBORDecode_GetNextWithTags() to be able to return the</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span> <span class="comment"> full list of tags on an item. It not needed for most CBOR protocol</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span> <span class="comment"> implementations. Its primary use is for pretty-printing CBOR or</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span> <span class="comment"> protocol conversion to another format.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span> <span class="comment"></span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span> <span class="comment"> On input, puTags points to a buffer to be filled in</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span> <span class="comment"> and uNumAllocated is the number of uint64_t values</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span> <span class="comment"> in the buffer.</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span> <span class="comment"></span></div><div class="line"><a name="l00828"></a><span class="lineno">  828</span> <span class="comment"> On output the buffer contains the tags for the item.</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span> <span class="comment"> uNumUsed tells how many there are.</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span> <span class="comment"> */</span></div><div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="struct_q_c_b_o_r_tag_list_out.html">  831</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>    uint8_t uNumUsed;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>    uint8_t uNumAllocated;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>    uint64_t *puTags;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span> } <a class="code" href="struct_q_c_b_o_r_tag_list_out.html">QCBORTagListOut</a>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span> </div><div class="line"><a name="l00837"></a><span class="lineno">  837</span> <span class="comment"></span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span> <span class="comment">/**</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span> <span class="comment"> QCBOREncodeContext is the data type that holds context for all the</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span> <span class="comment"> encoding functions. It is less than 200 bytes, so it can go on</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span> <span class="comment"> the stack. The contents are opaque, and the caller should not access</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span> <span class="comment"> any internal items.  A context may be re used serially as long as</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span> <span class="comment"> it is re initialized.</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span> <span class="comment"> */</span></div><div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a11844421eac8fb31c92a3a20a458aef5">  845</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___q_c_b_o_r_encode_context.html">_QCBOREncodeContext</a> <a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span> </div><div class="line"><a name="l00847"></a><span class="lineno">  847</span> <span class="comment"></span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span> <span class="comment">/**</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span> <span class="comment"> Initialize the the encoder to prepare to encode some CBOR.</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span> <span class="comment"></span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span> <span class="comment"> @param[in,out]  pCtx    The encoder context to initialize.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span> <span class="comment"> @param[in]      Storage The buffer into which this encoded result will be placed.</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span> <span class="comment"></span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span> <span class="comment"> Call this once at the start of an encoding of a CBOR structure. Then</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span> <span class="comment"> call the various QCBOREncode_AddXXX() functions to add the data</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span> <span class="comment"> items. Then call QCBOREncode_Finish().</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span> <span class="comment"></span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span> <span class="comment"> The maximum output buffer is UINT32_MAX (4GB). This is not a practical</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span> <span class="comment"> limit in any way and reduces the memory needed by the implementation.</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span> <span class="comment"> The error QCBOR_ERR_BUFFER_TOO_LARGE will be returned by QCBOR_Finish()</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span> <span class="comment"> if a larger buffer length is passed in.</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span> <span class="comment"></span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span> <span class="comment"> If this is called with pBuf as NULL and uBufLen a large value like</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span> <span class="comment"> UINT32_MAX, all the QCBOREncode_AddXXXX() functions and</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span> <span class="comment"> QCBORE_Encode_Finish() can still be called. No data will be encoded,</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span> <span class="comment"> but the length of what would be encoded will be calculated. The</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span> <span class="comment"> length of the encoded structure will be handed back in the call to</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span> <span class="comment"> QCBOREncode_Finish(). You can then allocate a buffer of that size</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span> <span class="comment"> and call all the encoding again, this time to fill in the buffer.</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span> <span class="comment"></span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span> <span class="comment"> A QCBORContext can be reused over and over as long as</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span> <span class="comment"> QCBOREncode_Init() is called.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span> <span class="comment"> */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab7f85546a84e1301d1a6af6890cb191e">QCBOREncode_Init</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf.html">UsefulBuf</a> Storage);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span> </div><div class="line"><a name="l00876"></a><span class="lineno">  876</span> <span class="comment"></span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span> <span class="comment">/**</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span> <span class="comment"> @brief  Add a signed 64-bit integer to the encoded output.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span> <span class="comment"></span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span> <span class="comment"> @param[in] pCtx      The encoding context to add the integer to.</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span> <span class="comment"> @param[in] nNum      The integer to add.</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span> <span class="comment"></span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span> <span class="comment"> The integer will be encoded and added to the CBOR output.</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span> <span class="comment"></span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span> <span class="comment"> This function figures out the size and the sign and encodes in the</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span> <span class="comment"> correct minimal CBOR. Specifically, it will select CBOR major type 0 or 1</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span> <span class="comment"> based on sign and will encode to 1, 2, 4 or 8 bytes depending on the</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span> <span class="comment"> value of the integer. Values less than 24 effectively encode to one</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span> <span class="comment"> byte because they are encoded in with the CBOR major type.  This is</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span> <span class="comment"> a neat and efficient characteristic of CBOR that can be taken</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span> <span class="comment"> advantage of when designing CBOR-based protocols. If integers like</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span> <span class="comment"> tags can be kept between -23 and 23 they will be encoded in one byte</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span> <span class="comment"> including the major type.</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span> <span class="comment"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span> <span class="comment"> If you pass a smaller int, say an int16_t or a small value, say 100,</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span> <span class="comment"> the encoding will still be CBOR's most compact that can represent the</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span> <span class="comment"> value.  For example, CBOR always encodes the value 0 as one byte,</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span> <span class="comment"> 0x00. The representation as 0x00 includes identification of the type</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span> <span class="comment"> as an integer too as the major type for an integer is 0. See RFC 7049</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span> <span class="comment"> Appendix A for more examples of CBOR encoding. This compact encoding</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span> <span class="comment"> is also canonical CBOR as per section 3.9 in RFC 7049.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span> <span class="comment"></span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span> <span class="comment"> There are no functions to add int16_t or int32_t because they are</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span> <span class="comment"> not necessary because this always encodes to the smallest number</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span> <span class="comment"> of bytes based on the value (If this code is running on a 32-bit</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span> <span class="comment"> machine having a way to add 32-bit integers would reduce code size some).</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span> <span class="comment"></span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span> <span class="comment"> If the encoding context is in an error state, this will do</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span> <span class="comment"> nothing. If an error occurs when adding this integer, the internal</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span> <span class="comment"> error flag will be set, and the error will be returned when</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span> <span class="comment"></span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span> <span class="comment"> See also QCBOREncode_AddUInt64().</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span> <span class="comment"> */</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nNum);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span> </div><div class="line"><a name="l00917"></a><span class="lineno">  917</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddInt64ToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, int64_t uNum);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span> </div><div class="line"><a name="l00919"></a><span class="lineno">  919</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddInt64ToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, int64_t uNum);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span> </div><div class="line"><a name="l00921"></a><span class="lineno">  921</span> <span class="comment"></span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span> <span class="comment">/**</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span> <span class="comment"> @brief  Add an unsigned 64-bit integer to the encoded output.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span> <span class="comment"></span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span> <span class="comment"> @param[in] pCtx      The encoding context to add the integer to.</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span> <span class="comment"> @param[in] uNum      The integer to add.</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span> <span class="comment"></span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span> <span class="comment"> The integer will be encoded and added to the CBOR output.</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span> <span class="comment"></span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span> <span class="comment"> The only reason so use this function is for integers larger than</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span> <span class="comment"> INT64_MAX and smaller than UINT64_MAX. Otherwise QCBOREncode_AddInt64()</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span> <span class="comment"> will work fine.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span> <span class="comment"></span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span> <span class="comment"> Error handling is the same as for QCBOREncode_AddInt64().</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span> <span class="comment"> */</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a57fc48e69746a5668a5e4deeb55776c2">QCBOREncode_AddUInt64</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, uint64_t uNum);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span> </div><div class="line"><a name="l00938"></a><span class="lineno">  938</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddUInt64ToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, uint64_t uNum);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span> </div><div class="line"><a name="l00940"></a><span class="lineno">  940</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddUInt64ToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, uint64_t uNum);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span> </div><div class="line"><a name="l00942"></a><span class="lineno">  942</span> <span class="comment"></span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span> <span class="comment">/**</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span> <span class="comment"></span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span> <span class="comment"> @brief  Add a UTF-8 text string to the encoded output</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span> <span class="comment"></span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span> <span class="comment"> @param[in] pCtx     The context to initialize.</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span> <span class="comment"> @param[in] Text    Pointer and length of text to add.</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span> <span class="comment"></span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span> <span class="comment"> The text passed in must be unencoded UTF-8 according to RFC</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span> <span class="comment"> 3629. There is no NULL termination. The text is added as CBOR</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span> <span class="comment"> major type 3.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span> <span class="comment"></span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span> <span class="comment"> If called with nBytesLen equal to 0, an empty string will be</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span> <span class="comment"> added. When nBytesLen is 0, pBytes may be NULL.</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span> <span class="comment"></span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span> <span class="comment"> Note that the restriction of the buffer length to an uint32_t is</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span> <span class="comment"> entirely intentional as this encoder is not capable of encoding</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span> <span class="comment"> lengths greater. This limit to 4GB for a text string should not be a</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span> <span class="comment"> problem.</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span> <span class="comment"></span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span> <span class="comment"> */</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span> </div><div class="line"><a name="l00966"></a><span class="lineno">  966</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddTextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span> </div><div class="line"><a name="l00968"></a><span class="lineno">  968</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddTextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span> </div><div class="line"><a name="l00970"></a><span class="lineno">  970</span> <span class="comment"></span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span> <span class="comment">/**</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span> <span class="comment"> @brief  Add a UTF-8 text string to the encoded output</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span> <span class="comment"></span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span> <span class="comment"> @param[in] szString  Null-terminated text to add.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span> <span class="comment"></span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span> <span class="comment"> This works the same as QCBOREncode_AddText().</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span> <span class="comment"> */</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span> </div><div class="line"><a name="l00981"></a><span class="lineno">  981</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddSZStringToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span> </div><div class="line"><a name="l00983"></a><span class="lineno">  983</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddSZStringToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span> </div><div class="line"><a name="l00985"></a><span class="lineno">  985</span> <span class="comment"></span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span> <span class="comment">/**</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span> <span class="comment"> @brief  Add a floating-point number to the encoded output</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span> <span class="comment"></span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span> <span class="comment"> @param[in] pCtx      The encoding context to add the float to.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span> <span class="comment"> @param[in] dNum      The double precision number to add.</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span> <span class="comment"></span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span> <span class="comment"> This outputs a floating-point number with CBOR major type 7.</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span> <span class="comment"></span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span> <span class="comment"> This will selectively encode the double-precision floating point</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span> <span class="comment"> number as either double-precision, single-precision or</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span> <span class="comment"> half-precision. It will always encode infinity, NaN and 0 has half</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span> <span class="comment"> precision. If no precision will be lost in the conversion to</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span> <span class="comment"> half-precision then it will be converted and encoded. If not and no</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span> <span class="comment"> precision will be lost in conversion to single-precision, then it</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span> <span class="comment"> will be converted and encoded. If not, then no conversion is</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span> <span class="comment"> performed, and it encoded as a double.</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span> <span class="comment"></span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span> <span class="comment"> Half-precision floating point numbers take up 2 bytes, half that of</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span> <span class="comment"> single-precision, one quarter of double-precision</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span> <span class="comment"></span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span> <span class="comment"> This automatically reduces the size of encoded messages a lot, maybe</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span> <span class="comment"> even by four if most of values are 0, infinity or NaN.</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span> <span class="comment"></span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span> <span class="comment"> On decode, these will always be returned as a double.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span> <span class="comment"></span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span> <span class="comment"> */</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a9c3e4d266c63c327bc963931ac27a12c">QCBOREncode_AddDouble</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">double</span> dNum);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span> </div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddDoubleToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keywordtype">double</span> dNum);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span> </div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddDoubleToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keywordtype">double</span> dNum);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span> </div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span> <span class="comment"></span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span> <span class="comment">/**</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span> <span class="comment"> @brief[in] Add an optional tag</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span> <span class="comment"></span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span> <span class="comment"> @param[in] pCtx  The encoding context to add the integer to.</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span> <span class="comment"> @param[in] uTag  The tag to add</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span> <span class="comment"></span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span> <span class="comment"> This outputs a CBOR major type 6 optional tag.</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span> <span class="comment"></span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span> <span class="comment"> The tag is applied to the next data item added to the encoded</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span> <span class="comment"> output. That data item that is to be tagged can be of any major</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span> <span class="comment"> CBOR type. Any number of tags can be added to a data item by calling</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span> <span class="comment"> this multiple times before the data item is added.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span> <span class="comment"></span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span> <span class="comment"> For many of the common standard tags a function to encode</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span> <span class="comment"> data using it already exists and this is not needed. For example,</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span> <span class="comment"> QCBOREncode_AddDateEpoch() already exists to output</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span> <span class="comment"> integers representing dates with the right tag.</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span> <span class="comment">*/</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx,uint64_t uTag);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span> </div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span> <span class="comment"></span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span> <span class="comment">/**</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span> <span class="comment"> @brief  Add an epoch-based date</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span> <span class="comment"></span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span> <span class="comment"> @param[in] pCtx     The encoding context to add the simple value to.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span> <span class="comment"> @param[in] date     Number of seconds since 1970-01-01T00:00Z in UTC time.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span> <span class="comment"></span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span> <span class="comment"> As per RFC 7049 this is similar to UNIX/Linux/POSIX dates. This is</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span> <span class="comment"> the most compact way to specify a date and time in CBOR. Note that this</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span> <span class="comment"> is always UTC and does not include the time zone.  Use</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span> <span class="comment"> QCBOREncode_AddDateString() if you want to include the time zone.</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span> <span class="comment"></span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span> <span class="comment"> The integer encoding rules apply here so the date will be encoded in a</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span> <span class="comment"> minimal number of 1, 2 4 or 8 bytes. Until about the year 2106 these</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span> <span class="comment"> dates should encode in 6 bytes -- one byte for the tag, one byte for the type</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span> <span class="comment"> and 4 bytes for the integer.</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span> <span class="comment"></span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span> <span class="comment"> If you care about leap-seconds and that level of accuracy, make sure the</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span> <span class="comment"> system you are running this code on does it correctly. This code just takes</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span> <span class="comment"> the value passed in.</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span> <span class="comment"></span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span> <span class="comment"> This implementation cannot encode fractional seconds using float or double</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span> <span class="comment"> even though that is allowed by CBOR, but you can encode them if you</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span> <span class="comment"> want to by calling QCBOREncode_AddDouble()</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span> <span class="comment"> with the right parameters.</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span> <span class="comment"></span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span> <span class="comment"> */</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a6d32cbcd8c6f5d6453561a40e90a2a20">QCBOREncode_AddDateEpoch</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t date);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span> </div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddDateEpochToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, int64_t date);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span> </div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span> <span class="keyword">static</span>  <span class="keywordtype">void</span> QCBOREncode_AddDateEpochToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, int64_t date);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span> </div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span> <span class="comment"></span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span> <span class="comment">/**</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span> <span class="comment"> @brief Add a byte string to the encoded output.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span> <span class="comment"></span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span> <span class="comment"> @param[in] Bytes     Pointer and length of the input data.</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span> <span class="comment"></span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span> <span class="comment"> Simply adds the bytes to the encoded output as CBOR major type 2.</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span> <span class="comment"></span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span> <span class="comment"> If called with Bytes.len equal to 0, an empty string will be</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span> <span class="comment"> added. When Bytes.len is 0, Bytes.ptr may be NULL.</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span> <span class="comment"></span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span> <span class="comment"> */</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span> </div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBytesToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span> </div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBytesToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span> </div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span> </div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span> <span class="comment"></span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span> <span class="comment">/**</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span> <span class="comment"> @brief Add a binary UUID to the encoded output.</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span> <span class="comment"></span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span> <span class="comment"> @param[in] Bytes     Pointer and length of the binary UUID.</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span> <span class="comment"></span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span> <span class="comment"> A binary UUID as defined in RFC 4122 is added to the ouput.</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span> <span class="comment"></span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span> <span class="comment"> It is output as CBOR major type 2, a binary string, with</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span> <span class="comment"> optional tag 36 indicating the binary string is a UUID.</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span> <span class="comment"> */</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a1b3d900725dceb91bf246c012361e5b3">QCBOREncode_AddBinaryUUID</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span> </div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBinaryUUIDToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span> </div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBinaryUUIDToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span> </div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span> <span class="comment"></span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span> <span class="comment">/**</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span> <span class="comment"> @brief Add a positive big number to the encoded output.</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span> <span class="comment"></span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span> <span class="comment"> @param[in] Bytes     Pointer and length of the big number.</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span> <span class="comment"></span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span> <span class="comment"> Big numbers are integers larger than 64-bits. Their format</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span> <span class="comment"> is described in RFC 7049.</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span> <span class="comment"></span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span> <span class="comment"> It is output as CBOR major type 2, a binary string, with</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span> <span class="comment"> optional tag 2 indicating the binary string is a positive big</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span> <span class="comment"> number.</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span> <span class="comment"></span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span> <span class="comment"> Often big numbers are used to represent cryptographic keys,</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span> <span class="comment"> however, COSE which defines representations for keys chose not</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span> <span class="comment"> to use this particular type.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span> <span class="comment"> */</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ac782bb5f00e2e392ed7ab75053553491">QCBOREncode_AddPositiveBignum</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span> </div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddPositiveBignumToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span> </div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddPositiveBignumToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span> </div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span> <span class="comment"></span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span> <span class="comment">/**</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span> <span class="comment"> @brief Add a negative big number to the encoded output.</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span> <span class="comment"></span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span> <span class="comment"> @param[in] Bytes     Pointer and length of the big number.</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span> <span class="comment"></span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span> <span class="comment"> Big numbers are integers larger than 64-bits. Their format</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span> <span class="comment"> is described in RFC 7049.</span></div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span> <span class="comment"></span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span> <span class="comment"> It is output as CBOR major type 2, a binary string, with</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span> <span class="comment"> optional tag 2 indicating the binary string is a negative big</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span> <span class="comment"> number.</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span> <span class="comment"></span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span> <span class="comment"> Often big numbers are used to represent cryptographic keys,</span></div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span> <span class="comment"> however, COSE which defines representations for keys chose not</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span> <span class="comment"> to use this particular type.</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span> <span class="comment"> */</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a66940998941b4377eae03823c29d4e5d">QCBOREncode_AddNegativeBignum</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span> </div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddNegativeBignumToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span> </div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddNegativeBignumToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span> </div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span> <span class="comment"></span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span> <span class="comment">/**</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span> <span class="comment"> @brief Add a text URI to the encoded output.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span> <span class="comment"></span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span> <span class="comment"> @param[in] pCtx    The context to initialize.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span> <span class="comment"> @param[in] URI     Pointer and length of the URI.</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span> <span class="comment"></span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span> <span class="comment"> The format of URI is RFC 3986.</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span> <span class="comment"></span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span> <span class="comment"> It is output as CBOR major type 3, a text string, with</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span> <span class="comment"> optional tag 32 indicating the text string is a URI.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span> <span class="comment"> */</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ad3e02d6fe09d15e8282b0c1b049a3c4a">QCBOREncode_AddURI</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span> </div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddURIToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span> </div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddURIToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span> </div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span> <span class="comment"></span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span> <span class="comment">/**</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span> <span class="comment"> @brief Add base 64-encoded text to encoded output.</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span> <span class="comment"></span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span> <span class="comment"> @param[in] pCtx     The context to initialize.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span> <span class="comment"> @param[in] B64Text  Pointer and length of the base-64 encoded text.</span></div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span> <span class="comment"></span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span> <span class="comment"> The text content is base 64 encoded data per RFC 4648.</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span> <span class="comment"></span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span> <span class="comment"> It is output as CBOR major type 3, a text string, with</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span> <span class="comment"> optional tag 34 indicating the text string is a URI.</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span> <span class="comment"> */</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab57757cd1393ccd8cb4b370727182304">QCBOREncode_AddB64Text</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span> </div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddB64TextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span> </div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddB64TextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span> </div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span> <span class="comment"></span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span> <span class="comment">/**</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span> <span class="comment"> @brief Add base 64URL -encoded URL to encoded output.</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span> <span class="comment"></span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span> <span class="comment"> @param[in] pCtx    The context to initialize.</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span> <span class="comment"> @param[in] B64Text  Pointer and length of the base-64 encoded text.</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span> <span class="comment"></span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span> <span class="comment"> The text content is base 64 URL format encoded text as per RFC 4648.</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span> <span class="comment"></span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span> <span class="comment"> It is output as CBOR major type 3, a text string, with</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span> <span class="comment"> optional tag 33 indicating the text string is a URI.</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span> <span class="comment"> */</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a6ee9ac410485977b75b733e049719f03">QCBOREncode_AddB64URLText</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span> </div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddB64URLTextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span> </div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddB64URLTextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span> </div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span> <span class="comment"></span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span> <span class="comment">/**</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span> <span class="comment"> @brief Add Perl Compatible Regular Expression</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span> <span class="comment"></span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span> <span class="comment"> @param[in] pCtx    The context to initialize.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span> <span class="comment"> @param[in] Regex   Pointer and length of the regular expression.</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span> <span class="comment"></span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span> <span class="comment"> The text content is Perl Compatible Regular</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span> <span class="comment"> Expressions (PCRE) / JavaScript syntax [ECMA262].</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span> <span class="comment"></span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span> <span class="comment"> It is output as CBOR major type 3, a text string, with</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span> <span class="comment"> optional tag 35 indicating the text string is a regular expression.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span> <span class="comment"> */</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a9b2105e9aae80069140476b6eeccf98f">QCBOREncode_AddRegex</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Regex);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span> </div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddRegexToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Regex);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span> </div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddRegexToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Regex);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span> </div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span> <span class="comment"></span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span> <span class="comment">/**</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span> <span class="comment"> @brief MIME encoded text to the encoded output.</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span> <span class="comment"></span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span> <span class="comment"> @param[in] pCtx      The context to initialize.</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span> <span class="comment"> @param[in] MIMEData  Pointer and length of the regular expression.</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span> <span class="comment"></span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span> <span class="comment"> The text content is in MIME format per RFC 2045 including the headers.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span> <span class="comment"></span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span> <span class="comment"> It is output as CBOR major type 3, a text string, with</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span> <span class="comment"> optional tag 36 indicating the text string is MIME data.</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span> <span class="comment"> */</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aa5cbc39f5d6ce9f55177cf99d68ee105">QCBOREncode_AddMIMEData</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span> </div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddMIMEDataToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span> </div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddMIMEDataToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span> </div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span> <span class="comment"></span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span> <span class="comment">/**</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span> <span class="comment"> @brief  Add an RFC 3339 date string</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span> <span class="comment"></span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span> <span class="comment"> @param[in] pCtx      The encoding context to add the simple value to.</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span> <span class="comment"> @param[in] szDate    Null-terminated string with date to add</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span> <span class="comment"></span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span> <span class="comment"> The string szDate should be in the form of RFC 3339 as defined by section</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span> <span class="comment"> 3.3 in RFC 4287. This is as described in section 2.4.1 in RFC 7049.</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span> <span class="comment"></span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span> <span class="comment"> Note that this function doesn't validate the format of the date string</span></div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span> <span class="comment"> at all. If you add an incorrect format date string, the generated</span></div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span> <span class="comment"> CBOR will be incorrect and the receiver may not be able to handle it.</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span> <span class="comment"></span></div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span> <span class="comment"> */</span></div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a84881d4d0c59bb05e414bbeb2d38f1c8">QCBOREncode_AddDateString</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span> </div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddDateStringToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span> </div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddDateStringToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span> </div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span> <span class="comment"></span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span> <span class="comment">/**</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span> <span class="comment"> @brief  Add a standard boolean.</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span> <span class="comment"></span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span> <span class="comment"> @param[in] pCtx   The encoding context to add the simple value to.</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span> <span class="comment"> @param[in] b      true or false from stdbool. Anything will result in an error.</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span> <span class="comment"></span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span> <span class="comment"> Adds a boolean value as CBOR major type 7.</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span> <span class="comment"></span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span> <span class="comment"> */</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a">QCBOREncode_AddBool</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">bool</span> b);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span> </div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBoolToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keywordtype">bool</span> b);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span> </div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddBoolToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keywordtype">bool</span> b);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span> </div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span> </div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span> <span class="comment"></span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span> <span class="comment">/**</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span> <span class="comment"> @brief  Add a NULL to the encoded output.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span> <span class="comment"></span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span> <span class="comment"> @param[in] pCtx   The encoding context to add the simple value to.</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span> <span class="comment"></span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span> <span class="comment"> Adds the NULL value as CBOR major type 7.</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span> <span class="comment"></span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span> <span class="comment"> This NULL doesn't have any special meaning in CBOR such as a terminating</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span> <span class="comment"> value for a string or an empty value.</span></div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span> <span class="comment"></span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span> <span class="comment"> */</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd">QCBOREncode_AddNULL</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span> </div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddNULLToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span> </div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddNULLToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span> </div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span> <span class="comment"></span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span> <span class="comment">/**</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span> <span class="comment"> @brief  Add an "undef" to the encoded output.</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span> <span class="comment"></span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span> <span class="comment"> @param[in] pCtx   The encoding context to add the simple value to.</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span> <span class="comment"></span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span> <span class="comment"> Adds the undef value as CBOR major type 7.</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span> <span class="comment"></span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span> <span class="comment"> Note that this value will not translate to JSON.</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span> <span class="comment"></span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span> <span class="comment"> This Undef doesn't have any special meaning in CBOR such as a terminating</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span> <span class="comment"> value for a string or an empty value.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span> <span class="comment"></span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span> <span class="comment"> */</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01">QCBOREncode_AddUndef</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span> </div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddUndefToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span> </div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddUndefToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span> </div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span> <span class="comment"></span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span> <span class="comment">/**</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span> <span class="comment"> @brief  Indicates that the next items added are in an array.</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span> <span class="comment"></span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span> <span class="comment"> @param[in] pCtx The encoding context to open the array in.</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span> <span class="comment"></span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span> <span class="comment"> Arrays are the basic CBOR aggregate or structure type. Call this</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span> <span class="comment"> function to start or open an array. Then call the various AddXXX</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span> <span class="comment"> functions to add the items that go into the array. Then call</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span> <span class="comment"> QCBOREncode_CloseArray() when all items have been added. The data</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span> <span class="comment"> items in the array can be of any type and can be of mixed types.</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span> <span class="comment"></span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span> <span class="comment"> Nesting of arrays and maps is allowed and supported just by calling</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span> <span class="comment"> QCBOREncode_OpenArray() again before calling CloseArray.  While CBOR</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span> <span class="comment"> has no limit on nesting, this implementation does in order to keep it</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span> <span class="comment"> smaller and simpler.  The limit is QCBOR_MAX_ARRAY_NESTING. This is</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span> <span class="comment"> the max number of times this can be called without calling</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span> <span class="comment"> QCBOREncode_CloseArray(). QCBOREncode_Finish() will return</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span> <span class="comment"> QCBOR_ERR_ARRAY_NESTING_TOO_DEEP when it is called as this function</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span> <span class="comment"> just sets an error state and returns no value when this occurs.</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span> <span class="comment"></span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span> <span class="comment"> If you try to add more than QCBOR_MAX_ITEMS_IN_ARRAY items to a</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span> <span class="comment"> single array or map, QCBOR_ERR_ARRAY_TOO_LONG will be returned when</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span> <span class="comment"></span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span> <span class="comment"> An array itself must have a label if it is being added to a map.</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span> <span class="comment"> Note that array elements do not have labels (but map elements do).</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span> <span class="comment"></span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span> <span class="comment"> An array itself may be tagged.</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span> <span class="comment"> */</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1">QCBOREncode_OpenArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span> </div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_OpenArrayInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span> </div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_OpenArrayInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx,  int64_t nLabel);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span> </div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span> <span class="comment"></span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span> <span class="comment">/**</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span> <span class="comment"> @brief Close an open array.</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span> <span class="comment"></span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span> <span class="comment"></span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span> <span class="comment"> The closes an array opened by QCBOREncode_OpenArray(). It reduces</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span> <span class="comment"> nesting level by one. All arrays (and maps) must be closed before</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span> <span class="comment"> calling QCBOREncode_Finish().</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span> <span class="comment"></span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span> <span class="comment"> When an error occurs as a result of this call, the encoder records</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span> <span class="comment"> the error and enters the error state. The error will be returned when</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span> <span class="comment"></span></div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span> <span class="comment"> If this has been called more times than QCBOREncode_OpenArray(), then</span></div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span> <span class="comment"> QCBOR_ERR_TOO_MANY_CLOSES will be returned when QCBOREncode_Finish()</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span> <span class="comment"> is called.</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span> <span class="comment"></span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span> <span class="comment"> If this is called and it is not an array that is currently open,</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span> <span class="comment"> QCBOR_ERR_CLOSE_MISMATCH will be returned when QCBOREncode_Finish()</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span> <span class="comment"> is called.</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span> <span class="comment"> */</span></div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a8c24ab9ee7f6b953315f4b48ef14895e">QCBOREncode_CloseArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span> </div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span> <span class="comment"></span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span> <span class="comment">/**</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span> <span class="comment"> @brief  Indicates that the next items added are in a map.</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span> <span class="comment"></span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span> <span class="comment"></span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span> <span class="comment"> See QCBOREncode_OpenArray() for more information, particularly error</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span> <span class="comment"> handling.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span> <span class="comment"></span></div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span> <span class="comment"> CBOR maps are an aggregate type where each item in the map consists</span></div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span> <span class="comment"> of a label and a value. They are similar to JSON objects.</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span> <span class="comment"></span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span> <span class="comment"> The value can be any CBOR type including another map.</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span> <span class="comment"></span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span> <span class="comment"> The label can also be any CBOR type, but in practice they are</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span> <span class="comment"> typically, integers as this gives the most compact output. They might</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span> <span class="comment"> also be text strings which gives readability and translation to JSON.</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span> <span class="comment"></span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span> <span class="comment"> Every QCBOREncode_AddXXX() call has once version that is "InMap" for</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span> <span class="comment"> adding items to maps with string labels and on that is "InMapN" that</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span> <span class="comment"> is for adding with integer labels.</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span> <span class="comment"></span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span> <span class="comment"> RFC 7049 uses the term "key" instead of "label".</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span> <span class="comment"></span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span> <span class="comment"> If you wish to use map labels that are neither integer labels or</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span> <span class="comment"> text strings, then just call the QCBOREncode_AddXXX() function</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span> <span class="comment"> explicitly to add the label. Then call it again to add the value.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span> <span class="comment"></span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span> <span class="comment"> See the RFC7049 for a lot more information on creating maps.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span> <span class="comment"> */</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8">QCBOREncode_OpenMap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span> </div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_OpenMapInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span> </div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_OpenMapInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span> </div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span> </div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span> <span class="comment"></span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span> <span class="comment">/**</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span> <span class="comment"> @brief Close an open map.</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span> <span class="comment"></span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span> <span class="comment"></span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span> <span class="comment"> The closes a map opened by QCBOREncode_OpenMap(). It reduces nesting</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span> <span class="comment"> level by one.</span></div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span> <span class="comment"></span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span> <span class="comment"> When an error occurs as a result of this call, the encoder records</span></div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span> <span class="comment"> the error and enters the error state. The error will be returned when</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span> <span class="comment"></span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span> <span class="comment"> If this has been called more times than QCBOREncode_OpenMap(),</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span> <span class="comment"> then QCBOR_ERR_TOO_MANY_CLOSES will be returned when</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span> <span class="comment"></span></div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span> <span class="comment"> If this is called and it is not a map that is currently</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span> <span class="comment"> open, QCBOR_ERR_CLOSE_MISMATCH will be returned when QCBOREncode_Finish()</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span> <span class="comment"> is called.</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span> <span class="comment"> */</span></div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a7d5cfef1320df2688e45dbb2ed075f40">QCBOREncode_CloseMap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span> </div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span> <span class="comment"></span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span> <span class="comment">/**</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span> <span class="comment"> @brief Indicate start of encoded CBOR to be wrapped in a bstr.</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span> <span class="comment"></span></div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span> <span class="comment"></span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span> <span class="comment"> All added encoded items between this call and a call to</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span> <span class="comment"> QCBOREncode_CloseBstrWrap() will be wrapped in a bstr. They will</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span> <span class="comment"> appear in the final output as a byte string.  That byte string will</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span> <span class="comment"> contain encoded CBOR.</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span> <span class="comment"></span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span> <span class="comment"> The typical use case is for encoded CBOR that is to be</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span> <span class="comment"> cryptographically hashed, as part of a COSE (RFC 8152)</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span> <span class="comment"> implementation. This avoids having to encode the items first in one</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span> <span class="comment"> buffer (e.g., the COSE payload) and then add that buffer as a bstr to</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span> <span class="comment"> another encoding (e.g. the COSE to-be-signed bytes, the</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span> <span class="comment"> Sig_structure) potentially saving a lot of memory.</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span> <span class="comment"></span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span> <span class="comment"> When constructing cryptographically signed CBOR objects, maps or</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span> <span class="comment"> arrays, they typically are encoded normally and then wrapped as a</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span> <span class="comment"> byte string. The COSE standard for example does this. The wrapping is</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span> <span class="comment"> simply treating the encoded CBOR map as a byte string.</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span> <span class="comment"></span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span> <span class="comment"> The stated purpose of this wrapping is to prevent code relaying the</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span> <span class="comment"> signed data but not verifying it from tampering with the signed data</span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span> <span class="comment"> thus making the signature unverifiable. It is also quite beneficial</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span> <span class="comment"> for the signature verification code. Standard CBOR parsers usually do</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span> <span class="comment"> not give access to partially parsed CBOR as would be need to check</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span> <span class="comment"> the signature of some CBOR. With this wrapping, standard CBOR parsers</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span> <span class="comment"> can be used to get to all the data needed for a signature</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span> <span class="comment"> verification.</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span> <span class="comment"> */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1">QCBOREncode_BstrWrap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx);</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span> </div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_BstrWrapInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span> </div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_BstrWrapInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel);</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span> </div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span> <span class="comment"></span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span> <span class="comment">/**</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span> <span class="comment"> @brief Close a wrapping bstr.</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span> <span class="comment"></span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span> <span class="comment"> @param[out] pWrappedCBOR UsefulBufC containing wrapped bytes</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span> <span class="comment"></span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span> <span class="comment"> The closes a wrapping bstr opened by QCBOREncode_BstrWrap(). It reduces</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span> <span class="comment"> nesting level by one.</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span> <span class="comment"></span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span> <span class="comment"> A pointer and length of the enclosed encoded CBOR is returned in</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span> <span class="comment"> *pWrappedCBOR if it is not NULL. The main purpose of this is so this</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span> <span class="comment"> data can be hashed (e.g., with SHA-256) as part of a COSE (RFC 8152)</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span> <span class="comment"> implementation. **WARNING**, this pointer and length should be used</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span> <span class="comment"> right away before any other calls to QCBOREncode_xxxx() as they will</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span> <span class="comment"> move data around and the pointer and length will no longer be to the</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span> <span class="comment"> correct encoded CBOR.</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span> <span class="comment"></span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span> <span class="comment"> When an error occurs as a result of this call, the encoder records</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span> <span class="comment"> the error and enters the error state. The error will be returned when</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span> <span class="comment"></span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span> <span class="comment"> If this has been called more times then QCBOREncode_BstrWrap(),</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span> <span class="comment"> then QCBOR_ERR_TOO_MANY_CLOSES will be returned when</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span> <span class="comment"> QCBOREncode_Finish() is called.</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span> <span class="comment"></span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span> <span class="comment"> If this is called and it is not a wrapping bstr that is currently</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span> <span class="comment"> open, QCBOR_ERR_CLOSE_MISMATCH will be returned when QCBOREncode_Finish()</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span> <span class="comment"> is called.</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span> <span class="comment"> */</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a7c6985587a00a60907d846c2805fd910">QCBOREncode_CloseBstrWrap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> *pWrappedCBOR);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span> </div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span> <span class="comment"></span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span> <span class="comment">/**</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span> <span class="comment"> @brief Add some already-encoded CBOR bytes.</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span> <span class="comment"></span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span> <span class="comment"> @param[in] Encoded The already-encoded CBOR to add to the context.</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span> <span class="comment"></span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span> <span class="comment"> The encoded CBOR being added must be fully conforming CBOR. It must</span></div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span> <span class="comment"> be complete with no arrays or maps that are incomplete. While this</span></div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span> <span class="comment"> encoder doesn't ever produce indefinite lengths, it is OK for the</span></div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span> <span class="comment"> raw CBOR added here to have indefinite lengths.</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span> <span class="comment"></span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span> <span class="comment"> The raw CBOR added here is not checked in anyway. If it is not</span></div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span> <span class="comment"> conforming or has open arrays or such, the final encoded CBOR</span></div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span> <span class="comment"> will probably be wrong or not what was intended.</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span> <span class="comment"></span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span> <span class="comment"> If the encoded CBOR being added here contains multiple items, they</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span> <span class="comment"> must be enclosed in a map or array. At the top level the raw</span></div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span> <span class="comment"> CBOR must be a single data item.</span></div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span> <span class="comment"> */</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e">QCBOREncode_AddEncoded</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span> </div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddEncodedToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span> </div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span> <span class="keyword">static</span> <span class="keywordtype">void</span> QCBOREncode_AddEncodedToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span> </div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span> <span class="comment"></span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span> <span class="comment">/**</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span> <span class="comment"> @brief Get the encoded result.</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span> <span class="comment"></span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span> <span class="comment"> @param[in] pCtx  The context to finish encoding with.</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span> <span class="comment"> @param[out] pEncodedCBOR  Pointer and length of encoded CBOR.</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span> <span class="comment"></span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span> <span class="comment"> @return</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span> <span class="comment"> One of the CBOR error codes.</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span> <span class="comment"></span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span> <span class="comment"> If this returns success QCBOR_SUCCESS the encoding was a success and</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span> <span class="comment"> the return length is correct and complete.</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span> <span class="comment"></span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span> <span class="comment"> If no buffer was passed to QCBOR_Init(), then only the length and</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span> <span class="comment"> number of items was computed. The length is in</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span> <span class="comment"> pEncodedCBOR-&gt;Bytes.len. pEncodedCBOR-&gt;Bytes.ptr is NULL.</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span> <span class="comment"></span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span> <span class="comment"> If a buffer was passed, then pEncodedCBOR-&gt;Bytes.ptr is the same as</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span> <span class="comment"> the buffer passed to QCBOR_Init() and contains the encoded CBOR</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span> <span class="comment"> and the length is filled in.</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span> <span class="comment"></span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span> <span class="comment"> If an error is returned, the buffer may have partially encoded</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span> <span class="comment"> incorrect CBOR in it and it should not be used. Likewise, the length</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span> <span class="comment"> may be incorrect and should not be used.</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span> <span class="comment"></span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span> <span class="comment"> Note that the error could have occurred in one of the many</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span> <span class="comment"> QCBOR_AddXXX calls long before QCBOREncode_Finish() was called. This</span></div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span> <span class="comment"> error handling approach reduces the CBOR implementation size, but makes</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span> <span class="comment"> debugging a problem a little more difficult.</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span> <span class="comment"> */</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#ac0498cefe2cb8d1454340cc8f68cb75f">QCBOREncode_Finish</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> *pEncodedCBOR);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span> </div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span> <span class="comment"></span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span> <span class="comment">/**</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span> <span class="comment"> @brief Get the encoded CBOR and error status.</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span> <span class="comment"></span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span> <span class="comment"> @param[in] pCtx  The context to finish encoding with.</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span> <span class="comment"> @param[out] uEncodedLen The length of the encoded or potentially encoded CBOR in bytes.</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span> <span class="comment"></span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span> <span class="comment"> @return</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span> <span class="comment"> One of the CBOR error codes.</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span> <span class="comment"></span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span> <span class="comment"> If this returns success QCBOR_SUCCESS the encoding was a success and</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span> <span class="comment"> the return length is correct and complete.</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span> <span class="comment"></span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span> <span class="comment"> If no buffer was passed to QCBOR_Init(), then only the length was</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span> <span class="comment"> computed. If a buffer was passed, then the encoded CBOR is in the</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span> <span class="comment"> buffer.</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span> <span class="comment"></span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span> <span class="comment"> If an error is returned, the buffer may have partially encoded</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span> <span class="comment"> incorrect CBOR in it and it should not be used. Likewise, the length</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span> <span class="comment"> may be incorrect and should not be used.</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span> <span class="comment"></span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span> <span class="comment"> Note that the error could have occurred in one of the many</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span> <span class="comment"> QCBOR_AddXXX calls long before QCBOREncode_Finish() was called. This</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span> <span class="comment"> error handling reduces the CBOR implementation size, but makes</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span> <span class="comment"> debugging harder.</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span> <span class="comment"> */</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#a012f50732fbd530eef67dee5111eedce">QCBOREncode_FinishGetSize</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">size_t</span> *uEncodedLen);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span> </div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span> </div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span> </div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span> </div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span> </div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span> <span class="comment"></span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span> <span class="comment">/**</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span> <span class="comment"> QCBORDecodeContext is the data type that holds context decoding the</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span> <span class="comment"> data items for some received CBOR.  It is about 100 bytes, so it can go</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span> <span class="comment"> on the stack.  The contents are opaque, and the caller should not</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span> <span class="comment"> access any internal items.  A context may be re used serially as long</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span> <span class="comment"> as it is re initialized.</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span> <span class="comment"> */</span></div><div class="line"><a name="l01620"></a><span class="lineno"><a class="line" href="qcbor_8h.html#adb1477d3286dd0b0f64e55886b5d2309"> 1620</a></span> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct___q_c_b_o_r_decode_context.html">_QCBORDecodeContext</a> <a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a>;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span> </div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span> <span class="comment"></span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span> <span class="comment">/**</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span> <span class="comment"> Initialize the CBOR decoder context.</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span> <span class="comment"></span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span> <span class="comment"> @param[in] pCtx The context to initialize.</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span> <span class="comment"> @param[in] EncodedCBOR The buffer with CBOR encoded bytes to be decoded.</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span> <span class="comment"> @param[in] nMode One of QCBOR_DECODE_MODE_xxx</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span> <span class="comment"></span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span> <span class="comment"> Initialize context for a pre-order travesal of the encoded CBOR tree.</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span> <span class="comment"></span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span> <span class="comment"> Most CBOR decoding can be completed by calling this function to start</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span> <span class="comment"> and QCBORDecode_GetNext() in a loop.</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span> <span class="comment"></span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span> <span class="comment"> If indefinite length strings are to be decoded, then</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span> <span class="comment"> QCBORDecode_SetMemPool() or QCBORDecode_SetUpAllocator() must be</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span> <span class="comment"> called to set up a string allocator.</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span> <span class="comment"></span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span> <span class="comment"> If tags other than built-in tags are to be recognized, then</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span> <span class="comment"> QCBORDecode_SetCallerAddedTagMap() must be called. The built-in tags</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span> <span class="comment"> are those for which a macro of the form  CBOR_TAG_XXX is defined.</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span> <span class="comment"></span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span> <span class="comment"> Three decoding modes are supported.  In normal mode,</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span> <span class="comment"> QCBOR_DECODE_MODE_NORMAL, maps are decoded and strings and ints are</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span> <span class="comment"> accepted as map labels. If a label is other than these, the error</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span> <span class="comment"> QCBOR_ERR_MAP_LABEL_TYPE is returned by QCBORDecode_GetNext().</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span> <span class="comment"></span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span> <span class="comment"> In strings-only mode, QCBOR_DECODE_MODE_MAP_STRINGS_ONLY, only text</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span> <span class="comment"> strings are accepted for map labels.  This lines up with CBOR that</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span> <span class="comment"> converts to JSON. The error QCBOR_ERR_MAP_LABEL_TYPE is returned by</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span> <span class="comment"> QCBORDecode_GetNext() if anything but a text string label is</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span> <span class="comment"> encountered.</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span> <span class="comment"></span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span> <span class="comment"> In QCBOR_DECODE_MODE_MAP_AS_ARRAY maps are treated as special arrays.</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span> <span class="comment"> They will be return with special uDataType QCBOR_TYPE_MAP_AS_ARRAY</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span> <span class="comment"> and uCount, the number of items, will be double what it would be</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span> <span class="comment"> for a normal map because the labels are also counted. This mode</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span> <span class="comment"> is useful for decoding CBOR that has labels that are not</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span> <span class="comment"> integers or text strings, but the caller must manage much of</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span> <span class="comment"> the map decoding.</span></div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span> <span class="comment"> */</span></div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab7111364851b2d02cf67ed09829d405d">QCBORDecode_Init</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> EncodedCBOR, <a class="code" href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58">QCBORDecodeMode</a> nMode);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span> </div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span> <span class="comment"></span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span> <span class="comment">/**</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span> <span class="comment"> @brief Set up the MemPool string allocator for indefinite length strings.</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span> <span class="comment"></span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span> <span class="comment"> @param[in] pCtx The decode context.</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span> <span class="comment"> @param[in] MemPool The pointer and length of the memory pool.</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span> <span class="comment"> @param[in] bAllStrings true means to put even definite length strings in the pool.</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span> <span class="comment"></span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span> <span class="comment"> @return error if the MemPool was less than QCBOR_DECODE_MIN_MEM_POOL_SIZE.</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span> <span class="comment"></span></div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span> <span class="comment"> Indefinite length strings (text and byte) cannot be decoded unless</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span> <span class="comment"> there is a string allocator configured. MemPool is a simple built-in</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span> <span class="comment"> string allocator that allocates bytes from a memory pool handed to it</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span> <span class="comment"> by calling this function.  The memory pool is just a pointer and</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span> <span class="comment"> length for some block of memory that is to be used for string</span></div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span> <span class="comment"> allocation. It can come from the stack, heap or other.</span></div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span> <span class="comment"></span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span> <span class="comment"> The memory pool must be QCBOR_DECODE_MIN_MEM_POOL_SIZE plus space for</span></div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span> <span class="comment"> all the strings allocated.  There is no overhead per string allocated</span></div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span> <span class="comment"></span></div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span> <span class="comment"> This memory pool is used for all indefinite length strings that are</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span> <span class="comment"> text strings or byte strings, including strings used as labels.</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span> <span class="comment"></span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span> <span class="comment"> The pointers to strings in QCBORItem will point into the memory pool set</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span> <span class="comment"> here. They do not need to be individually freed. Just discard the buffer</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span> <span class="comment"> when they are no longer needed.</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span> <span class="comment"></span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span> <span class="comment"> If bAllStrings is set, then the size will be the overhead plus the</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span> <span class="comment"> space to hold **all** strings, definite and indefinite length, value</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span> <span class="comment"> or label. The advantage of this is that after the decode is complete,</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span> <span class="comment"> the original memory holding the encoded CBOR does not need to remain</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span> <span class="comment"> valid.</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span> <span class="comment"></span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span> <span class="comment"> If this function is never called because there is no need to support</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span> <span class="comment"> indefinite length strings, the MemPool implementation should be</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span> <span class="comment"> dead-stripped by the loader and not add to code size.</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span> <span class="comment"> */</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#aee2d572e423cfed0a2c774b2999c53dc">QCBORDecode_SetMemPool</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <a class="code" href="structuseful__buf.html">UsefulBuf</a> MemPool, <span class="keywordtype">bool</span> bAllStrings);</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span> </div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span> <span class="comment"></span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span> <span class="comment">/**</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span> <span class="comment"> @brief Sets up a custom string allocator for indefinite length strings</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span> <span class="comment"></span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span> <span class="comment"> @param[in] pCtx The decoder context to set up an allocator for</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span> <span class="comment"> @param[in] pAllocator The string allocator "object"</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span> <span class="comment"></span></div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span> <span class="comment"> See QCBORStringAllocator for the requirements of the string allocator.</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span> <span class="comment"></span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span> <span class="comment"> Typically, this is used if the simple MemPool allocator isn't desired.</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span> <span class="comment"></span></div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span> <span class="comment"> A malloc based string allocator can be obtained by calling</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span> <span class="comment"> QCBOR_DMalloc(). This function is supply separately from qcbor</span></div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span> <span class="comment"> to keep qcbor smaller and neater. It is in a separate</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span> <span class="comment"> GitHub repository.</span></div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span> <span class="comment"></span></div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span> <span class="comment"> You can also write your own allocator. Create the allocate, free,</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span> <span class="comment"> and destroy functions and put pointers to them in a QCBORStringAllocator.</span></div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span> <span class="comment"> */</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab573db9aecf8eb82861b9e2df6dc5d9e">QCBORDecode_SetUpAllocator</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <span class="keyword">const</span> <a class="code" href="struct_q_c_b_o_r_string_allocator.html">QCBORStringAllocator</a> *pAllocator, <span class="keywordtype">bool</span> bAllStrings);</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span> </div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span> <span class="comment"></span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span> <span class="comment">/**</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span> <span class="comment"> @brief Configure list of caller selected tags to be recognized</span></div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span> <span class="comment"></span></div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span> <span class="comment"> @param[in] pCtx The decode context.</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span> <span class="comment"> @param[out] pTagList Structure holding the list of tags to configure</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span> <span class="comment"></span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span> <span class="comment"> This is used to tell the decoder about tags beyond those that are</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span> <span class="comment"> built-in that should be recognized. The built-in tags are those</span></div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span> <span class="comment"> with macros of the form CBOR_TAG_XXX.</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span> <span class="comment"></span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span> <span class="comment"> See description of QCBORTagListIn.</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span> <span class="comment"> */</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a01ea338696573e23b9493813543f98f6">QCBORDecode_SetCallerConfiguredTagList</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <span class="keyword">const</span> <a class="code" href="struct_q_c_b_o_r_tag_list_in.html">QCBORTagListIn</a> *pTagList);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span> </div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span> <span class="comment"></span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span> <span class="comment">/**</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span> <span class="comment"> @brief Gets the next item (integer, byte string, array...) in pre order traversal of CBOR tree</span></div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span> <span class="comment"></span></div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span> <span class="comment"> @param[in]  pCtx          The decoder context.</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span> <span class="comment"> @param[out] pDecodedItem  Holds the CBOR item just decoded.</span></div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span> <span class="comment"></span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span> <span class="comment"> @return 0 or error. All errors except QCBOR_ERR_TOO_MANY_TAGS</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span> <span class="comment"> and QCBOR_ERR_STRING_ALLOCATE indicate that the CBOR input</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span> <span class="comment"> could not be decoded. In most cases</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span> <span class="comment"> this is because the CBOR is invalid. In a few cases</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span> <span class="comment"> (QCBOR_ERR_ARRAY_NESTING_TOO_DEEP, QCBOR_ERR_INT_OVERFLOW,</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span> <span class="comment"> QCBOR_ERR_DATE_OVERFLOW) it is because the CBOR is beyond</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span> <span class="comment"> the limits of what this implementation can handle.</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span> <span class="comment"> QCBOR_ERR_NO_STRING_ALLOCATOR indicates CBOR that cannot</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span> <span class="comment"> be handled unless a string allocator is configured.</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span> <span class="comment"> QCBOR_ERR_MAP_LABEL_TYPE is in a way a limitation of</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span> <span class="comment"> this implementation, but can be avoided by decoding</span></div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span> <span class="comment"> in QCBOR_DECODE_MODE_MAP_AS_ARRAY mode.</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span> <span class="comment"></span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span> <span class="comment"> pDecodedItem is filled in with the value parsed. Generally, the</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span> <span class="comment"> following data is returned in the structure.</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span> <span class="comment"></span></div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span> <span class="comment"> - The data type in uDataType which indicates which member of the val</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span> <span class="comment">   union the data is in. This decoder figures out the type based on the</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span> <span class="comment">   CBOR major type, the CBOR "additionalInfo", the CBOR optional tags</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span> <span class="comment">   and the value of the integer.</span></div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span> <span class="comment"></span></div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span> <span class="comment"> - The value of the item, which might be an integer, a pointer and a</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span> <span class="comment">   length, the count of items in an array, a floating-point number or</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span> <span class="comment">   other.</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span> <span class="comment"></span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span> <span class="comment"> - The nesting level for maps and arrays.</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span> <span class="comment"></span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span> <span class="comment"> - The label for an item in a map, which may be a text or byte string or an integer.</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span> <span class="comment"></span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span> <span class="comment"> - The CBOR optional tag or tags.</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span> <span class="comment"></span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span> <span class="comment"> See documentation on in the data type QCBORItem for all the details</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span> <span class="comment"> on what is returned.</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span> <span class="comment"></span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span> <span class="comment"> This function also handles arrays and maps. When first encountered a</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span> <span class="comment"> QCBORItem will be returned with major type CBOR_MAJOR_TYPE_ARRAY or</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span> <span class="comment"> CBOR_MAJOR_TYPE_ARRAY_MAP. QCBORItem.val.uCount will indicate the number</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span> <span class="comment"> of Items in the array or map.  Typically, an implementation will call</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span> <span class="comment"> QCBORDecode_GetNext() in a for loop to fetch them all. When decoding</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span> <span class="comment"> indefinite length maps and arrays, QCBORItem.val.uCount is UINT16_MAX</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span> <span class="comment"> and uNextNestLevel must be used to know when the end of a map</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span> <span class="comment"> or array is reached.</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span> <span class="comment"></span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span> <span class="comment"> Nesting level 0 is the outside top-most nesting level. For example, in</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span> <span class="comment"> a CBOR structure with two items, an integer and a byte string only,</span></div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span> <span class="comment"> both would be at nesting level 0.  A CBOR structure with an array</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span> <span class="comment"> open, an integer and a byte string, would have the integer and byte</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span> <span class="comment"> string as nesting level 1.</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span> <span class="comment"></span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span> <span class="comment"> Here is an example of how the nesting level is reported with no arrays</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span> <span class="comment"> or maps at all</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span> <span class="comment"></span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span> <span class="comment"> @verbatim</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span> <span class="comment"> CBOR Structure           Nesting Level</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span> <span class="comment"> Integer                    0</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span> <span class="comment"> Byte String                0</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span> <span class="comment"> @endverbatim</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span> <span class="comment"></span></div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span> <span class="comment"> Here is an example of how the nesting level is reported with an a simple</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span> <span class="comment"> array and some top-level items.</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span> <span class="comment"></span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span> <span class="comment"> @verbatim</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span> <span class="comment"> Integer                    0</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span> <span class="comment"> Array (with 2 items)       0</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span> <span class="comment"> Byte String                1</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span> <span class="comment"> Byte string                1</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span> <span class="comment"> Integer                    0</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span> <span class="comment"> @endverbatim</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span> <span class="comment"></span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span> <span class="comment"></span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span> <span class="comment"> Here's a more complex example</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span> <span class="comment"> @verbatim</span></div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span> <span class="comment"></span></div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span> <span class="comment"> Map with 2 items           0</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span> <span class="comment"> Text string                1</span></div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span> <span class="comment"> Array with 3 integers      1</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span> <span class="comment"> integer                    2</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span> <span class="comment"> integer                    2</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span> <span class="comment"> integer                    2</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span> <span class="comment"> text string                1</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span> <span class="comment"> byte string                1</span></div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span> <span class="comment"> @endverbatim</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span> <span class="comment"></span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span> <span class="comment"> In QCBORItem, uNextNestLevel is the nesting level for the next call</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span> <span class="comment"> to QCBORDecode_GetNext(). It indicates if any maps or arrays were closed</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span> <span class="comment"> out during the processing of the just-fecthed QCBORItem. This processing</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span> <span class="comment"> includes a look-ahead for any breaks that close out indefinite length</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span> <span class="comment"> arrays or maps. This value is needed to be able to understand the</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span> <span class="comment"> hierarchical structure. If uNextNestLevel is not equal to uNestLevel</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span> <span class="comment"> the end of the current map or array has been encountered. This</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span> <span class="comment"> works the same for both definite and indefinite length arrays.</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span> <span class="comment"></span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span> <span class="comment"> Most uses of this decoder will not need to do anything extra for</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span> <span class="comment"> tag handling. The built-in tags, those with a macro of the form</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span> <span class="comment"> CBOR_TAG_XXXX, will be enough.</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span> <span class="comment"></span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span> <span class="comment"> If tags beyond built-in tags are to be recognized, they must be</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span> <span class="comment"> configured by calling QCBORDecode_SetCallerConfiguredTags(). If</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span> <span class="comment"> a tag is not recognized it is silently ignored.</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span> <span class="comment"></span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span> <span class="comment"> Several tagged types are automatically recognized and decoded and</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span> <span class="comment"> returned in their decoded form.</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span> <span class="comment"></span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span> <span class="comment"> To find out if a QCBORItem was tagged with a particular tag</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span> <span class="comment"> call QCBORDecode_IsTagged(). This works only for built-in</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span> <span class="comment"> tags and caller-configured tags.</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span> <span class="comment"></span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span> <span class="comment"> To get the full list of tags on an Item without having to</span></div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span> <span class="comment"> pre-configure any predetermined list of tags use</span></div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span> <span class="comment"> QCBORDecode_GetNextWithTags().</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span> <span class="comment"> */</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#a5822b9efabd2a4bb1ce13390bf378b61">QCBORDecode_GetNext</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <a class="code" href="struct___q_c_b_o_r_item.html">QCBORItem</a> *pDecodedItem);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span> </div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span> <span class="comment"></span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span> <span class="comment">/**</span></div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span> <span class="comment"> @brief Gets the next item including full list of tags for item</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span> <span class="comment"></span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span> <span class="comment"> @param[in]  pCtx          The decoder context.</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span> <span class="comment"> @param[out] pDecodedItem  Holds the CBOR item just decoded.</span></div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span> <span class="comment"> @param[in,out] pTagList   On input array to put tags in; on output the tags on this item.</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span> <span class="comment"></span></div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span> <span class="comment"> @return 0 or error.</span></div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span> <span class="comment"></span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span> <span class="comment"> This works the same as QCBORDecode_GetNext() except that it also returns</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span> <span class="comment"> the full list of tags for the data item. This function should only</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span> <span class="comment"> be needed when parsing CBOR to print it out or convert it to some other</span></div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span> <span class="comment"> format. It should not be needed in an actual CBOR protocol implementation.</span></div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span> <span class="comment"></span></div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span> <span class="comment"> Tags will be returned here whether or not they are in the built-in or</span></div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span> <span class="comment"> caller-configured tag lists.</span></div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span> <span class="comment"></span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span> <span class="comment"> CBOR has no upper bound of limit on the number of tags that can be</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span> <span class="comment"> associated with a data item. In practice the number of tags on an item</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span> <span class="comment"> will usually be small, perhaps less than five. This will return an error</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span> <span class="comment"> if the array in pTagList is too small to hold all the tags for an item.</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span> <span class="comment"></span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span> <span class="comment"> (This function is separate from  QCBORDecode_GetNext() so as to not have to</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span> <span class="comment"> make QCBORItem large enough to be able to hold a full list of tags. Even a list of</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span> <span class="comment"> five tags would nearly double its size because tags can be a uint64_t).</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span> <span class="comment"> */</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#a3971a89e4bd3816a5e638be2363ba050">QCBORDecode_GetNextWithTags</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <a class="code" href="struct___q_c_b_o_r_item.html">QCBORItem</a> *pDecodedItem, <a class="code" href="struct_q_c_b_o_r_tag_list_out.html">QCBORTagListOut</a> *pTagList);</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span> </div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span> <span class="comment"></span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span> <span class="comment">/**</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span> <span class="comment"> @brief Determine if a CBOR item was tagged with a particular tag</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span> <span class="comment"></span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span> <span class="comment"> @param[in] pCtx    The decoder context.</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span> <span class="comment"> @param[in] pItem   The CBOR item to check</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span> <span class="comment"> @param[in] uTag    The tag to check</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span> <span class="comment"></span></div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span> <span class="comment"> @return 1 if it was tagged, 0 if not</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span> <span class="comment"></span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span> <span class="comment"> QCBORDecode_GetNext() processes tags by looking them up</span></div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span> <span class="comment"> in two lists and setting a bit corresponding to the tag</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span> <span class="comment"> in uTagBits in the QCBORItem. To find out if a</span></div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span> <span class="comment"> QCBORItem was tagged with a particular tag, call</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span> <span class="comment"> this function. It handles the mapping between</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span> <span class="comment"> the two lists of tags and the bits set for it.</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span> <span class="comment"></span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span> <span class="comment"> The first tag list is the built-in tags, those</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span> <span class="comment"> with a macro of the form CBOR_TAG_XXX in this</span></div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span> <span class="comment"> header file. There are up to 48 of these,</span></div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span> <span class="comment"> corresponding to the lower 48 tag bits.</span></div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span> <span class="comment"></span></div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span> <span class="comment"> The other optional tag list is the ones</span></div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span> <span class="comment"> the caller configured using QCBORDecode_SetCallerConfiguredTagList()</span></div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span> <span class="comment"> There are QCBOR_MAX_CUSTOM_TAGS (16) of these corresponding to the</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span> <span class="comment"> upper 16 tag bits.</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span> <span class="comment"></span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span> <span class="comment"> See also QCBORDecode_GetTags() and QCBORDecode_GetNextWithTags().</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span> <span class="comment"> */</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span> <span class="keywordtype">int</span> <a class="code" href="qcbor_8h.html#a73ae5c6a36c8d9de1ea4b3f095e958b8">QCBORDecode_IsTagged</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx, <span class="keyword">const</span> <a class="code" href="struct___q_c_b_o_r_item.html">QCBORItem</a> *pItem, uint64_t uTag);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span> </div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span> <span class="comment"></span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span> <span class="comment">/**</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span> <span class="comment"> Check whether all the bytes have been decoded and maps and arrays closed.</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span> <span class="comment"></span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span> <span class="comment"> @param[in]  pCtx          The context to check</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span> <span class="comment"></span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span> <span class="comment"> @return QCBOR_SUCCESS or error</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span> <span class="comment"></span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span> <span class="comment"> This tells you if all the bytes given to QCBORDecode_Init() have</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span> <span class="comment"> been consumed and whether all maps and arrays were closed.</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span> <span class="comment"> The decode is considered to be incorrect or incomplete if not</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span> <span class="comment"> and an error will be returned.</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span> <span class="comment"> */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span> <a class="code" href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a> <a class="code" href="qcbor_8h.html#a79109a9a307c93dddb8b582d4a3a9ceb">QCBORDecode_Finish</a>(<a class="code" href="struct___q_c_b_o_r_decode_context.html">QCBORDecodeContext</a> *pCtx);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span> </div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span> </div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span> </div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span> <span class="comment"></span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span> <span class="comment">/**</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span> <span class="comment">  Convert int64_t to smaller int's safely</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span> <span class="comment"></span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span> <span class="comment"> @param [in]  src    An int64_t</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span> <span class="comment"> @param [out] dest   A smaller sized int to convert to</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span> <span class="comment"></span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span> <span class="comment"> @return 0 on success -1 if not</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span> <span class="comment"></span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span> <span class="comment"> When decoding an integer, the CBOR decoder will return the value as an</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span> <span class="comment"> int64_t unless the integer is in the range of INT64_MAX and</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span> <span class="comment"> UINT64_MAX. That is, unless the value is so large that it can only be</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span> <span class="comment"> represented as a uint64_t, it will be an int64_t.</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span> <span class="comment"></span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span> <span class="comment"> CBOR itself doesn't size the individual integers it carries at</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span> <span class="comment"> all. The only limits it puts on the major integer types is that they</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span> <span class="comment"> are 8 bytes or less in length. Then encoders like this one use the</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span> <span class="comment"> smallest number of 1, 2, 4 or 8 bytes to represent the integer based</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span> <span class="comment"> on its value. There is thus no notion that one data item in CBOR is</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span> <span class="comment"> an 1 byte integer and another is a 4 byte integer.</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span> <span class="comment"></span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span> <span class="comment"> The interface to this CBOR encoder only uses 64-bit integers. Some</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span> <span class="comment"> CBOR protocols or implementations of CBOR protocols may not want to</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span> <span class="comment"> work with something smaller than a 64-bit integer.  Perhaps an array</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span> <span class="comment"> of 1000 integers needs to be sent and none has a value larger than</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span> <span class="comment"> 50,000 and are represented as uint16_t.</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span> <span class="comment"></span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span> <span class="comment"> The sending / encoding side is easy. Integers are temporarily widened</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span> <span class="comment"> to 64-bits as a parameter passing through QCBOREncode_AddInt64() and</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span> <span class="comment"> encoded in the smallest way possible for their value, possibly in</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span> <span class="comment"> less than an uint16_t.</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span> <span class="comment"></span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span> <span class="comment"> On the decoding side the integers will be returned at int64_t even if</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span> <span class="comment"> they are small and were represented by only 1 or 2 bytes in the</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span> <span class="comment"> encoded CBOR. The functions here will convert integers to a small</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span> <span class="comment"> representation with an overflow check.</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span> <span class="comment"></span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span> <span class="comment"> (The decoder could have support 8 different integer types and</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span> <span class="comment"> represented the integer with the smallest type automatically, but</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span> <span class="comment"> this would have made the decoder more complex and code calling the</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span> <span class="comment"> decoder more complex in most use cases.  In most use cases on 64-bit</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span> <span class="comment"> machines it is no burden to carry around even small integers as</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span> <span class="comment"> 64-bit values).</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span> <span class="comment"> */</span></div><div class="line"><a name="l01980"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ae21a1fd47578300471373ed0a6b6b284"> 1980</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="qcbor_8h.html#ae21a1fd47578300471373ed0a6b6b284">QCBOR_Int64ToInt32</a>(int64_t src, int32_t *dest)</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span> {</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>    <span class="keywordflow">if</span>(src &gt; INT32_MAX || src &lt; INT32_MIN) {</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>       *dest = (int32_t) src;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>    }</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span> }</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span> </div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64ToInt16(int64_t src, int16_t *dest)</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span> {</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>    <span class="keywordflow">if</span>(src &gt; INT16_MAX || src &lt; INT16_MIN) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>       *dest = (int16_t) src;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>    }</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span> }</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span> </div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64ToInt8(int64_t src, int8_t *dest)</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span> {</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>    <span class="keywordflow">if</span>(src &gt; INT8_MAX || src &lt; INT8_MIN) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>       *dest = (int8_t) src;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>    }</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span> }</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span> </div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64ToUInt32(int64_t src, uint32_t *dest)</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span> {</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>    <span class="keywordflow">if</span>(src &gt; UINT32_MAX || src &lt; 0) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>       *dest = (uint32_t) src;</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>    }</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span> }</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span> </div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64UToInt16(int64_t src, uint16_t *dest)</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span> {</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>    <span class="keywordflow">if</span>(src &gt; UINT16_MAX || src &lt; 0) {</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>       *dest = (uint16_t) src;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>    }</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span> }</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span> </div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64ToUInt8(int64_t src, uint8_t *dest)</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span> {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>    <span class="keywordflow">if</span>(src &gt; UINT8_MAX || src &lt; 0) {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>       *dest = (uint8_t) src;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>    }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span> }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span> </div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> QCBOR_Int64ToUInt64(int64_t src, uint64_t *dest)</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span> {</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>    <span class="keywordflow">if</span>(src &gt; 0) {</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>       <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>       *dest = (uint64_t) src;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>    }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span> }</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span> </div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span> </div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span> </div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span> </div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span> </div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span> <span class="comment"> BEGINNING OF PRIVATE INLINE IMPLEMENTATION</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span> <span class="comment"></span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span> <span class="comment"> =========================================================================== */</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span> <span class="comment"></span></div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span> <span class="comment">/**</span></div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span> <span class="comment"> @brief Semi-private method to add a buffer full of bytes to encoded output</span></div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span> <span class="comment"></span></div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span> <span class="comment"> @param[in] pCtx       The encoding context to add the integer to.</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span> <span class="comment"> @param[in] uMajorType The CBOR major type of the bytes.</span></div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span> <span class="comment"> @param[in] Bytes      The bytes to add.</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span> <span class="comment"></span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span> <span class="comment"> Use QCBOREncode_AddText() or QCBOREncode_AddBytes() or</span></div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span> <span class="comment"> QCBOREncode_AddEncoded() instead. They are inline functions</span></div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span> <span class="comment"> that call this and supply the correct major type. This function</span></div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span> <span class="comment"> is public to make the inline functions work to keep the overall</span></div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span> <span class="comment"> code size down and because the C language has no way to make</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span> <span class="comment"> it private.</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span> <span class="comment"></span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span> <span class="comment"> If this is called the major type should be CBOR_MAJOR_TYPE_TEXT_STRING,</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span> <span class="comment"> CBOR_MAJOR_TYPE_BYTE_STRING or CBOR_MAJOR_NONE_TYPE_RAW. The last</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span> <span class="comment"> one is special for adding already-encoded CBOR.</span></div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span> <span class="comment"> */</span></div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, uint8_t uMajorType, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span> </div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span> <span class="comment"></span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span> <span class="comment">/**</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span> <span class="comment"> @brief Semi-private method to open a map, array or bstr wrapped CBOR</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span> <span class="comment"></span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span> <span class="comment"> @param[in] uMajorType The major CBOR type to close</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span> <span class="comment"></span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span> <span class="comment"> Call QCBOREncode_OpenArray(), QCBOREncode_OpenMap() or</span></div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span> <span class="comment"> QCBOREncode_BstrWrap() instead of this.</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span> <span class="comment"> */</span></div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a3e19a115627e89f5ee9298ed9d9d976d">QCBOREncode_OpenMapOrArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, uint8_t uMajorType);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span> </div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span> <span class="comment"></span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span> <span class="comment">/**</span></div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span> <span class="comment"> @brief Semi-private method to close a map, array or bstr wrapped CBOR</span></div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span> <span class="comment"></span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span> <span class="comment"> @param[in] pCtx The context to add to.</span></div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span> <span class="comment"> @param[in] uMajorType The major CBOR type to close</span></div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span> <span class="comment"> @param[out] pWrappedCBOR UsefulBufC containing wrapped bytes</span></div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span> <span class="comment"></span></div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span> <span class="comment"> Call QCBOREncode_CloseArray(), QCBOREncode_CloseMap() or</span></div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span> <span class="comment"> QCBOREncode_CloseBstrWrap() instead of this.</span></div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span> <span class="comment"> */</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a90f361b7c37de1b35c8ef2d30082366b">QCBOREncode_CloseMapOrArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, uint8_t uMajorType, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> *pWrappedCBOR);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span> </div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span> <span class="comment"></span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span> <span class="comment">/**</span></div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span> <span class="comment"> @brief  Semi-private method to add simple types.</span></div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span> <span class="comment"></span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span> <span class="comment"> @param[in] pCtx      The encoding context to add the simple value to.</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span> <span class="comment"> @param[in] uSize     Minimum encoding size for uNum. Usually 0.</span></div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span> <span class="comment"> @param[in] uNum      One of CBOR_SIMPLEV_FALSE through _UNDEF or other.</span></div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span> <span class="comment"></span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span> <span class="comment"> This is used to add simple types like true and false.</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span> <span class="comment"></span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span> <span class="comment"> Call QCBOREncode_AddBool(), QCBOREncode_AddNULL(), QCBOREncode_AddUndef()</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span> <span class="comment"> instead of this.</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span> <span class="comment"></span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span> <span class="comment"> This function can add simple values that are not defined by CBOR yet. This expansion</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span> <span class="comment"> point in CBOR should not be used unless they are standardized.</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span> <span class="comment"></span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span> <span class="comment"> Error handling is the same as QCBOREncode_AddInt64().</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span> <span class="comment"> */</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span> <span class="keywordtype">void</span>  <a class="code" href="qcbor_8h.html#aba41561b15e2abbdb0fcf131b2c6ab2d">QCBOREncode_AddType7</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">size_t</span> uSize, uint64_t uNum);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span> </div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span> </div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddInt64ToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, int64_t uNum)</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span> {</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>    <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(pCtx, CBOR_MAJOR_TYPE_TEXT_STRING, <a class="code" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a>(szLabel)); <span class="comment">// AddSZString not defined yet</span></div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, uNum);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span> }</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span> </div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddInt64ToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, int64_t uNum)</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span> {</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, uNum);</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span> }</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span> </div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span> </div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddUInt64ToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, uint64_t uNum)</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span> {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>    <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(pCtx, CBOR_MAJOR_TYPE_TEXT_STRING, <a class="code" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a>(szLabel)); <span class="comment">// AddSZString not defined yet</span></div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>    <a class="code" href="qcbor_8h.html#a57fc48e69746a5668a5e4deeb55776c2">QCBOREncode_AddUInt64</a>(pCtx, uNum);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span> }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span> </div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddUInt64ToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, uint64_t uNum)</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span> {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>    <a class="code" href="qcbor_8h.html#a57fc48e69746a5668a5e4deeb55776c2">QCBOREncode_AddUInt64</a>(pCtx, uNum);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span> }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span> </div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span> </div><div class="line"><a name="l02151"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2"> 2151</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text)</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span> {</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>    <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(pCtx, CBOR_MAJOR_TYPE_TEXT_STRING, Text);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span> }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span> </div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddTextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text)</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span> {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, <a class="code" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a>(szLabel)); <span class="comment">// AddSZString not defined yet</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, Text);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span> }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span> </div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddTextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Text)</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span> {</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, Text);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span> }</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span> </div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span> </div><div class="line"><a name="l02169"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b"> 2169</a></span> <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString)</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span> {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, <a class="code" href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a>(szString));</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span> }</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span> </div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddSZStringToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString)</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span> {</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szString);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span> }</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span> </div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddSZStringToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szString)</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span> {</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szString);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span> }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span> </div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span> </div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDoubleToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keywordtype">double</span> dNum)</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span> {</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>    <a class="code" href="qcbor_8h.html#a9c3e4d266c63c327bc963931ac27a12c">QCBOREncode_AddDouble</a>(pCtx, dNum);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span> }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span> </div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDoubleToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keywordtype">double</span> dNum)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span> {</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>    <a class="code" href="qcbor_8h.html#a9c3e4d266c63c327bc963931ac27a12c">QCBOREncode_AddDouble</a>(pCtx, dNum);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span> }</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span> </div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span> </div><div class="line"><a name="l02200"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a6d32cbcd8c6f5d6453561a40e90a2a20"> 2200</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a6d32cbcd8c6f5d6453561a40e90a2a20">QCBOREncode_AddDateEpoch</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t date)</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span> {</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a7dedcb07c8058893a67efe42f6740990">CBOR_TAG_DATE_EPOCH</a>);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, date);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span> }</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span> </div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDateEpochToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, int64_t date)</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span> {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a7dedcb07c8058893a67efe42f6740990">CBOR_TAG_DATE_EPOCH</a>);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, date);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span> }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span> </div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDateEpochToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, int64_t date)</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span> {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a7dedcb07c8058893a67efe42f6740990">CBOR_TAG_DATE_EPOCH</a>);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, date);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span> }</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span> </div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span> </div><div class="line"><a name="l02221"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5"> 2221</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span> {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>    <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(pCtx, CBOR_MAJOR_TYPE_BYTE_STRING, Bytes);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span> }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span> </div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBytesToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span> {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span> }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span> </div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBytesToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span> {</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span> }</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span> </div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span> </div><div class="line"><a name="l02239"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a1b3d900725dceb91bf246c012361e5b3"> 2239</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a1b3d900725dceb91bf246c012361e5b3">QCBOREncode_AddBinaryUUID</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span> {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a83d58429f77ffbe918a6d923b0c54735">CBOR_TAG_BIN_UUID</a>);</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span> }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span> </div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBinaryUUIDToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span> {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a83d58429f77ffbe918a6d923b0c54735">CBOR_TAG_BIN_UUID</a>);</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span> }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span> </div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBinaryUUIDToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span> {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a83d58429f77ffbe918a6d923b0c54735">CBOR_TAG_BIN_UUID</a>);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span> }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span> </div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span> </div><div class="line"><a name="l02260"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ac782bb5f00e2e392ed7ab75053553491"> 2260</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ac782bb5f00e2e392ed7ab75053553491">QCBOREncode_AddPositiveBignum</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span> {</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_POS_BIGNUM);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span> }</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span> </div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddPositiveBignumToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span> {</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_POS_BIGNUM);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span> }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span> </div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddPositiveBignumToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span> {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_POS_BIGNUM);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span> }</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span> </div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span> </div><div class="line"><a name="l02281"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a66940998941b4377eae03823c29d4e5d"> 2281</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a66940998941b4377eae03823c29d4e5d">QCBOREncode_AddNegativeBignum</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span> {</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_NEG_BIGNUM);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span> }</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span> </div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddNegativeBignumToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span> {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_NEG_BIGNUM);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span> }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span> </div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddNegativeBignumToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span> {</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, CBOR_TAG_NEG_BIGNUM);</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>    <a class="code" href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a>(pCtx, Bytes);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span> }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span> </div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span> </div><div class="line"><a name="l02302"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ad3e02d6fe09d15e8282b0c1b049a3c4a"> 2302</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ad3e02d6fe09d15e8282b0c1b049a3c4a">QCBOREncode_AddURI</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI)</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span> {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a4ae8a1164ab0a3341445582cfe81613f">CBOR_TAG_URI</a>);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, URI);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span> }</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span> </div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddURIToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI)</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span> {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a4ae8a1164ab0a3341445582cfe81613f">CBOR_TAG_URI</a>);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, URI);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span> }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span> </div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddURIToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> URI)</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span> {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a4ae8a1164ab0a3341445582cfe81613f">CBOR_TAG_URI</a>);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, URI);</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span> }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span> </div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span> </div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span> </div><div class="line"><a name="l02324"></a><span class="lineno"><a class="line" href="qcbor_8h.html#ab57757cd1393ccd8cb4b370727182304"> 2324</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#ab57757cd1393ccd8cb4b370727182304">QCBOREncode_AddB64Text</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span> {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a82fe584ddba0632aeda34609d4fabeed">CBOR_TAG_B64</a>);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span> }</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span> </div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddB64TextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span> {</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a82fe584ddba0632aeda34609d4fabeed">CBOR_TAG_B64</a>);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span> }</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span> </div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddB64TextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span> {</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a82fe584ddba0632aeda34609d4fabeed">CBOR_TAG_B64</a>);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span> }</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span> </div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span> </div><div class="line"><a name="l02345"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a6ee9ac410485977b75b733e049719f03"> 2345</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a6ee9ac410485977b75b733e049719f03">QCBOREncode_AddB64URLText</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span> {</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a531e2d609d863de2e6cd1287d42c0357">CBOR_TAG_B64URL</a>);</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span> }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span> </div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddB64URLTextToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span> {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a531e2d609d863de2e6cd1287d42c0357">CBOR_TAG_B64URL</a>);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span> }</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span> </div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddB64URLTextToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> B64Text)</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span> {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a531e2d609d863de2e6cd1287d42c0357">CBOR_TAG_B64URL</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, B64Text);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span> }</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span> </div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span> </div><div class="line"><a name="l02366"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a9b2105e9aae80069140476b6eeccf98f"> 2366</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a9b2105e9aae80069140476b6eeccf98f">QCBOREncode_AddRegex</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span> {</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#aa819563ea8b98c073c4533ef345eeef2">CBOR_TAG_REGEX</a>);</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, Bytes);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span> }</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span> </div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddRegexToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span> {</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#aa819563ea8b98c073c4533ef345eeef2">CBOR_TAG_REGEX</a>);</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, Bytes);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span> }</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span> </div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddRegexToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Bytes)</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span> {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#aa819563ea8b98c073c4533ef345eeef2">CBOR_TAG_REGEX</a>);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, Bytes);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span> }</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span> </div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span> </div><div class="line"><a name="l02387"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aa5cbc39f5d6ce9f55177cf99d68ee105"> 2387</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aa5cbc39f5d6ce9f55177cf99d68ee105">QCBOREncode_AddMIMEData</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData)</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span> {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#af8bb552dc369fa13a9aaa74cd84f191b">CBOR_TAG_MIME</a>);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, MIMEData);</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span> }</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span> </div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddMIMEDataToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData)</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span> {</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#af8bb552dc369fa13a9aaa74cd84f191b">CBOR_TAG_MIME</a>);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, MIMEData);</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span> }</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span> </div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddMIMEDataToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> MIMEData)</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span> {</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#af8bb552dc369fa13a9aaa74cd84f191b">CBOR_TAG_MIME</a>);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>    <a class="code" href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a>(pCtx, MIMEData);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span> }</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span> </div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span> </div><div class="line"><a name="l02408"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a84881d4d0c59bb05e414bbeb2d38f1c8"> 2408</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a84881d4d0c59bb05e414bbeb2d38f1c8">QCBOREncode_AddDateString</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate)</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span> {</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a5f01747fee8d393dd1bda112484ab040">CBOR_TAG_DATE_STRING</a>);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szDate);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span> }</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span> </div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDateStringToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate)</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span> {</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a5f01747fee8d393dd1bda112484ab040">CBOR_TAG_DATE_STRING</a>);</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szDate);</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span> }</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span> </div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddDateStringToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keyword">const</span> <span class="keywordtype">char</span> *szDate)</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span> {</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>    <a class="code" href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a>(pCtx, <a class="code" href="qcbor_8h.html#a5f01747fee8d393dd1bda112484ab040">CBOR_TAG_DATE_STRING</a>);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szDate);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span> }</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span> </div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span> </div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddSimple(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, uint64_t uNum)</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span> {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>    <a class="code" href="qcbor_8h.html#aba41561b15e2abbdb0fcf131b2c6ab2d">QCBOREncode_AddType7</a>(pCtx, 0, uNum);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span> }</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span> </div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddSimpleToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, uint8_t uSimple)</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span> {</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>    QCBOREncode_AddSimple(pCtx, uSimple);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span> }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span> </div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddSimpleToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">int</span> nLabel, uint8_t uSimple)</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span> {</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>    QCBOREncode_AddSimple(pCtx, uSimple);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span> }</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span> </div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span> </div><div class="line"><a name="l02447"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a"> 2447</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a">QCBOREncode_AddBool</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keywordtype">bool</span> b)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span> {</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>    uint8_t uSimple = CBOR_SIMPLEV_FALSE;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>    <span class="keywordflow">if</span>(b) {</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>       uSimple = CBOR_SIMPLEV_TRUE;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>    }</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>    QCBOREncode_AddSimple(pCtx, uSimple);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span> }</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span> </div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBoolToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <span class="keywordtype">bool</span> b)</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span> {</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>    <a class="code" href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a">QCBOREncode_AddBool</a>(pCtx, b);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span> }</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span> </div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddBoolToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <span class="keywordtype">bool</span> b)</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span> {</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>    <a class="code" href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a">QCBOREncode_AddBool</a>(pCtx, b);</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span> }</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span> </div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span> </div><div class="line"><a name="l02469"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd"> 2469</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd">QCBOREncode_AddNULL</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span> {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>    QCBOREncode_AddSimple(pCtx, CBOR_SIMPLEV_NULL);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span> }</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span> </div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddNULLToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel)</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span> {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>    <a class="code" href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd">QCBOREncode_AddNULL</a>(pCtx);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span> }</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span> </div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddNULLToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel)</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span> {</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>    <a class="code" href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd">QCBOREncode_AddNULL</a>(pCtx);</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span> }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span> </div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span> </div><div class="line"><a name="l02487"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01"> 2487</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01">QCBOREncode_AddUndef</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span> {</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>    QCBOREncode_AddSimple(pCtx, CBOR_SIMPLEV_UNDEF);</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span> }</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span> </div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddUndefToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel)</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span> {</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>    <a class="code" href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01">QCBOREncode_AddUndef</a>(pCtx);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span> }</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span> </div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddUndefToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel)</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span> {</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>    <a class="code" href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01">QCBOREncode_AddUndef</a>(pCtx);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span> }</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span> </div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span> </div><div class="line"><a name="l02505"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1"> 2505</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1">QCBOREncode_OpenArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span> {</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>    <a class="code" href="qcbor_8h.html#a3e19a115627e89f5ee9298ed9d9d976d">QCBOREncode_OpenMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_ARRAY);</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span> }</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span> </div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_OpenArrayInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel)</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span> {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>    <a class="code" href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1">QCBOREncode_OpenArray</a>(pCtx);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span> }</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span> </div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_OpenArrayInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx,  int64_t nLabel)</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span> {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>    <a class="code" href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1">QCBOREncode_OpenArray</a>(pCtx);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span> }</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span> </div><div class="line"><a name="l02522"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a8c24ab9ee7f6b953315f4b48ef14895e"> 2522</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a8c24ab9ee7f6b953315f4b48ef14895e">QCBOREncode_CloseArray</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span> {</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>    <a class="code" href="qcbor_8h.html#a90f361b7c37de1b35c8ef2d30082366b">QCBOREncode_CloseMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_ARRAY, NULL);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span> }</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span> </div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span> </div><div class="line"><a name="l02528"></a><span class="lineno"><a class="line" href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8"> 2528</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8">QCBOREncode_OpenMap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span> {</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>    <a class="code" href="qcbor_8h.html#a3e19a115627e89f5ee9298ed9d9d976d">QCBOREncode_OpenMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_MAP);</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span> }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span> </div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_OpenMapInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel)</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span> {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>    <a class="code" href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8">QCBOREncode_OpenMap</a>(pCtx);</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span> }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span> </div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_OpenMapInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel)</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span> {</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>    <a class="code" href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8">QCBOREncode_OpenMap</a>(pCtx);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span> }</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span> </div><div class="line"><a name="l02545"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a7d5cfef1320df2688e45dbb2ed075f40"> 2545</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a7d5cfef1320df2688e45dbb2ed075f40">QCBOREncode_CloseMap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span> {</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>    <a class="code" href="qcbor_8h.html#a90f361b7c37de1b35c8ef2d30082366b">QCBOREncode_CloseMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_MAP, NULL);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span> }</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span> </div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span> </div><div class="line"><a name="l02551"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1"> 2551</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1">QCBOREncode_BstrWrap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx)</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span> {</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>    <a class="code" href="qcbor_8h.html#a3e19a115627e89f5ee9298ed9d9d976d">QCBOREncode_OpenMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_BYTE_STRING);</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span> }</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span> </div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_BstrWrapInMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel)</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span> {</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>    <a class="code" href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1">QCBOREncode_BstrWrap</a>(pCtx);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span> }</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span> </div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_BstrWrapInMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel)</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span> {</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>    <a class="code" href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1">QCBOREncode_BstrWrap</a>(pCtx);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span> }</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span> </div><div class="line"><a name="l02568"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a7c6985587a00a60907d846c2805fd910"> 2568</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a7c6985587a00a60907d846c2805fd910">QCBOREncode_CloseBstrWrap</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> *pWrappedCBOR)</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span> {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>    <a class="code" href="qcbor_8h.html#a90f361b7c37de1b35c8ef2d30082366b">QCBOREncode_CloseMapOrArray</a>(pCtx, CBOR_MAJOR_TYPE_BYTE_STRING, pWrappedCBOR);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span> }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span> </div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span> </div><div class="line"><a name="l02574"></a><span class="lineno"><a class="line" href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e"> 2574</a></span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e">QCBOREncode_AddEncoded</a>(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded)</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span> {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>    <a class="code" href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a>(pCtx, CBOR_MAJOR_NONE_TYPE_RAW, Encoded);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span> }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span> </div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddEncodedToMap(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, <span class="keyword">const</span> <span class="keywordtype">char</span> *szLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded)</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span> {</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>    <a class="code" href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a>(pCtx, szLabel);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>    <a class="code" href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e">QCBOREncode_AddEncoded</a>(pCtx, Encoded);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span> }</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span> </div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> QCBOREncode_AddEncodedToMapN(<a class="code" href="struct___q_c_b_o_r_encode_context.html">QCBOREncodeContext</a> *pCtx, int64_t nLabel, <a class="code" href="structuseful__buf__c.html">UsefulBufC</a> Encoded)</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span> {</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>    <a class="code" href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a>(pCtx, nLabel);</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>    <a class="code" href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e">QCBOREncode_AddEncoded</a>(pCtx, Encoded);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span> }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span> </div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span> </div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span> <span class="comment">/* ===========================================================================</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span> <span class="comment"> END OF PRIVATE INLINE IMPLEMENTATION</span></div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span> <span class="comment"></span></div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span> <span class="comment"> =========================================================================== */</span></div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span> </div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span> <span class="preprocessor">#endif </span><span class="comment">/* defined(__QCBOR__qcbor__) */</span><span class="preprocessor"></span></div><div class="ttc" id="qcbor_8h_html_a01ea338696573e23b9493813543f98f6"><div class="ttname"><a href="qcbor_8h.html#a01ea338696573e23b9493813543f98f6">QCBORDecode_SetCallerConfiguredTagList</a></div><div class="ttdeci">void QCBORDecode_SetCallerConfiguredTagList(QCBORDecodeContext *pCtx, const QCBORTagListIn *pTagList)</div><div class="ttdoc">Configure list of caller selected tags to be recognized. </div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a1056d95e93e9f01c05b3dce6e82907a4"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a1056d95e93e9f01c05b3dce6e82907a4">QCBOR_ERR_BUFFER_TOO_LARGE</a></div><div class="ttdoc">During encoding, the length of the encoded CBOR exceeded UINT32_MAX. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00589">qcbor.h:589</a></div></div>
<div class="ttc" id="qcbor_8h_html_a25481c14bcc196e1b22c426ba1fefb49"><div class="ttname"><a href="qcbor_8h.html#a25481c14bcc196e1b22c426ba1fefb49">QCBOREncode_AddTag</a></div><div class="ttdeci">void QCBOREncode_AddTag(QCBOREncodeContext *pCtx, uint64_t uTag)</div><div class="ttdoc">[in] Add an optional tag </div></div>
<div class="ttc" id="qcbor_8h_html_a3971a89e4bd3816a5e638be2363ba050"><div class="ttname"><a href="qcbor_8h.html#a3971a89e4bd3816a5e638be2363ba050">QCBORDecode_GetNextWithTags</a></div><div class="ttdeci">QCBORError QCBORDecode_GetNextWithTags(QCBORDecodeContext *pCtx, QCBORItem *pDecodedItem, QCBORTagListOut *pTagList)</div><div class="ttdoc">Gets the next item including full list of tags for item. </div></div>
<div class="ttc" id="qcbor_8h_html_ab57757cd1393ccd8cb4b370727182304"><div class="ttname"><a href="qcbor_8h.html#ab57757cd1393ccd8cb4b370727182304">QCBOREncode_AddB64Text</a></div><div class="ttdeci">static void QCBOREncode_AddB64Text(QCBOREncodeContext *pCtx, UsefulBufC B64Text)</div><div class="ttdoc">Add base 64-encoded text to encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02324">qcbor.h:2324</a></div></div>
<div class="ttc" id="qcbor_8h_html_a4ae8a1164ab0a3341445582cfe81613f"><div class="ttname"><a href="qcbor_8h.html#a4ae8a1164ab0a3341445582cfe81613f">CBOR_TAG_URI</a></div><div class="ttdeci">#define CBOR_TAG_URI</div><div class="ttdoc">The data in the string is a URIs, as defined in RFC3986. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00292">qcbor.h:292</a></div></div>
<div class="ttc" id="qcbor_8h_html_aa819563ea8b98c073c4533ef345eeef2"><div class="ttname"><a href="qcbor_8h.html#aa819563ea8b98c073c4533ef345eeef2">CBOR_TAG_REGEX</a></div><div class="ttdeci">#define CBOR_TAG_REGEX</div><div class="ttdoc">regular expressions in Perl Compatible Regular Expressions (PCRE) / JavaScript syntax ECMA262...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00298">qcbor.h:298</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a5880606db007bdf5dba9498ea877fd84"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a5880606db007bdf5dba9498ea877fd84">QCBOR_ERR_ARRAY_OR_MAP_STILL_OPEN</a></div><div class="ttdoc">During encoding or decoding, the number of array or map opens was not matched by the number of closes...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00601">qcbor.h:601</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42af851c38293b14b0335c65b02140e8a3d"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af851c38293b14b0335c65b02140e8a3d">QCBOR_ERR_HIT_END</a></div><div class="ttdoc">During decoding, hit the end of the given data to decode. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00585">qcbor.h:585</a></div></div>
<div class="ttc" id="qcbor_8h_html_a7dedcb07c8058893a67efe42f6740990"><div class="ttname"><a href="qcbor_8h.html#a7dedcb07c8058893a67efe42f6740990">CBOR_TAG_DATE_EPOCH</a></div><div class="ttdeci">#define CBOR_TAG_DATE_EPOCH</div><div class="ttdoc">See QCBOREncode_AddDateEpoch_2() </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00274">qcbor.h:274</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a8727f50e2d5d40b7b38713b665626804"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a8727f50e2d5d40b7b38713b665626804">_QCBORItem::dateString</a></div><div class="ttdeci">UsefulBufC dateString</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_DATE_EPOCH. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00744">qcbor.h:744</a></div></div>
<div class="ttc" id="qcbor_8h_html_ac782bb5f00e2e392ed7ab75053553491"><div class="ttname"><a href="qcbor_8h.html#ac782bb5f00e2e392ed7ab75053553491">QCBOREncode_AddPositiveBignum</a></div><div class="ttdeci">static void QCBOREncode_AddPositiveBignum(QCBOREncodeContext *pCtx, UsefulBufC Bytes)</div><div class="ttdoc">Add a positive big number to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02260">qcbor.h:2260</a></div></div>
<div class="ttc" id="qcbor_8h_html_a6d32cbcd8c6f5d6453561a40e90a2a20"><div class="ttname"><a href="qcbor_8h.html#a6d32cbcd8c6f5d6453561a40e90a2a20">QCBOREncode_AddDateEpoch</a></div><div class="ttdeci">static void QCBOREncode_AddDateEpoch(QCBOREncodeContext *pCtx, int64_t date)</div><div class="ttdoc">Add an epoch-based date. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02200">qcbor.h:2200</a></div></div>
<div class="ttc" id="qcbor_8h_html_ae21a1fd47578300471373ed0a6b6b284"><div class="ttname"><a href="qcbor_8h.html#ae21a1fd47578300471373ed0a6b6b284">QCBOR_Int64ToInt32</a></div><div class="ttdeci">static int QCBOR_Int64ToInt32(int64_t src, int32_t *dest)</div><div class="ttdoc">Convert int64_t to smaller int&amp;#39;s safely. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l01980">qcbor.h:1980</a></div></div>
<div class="ttc" id="qcbor_8h_html_acf2564f1c732f4899737aa991701184b"><div class="ttname"><a href="qcbor_8h.html#acf2564f1c732f4899737aa991701184b">QCBORItem</a></div><div class="ttdeci">struct _QCBORItem QCBORItem</div><div class="ttdoc">QCBORItem holds the type, value and other info for a decoded item returned by GetNextItem(). </div></div>
<div class="ttc" id="qcbor_8h_html_af8bb552dc369fa13a9aaa74cd84f191b"><div class="ttname"><a href="qcbor_8h.html#af8bb552dc369fa13a9aaa74cd84f191b">CBOR_TAG_MIME</a></div><div class="ttdeci">#define CBOR_TAG_MIME</div><div class="ttdoc">MIME messages (including all headers), as defined in RFC2045. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00300">qcbor.h:300</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a99b8608d0a8ae97155576b2c5590d1cb"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a99b8608d0a8ae97155576b2c5590d1cb">QCBOR_ERR_INVALID_CBOR</a></div><div class="ttdoc">During decoding, the CBOR is not valid, primarily a simple type is encoded in a prohibited way...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00613">qcbor.h:613</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42">QCBORError</a></div><div class="ttdeci">QCBORError</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00553">qcbor.h:553</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_adf4e4704600249b867d732b43afe3279"><div class="ttname"><a href="_useful_buf_8h.html#adf4e4704600249b867d732b43afe3279">UsefulBuf</a></div><div class="ttdeci">struct useful_buf UsefulBuf</div><div class="ttdoc">The non-const UsefulBuf typically used for some allocated memory that is to be filled in...</div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42ab79ef3fec6d6ef45c85d925a5f9c78c6"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab79ef3fec6d6ef45c85d925a5f9c78c6">QCBOR_ERR_TOO_MANY_CLOSES</a></div><div class="ttdoc">During encoding, more arrays or maps were closed than opened. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00574">qcbor.h:574</a></div></div>
<div class="ttc" id="qcbor_8h_html_a986612a7ed8e0538af3e341744ac656c"><div class="ttname"><a href="qcbor_8h.html#a986612a7ed8e0538af3e341744ac656c">QCBOREncode_AddBuffer</a></div><div class="ttdeci">void QCBOREncode_AddBuffer(QCBOREncodeContext *pCtx, uint8_t uMajorType, UsefulBufC Bytes)</div><div class="ttdoc">Semi-private method to add a buffer full of bytes to encoded output. </div></div>
<div class="ttc" id="qcbor_8h_html_afb1592b19f254b747e6ad788189e8c58aff9fda08b08890a0d6fb6fa362d0c4e5"><div class="ttname"><a href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58aff9fda08b08890a0d6fb6fa362d0c4e5">QCBOR_DECODE_MODE_MAP_AS_ARRAY</a></div><div class="ttdoc">See QCBORDecode_Init() </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00660">qcbor.h:660</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a2e6b90a829eb935989a281e45acf2cae"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a2e6b90a829eb935989a281e45acf2cae">_QCBORItem::uLabelAlloc</a></div><div class="ttdeci">uint8_t uLabelAlloc</div><div class="ttdoc">1 if allocated with string allocator, 0 if not. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00729">qcbor.h:729</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a4fea8079d7394ec9d4599ec4de3015ba"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a4fea8079d7394ec9d4599ec4de3015ba">_QCBORItem::uTagV</a></div><div class="ttdeci">uint64_t uTagV</div><div class="ttdoc">The integer value for unknown simple types. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00747">qcbor.h:747</a></div></div>
<div class="ttc" id="qcbor_8h_html_a66940998941b4377eae03823c29d4e5d"><div class="ttname"><a href="qcbor_8h.html#a66940998941b4377eae03823c29d4e5d">QCBOREncode_AddNegativeBignum</a></div><div class="ttdeci">static void QCBOREncode_AddNegativeBignum(QCBOREncodeContext *pCtx, UsefulBufC Bytes)</div><div class="ttdoc">Add a negative big number to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02281">qcbor.h:2281</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42ac137e2e0f81190b6cbb0dbd8837f16e8"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ac137e2e0f81190b6cbb0dbd8837f16e8">QCBOR_ERR_STRING_ALLOCATE</a></div><div class="ttdoc">Error allocating space for a string, usually for an indefinite length string. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00637">qcbor.h:637</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a0d74cc5b94f9510ecc5f330c238508b8"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a0d74cc5b94f9510ecc5f330c238508b8">QCBOR_ERR_ARRAY_NESTING_TOO_DEEP</a></div><div class="ttdoc">During encoding or decoding, the array or map nesting was deeper than this implementation can handle...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00566">qcbor.h:566</a></div></div>
<div class="ttc" id="structuseful__buf_html"><div class="ttname"><a href="structuseful__buf.html">useful_buf</a></div><div class="ttdoc">The non-const UsefulBuf typically used for some allocated memory that is to be filled in...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00160">UsefulBuf.h:160</a></div></div>
<div class="ttc" id="qcbor_8h_html_a3e19a115627e89f5ee9298ed9d9d976d"><div class="ttname"><a href="qcbor_8h.html#a3e19a115627e89f5ee9298ed9d9d976d">QCBOREncode_OpenMapOrArray</a></div><div class="ttdeci">void QCBOREncode_OpenMapOrArray(QCBOREncodeContext *pCtx, uint8_t uMajorType)</div><div class="ttdoc">Semi-private method to open a map, array or bstr wrapped CBOR. </div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a64e0fa8767c2d022ecd7885ab2653664"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a64e0fa8767c2d022ecd7885ab2653664">QCBOR_ERR_NO_STRING_ALLOCATOR</a></div><div class="ttdoc">Unable to decode an indefinite length string because no string allocator was configured. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00629">qcbor.h:629</a></div></div>
<div class="ttc" id="struct_____q_c_b_o_r_track_nesting_html"><div class="ttname"><a href="struct_____q_c_b_o_r_track_nesting.html">__QCBORTrackNesting</a></div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00116">qcbor.h:116</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a7976ba2a67d65d4b0048fcafbf183655"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a7976ba2a67d65d4b0048fcafbf183655">QCBOR_ERR_UNSUPPORTED</a></div><div class="ttdoc">During decoding, some CBOR construct was encountered that this decoder doesn&amp;#39;t support, primarily this is the reserved additional info values, 28 through 30. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00579">qcbor.h:579</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42add540e42603e163282db5edf279cff07"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42add540e42603e163282db5edf279cff07">QCBOR_ERR_BAD_OPT_TAG</a></div><div class="ttdoc">Optional tagging that doesn&amp;#39;t make sense (an int is tagged as a date string) or can&amp;#39;t be handled...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00617">qcbor.h:617</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a7e603acab557c1f771b94b32e29fa66c"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a7e603acab557c1f771b94b32e29fa66c">_QCBORItem::uDataAlloc</a></div><div class="ttdeci">uint8_t uDataAlloc</div><div class="ttdoc">Tells what element of the label union to use. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00728">qcbor.h:728</a></div></div>
<div class="ttc" id="qcbor_8h_html_a21148334efda30e4f771b23b121204f1"><div class="ttname"><a href="qcbor_8h.html#a21148334efda30e4f771b23b121204f1">QCBOREncode_OpenArray</a></div><div class="ttdeci">static void QCBOREncode_OpenArray(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Indicates that the next items added are in an array. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02505">qcbor.h:2505</a></div></div>
<div class="ttc" id="qcbor_8h_html_a9b2105e9aae80069140476b6eeccf98f"><div class="ttname"><a href="qcbor_8h.html#a9b2105e9aae80069140476b6eeccf98f">QCBOREncode_AddRegex</a></div><div class="ttdeci">static void QCBOREncode_AddRegex(QCBOREncodeContext *pCtx, UsefulBufC Regex)</div><div class="ttdoc">Add Perl Compatible Regular Expression. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02366">qcbor.h:2366</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42ab4148715700ffcc769193f2c47bec7ec"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ab4148715700ffcc769193f2c47bec7ec">QCBOR_ERR_INT_OVERFLOW</a></div><div class="ttdoc">During decoding, an integer smaller than INT64_MIN was received (CBOR can represent integers smaller ...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00593">qcbor.h:593</a></div></div>
<div class="ttc" id="structuseful__buf__c_html"><div class="ttname"><a href="structuseful__buf__c.html">useful_buf_c</a></div><div class="ttdoc">UsefulBufC and UsefulBuf are simple data structures to hold a pointer and length for a binary data...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00149">UsefulBuf.h:149</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a45d113f8d303eebb3734306531862812"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a45d113f8d303eebb3734306531862812">_QCBORItem::int64</a></div><div class="ttdeci">int64_t int64</div><div class="ttdoc">The label for uLabelType QCBOR_TYPE_BYTE_STRING and QCBOR_TYPE_TEXT_STRING. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00733">qcbor.h:733</a></div></div>
<div class="ttc" id="struct_q_c_b_o_r_tag_list_in_html"><div class="ttname"><a href="struct_q_c_b_o_r_tag_list_in.html">QCBORTagListIn</a></div><div class="ttdoc">This is used to tell the decoder about tags that it should record in uTagBits in QCBORItem beyond the...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00812">qcbor.h:812</a></div></div>
<div class="ttc" id="qcbor_8h_html_a012f50732fbd530eef67dee5111eedce"><div class="ttname"><a href="qcbor_8h.html#a012f50732fbd530eef67dee5111eedce">QCBOREncode_FinishGetSize</a></div><div class="ttdeci">QCBORError QCBOREncode_FinishGetSize(QCBOREncodeContext *pCtx, size_t *uEncodedLen)</div><div class="ttdoc">Get the encoded CBOR and error status. </div></div>
<div class="ttc" id="qcbor_8h_html_a79109a9a307c93dddb8b582d4a3a9ceb"><div class="ttname"><a href="qcbor_8h.html#a79109a9a307c93dddb8b582d4a3a9ceb">QCBORDecode_Finish</a></div><div class="ttdeci">QCBORError QCBORDecode_Finish(QCBORDecodeContext *pCtx)</div><div class="ttdoc">Check whether all the bytes have been decoded and maps and arrays closed. </div></div>
<div class="ttc" id="qcbor_8h_html_ac0498cefe2cb8d1454340cc8f68cb75f"><div class="ttname"><a href="qcbor_8h.html#ac0498cefe2cb8d1454340cc8f68cb75f">QCBOREncode_Finish</a></div><div class="ttdeci">QCBORError QCBOREncode_Finish(QCBOREncodeContext *pCtx, UsefulBufC *pEncodedCBOR)</div><div class="ttdoc">Get the encoded result. </div></div>
<div class="ttc" id="qcbor_8h_html_a9f3fe0d53bc053327c18138d296ca4c2"><div class="ttname"><a href="qcbor_8h.html#a9f3fe0d53bc053327c18138d296ca4c2">QCBOREncode_AddText</a></div><div class="ttdeci">static void QCBOREncode_AddText(QCBOREncodeContext *pCtx, UsefulBufC Text)</div><div class="ttdoc">Add a UTF-8 text string to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02151">qcbor.h:2151</a></div></div>
<div class="ttc" id="qcbor_8h_html_aa5cbc39f5d6ce9f55177cf99d68ee105"><div class="ttname"><a href="qcbor_8h.html#aa5cbc39f5d6ce9f55177cf99d68ee105">QCBOREncode_AddMIMEData</a></div><div class="ttdeci">static void QCBOREncode_AddMIMEData(QCBOREncodeContext *pCtx, UsefulBufC MIMEData)</div><div class="ttdoc">MIME encoded text to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02387">qcbor.h:2387</a></div></div>
<div class="ttc" id="struct_____q_c_b_o_r_decode_nesting_html"><div class="ttname"><a href="struct_____q_c_b_o_r_decode_nesting.html">__QCBORDecodeNesting</a></div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00157">qcbor.h:157</a></div></div>
<div class="ttc" id="qcbor_8h_html_a85139b377c9cf7ac5a3d3ff5a825abb1"><div class="ttname"><a href="qcbor_8h.html#a85139b377c9cf7ac5a3d3ff5a825abb1">QCBOREncode_BstrWrap</a></div><div class="ttdeci">static void QCBOREncode_BstrWrap(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Indicate start of encoded CBOR to be wrapped in a bstr. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02551">qcbor.h:2551</a></div></div>
<div class="ttc" id="qcbor_8h_html_a73ae5c6a36c8d9de1ea4b3f095e958b8"><div class="ttname"><a href="qcbor_8h.html#a73ae5c6a36c8d9de1ea4b3f095e958b8">QCBORDecode_IsTagged</a></div><div class="ttdeci">int QCBORDecode_IsTagged(QCBORDecodeContext *pCtx, const QCBORItem *pItem, uint64_t uTag)</div><div class="ttdoc">Determine if a CBOR item was tagged with a particular tag. </div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html"><div class="ttname"><a href="struct___q_c_b_o_r_item.html">_QCBORItem</a></div><div class="ttdoc">QCBORItem holds the type, value and other info for a decoded item returned by GetNextItem(). </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00724">qcbor.h:724</a></div></div>
<div class="ttc" id="_useful_buf_8h_html"><div class="ttname"><a href="_useful_buf_8h.html">UsefulBuf.h</a></div><div class="ttdoc">The goal of this code is to make buffer and pointer manipulation easier and safer when working with b...</div></div>
<div class="ttc" id="qcbor_8h_html_a7d5cfef1320df2688e45dbb2ed075f40"><div class="ttname"><a href="qcbor_8h.html#a7d5cfef1320df2688e45dbb2ed075f40">QCBOREncode_CloseMap</a></div><div class="ttdeci">static void QCBOREncode_CloseMap(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Close an open map. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02545">qcbor.h:2545</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a2caaaca3ffd0dc2d28a890663953d2e9"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a2caaaca3ffd0dc2d28a890663953d2e9">_QCBORItem::string</a></div><div class="ttdeci">UsefulBufC string</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_UINT64. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00736">qcbor.h:736</a></div></div>
<div class="ttc" id="qcbor_8h_html_ab4dca590e5786084b788de7cac2a3cc5"><div class="ttname"><a href="qcbor_8h.html#ab4dca590e5786084b788de7cac2a3cc5">QCBOREncode_AddBytes</a></div><div class="ttdeci">static void QCBOREncode_AddBytes(QCBOREncodeContext *pCtx, UsefulBufC Bytes)</div><div class="ttdoc">Add a byte string to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02221">qcbor.h:2221</a></div></div>
<div class="ttc" id="qcbor_8h_html_a1a6d47cc5d88c060eafe361d06d0af5e"><div class="ttname"><a href="qcbor_8h.html#a1a6d47cc5d88c060eafe361d06d0af5e">QCBOREncode_AddEncoded</a></div><div class="ttdeci">static void QCBOREncode_AddEncoded(QCBOREncodeContext *pCtx, UsefulBufC Encoded)</div><div class="ttdoc">Add some already-encoded CBOR bytes. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02574">qcbor.h:2574</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a042e4c7585f18aed1883721ad0cde1fe"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a042e4c7585f18aed1883721ad0cde1fe">QCBOR_ERR_DATE_OVERFLOW</a></div><div class="ttdoc">During decoding, a date greater than +- 292 billion years from Jan 1 1970 encountered during parsing...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00609">qcbor.h:609</a></div></div>
<div class="ttc" id="qcbor_8h_html_ab7111364851b2d02cf67ed09829d405d"><div class="ttname"><a href="qcbor_8h.html#ab7111364851b2d02cf67ed09829d405d">QCBORDecode_Init</a></div><div class="ttdeci">void QCBORDecode_Init(QCBORDecodeContext *pCtx, UsefulBufC EncodedCBOR, QCBORDecodeMode nMode)</div><div class="ttdoc">Initialize the CBOR decoder context. </div></div>
<div class="ttc" id="qcbor_8h_html_afb1592b19f254b747e6ad788189e8c58a4116f650e4fa0e0279371dff415152c7"><div class="ttname"><a href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a4116f650e4fa0e0279371dff415152c7">QCBOR_DECODE_MODE_MAP_STRINGS_ONLY</a></div><div class="ttdoc">See QCBORDecode_Init() </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00658">qcbor.h:658</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a439657577b3780303291244cbac1077e"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a439657577b3780303291244cbac1077e">QCBOR_ERR_CLOSE_MISMATCH</a></div><div class="ttdoc">During encoding, QCBOREncode_Close() call with a different type than is currently open...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00625">qcbor.h:625</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a691c5b5a79727b84b1da18a1d1c30877"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a691c5b5a79727b84b1da18a1d1c30877">QCBOR_ERR_BAD_SIMPLE</a></div><div class="ttdoc">During encoding, the simple value is not between CBOR_SIMPLEV_FALSE and CBOR_SIMPLEV_UNDEF. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00605">qcbor.h:605</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_encode_context_html"><div class="ttname"><a href="struct___q_c_b_o_r_encode_context.html">_QCBOREncodeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00138">qcbor.h:138</a></div></div>
<div class="ttc" id="qcbor_8h_html_aba41561b15e2abbdb0fcf131b2c6ab2d"><div class="ttname"><a href="qcbor_8h.html#aba41561b15e2abbdb0fcf131b2c6ab2d">QCBOREncode_AddType7</a></div><div class="ttdeci">void QCBOREncode_AddType7(QCBOREncodeContext *pCtx, size_t uSize, uint64_t uNum)</div><div class="ttdoc">Semi-private method to add simple types. </div></div>
<div class="ttc" id="qcbor_8h_html_aeff2f85e718779891653a471b7670cfd"><div class="ttname"><a href="qcbor_8h.html#aeff2f85e718779891653a471b7670cfd">QCBOREncode_AddNULL</a></div><div class="ttdeci">static void QCBOREncode_AddNULL(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Add a NULL to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02469">qcbor.h:2469</a></div></div>
<div class="ttc" id="qcbor_8h_html_a57fc48e69746a5668a5e4deeb55776c2"><div class="ttname"><a href="qcbor_8h.html#a57fc48e69746a5668a5e4deeb55776c2">QCBOREncode_AddUInt64</a></div><div class="ttdeci">void QCBOREncode_AddUInt64(QCBOREncodeContext *pCtx, uint64_t uNum)</div><div class="ttdoc">Add an unsigned 64-bit integer to the encoded output. </div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42ad1256c54a3aabfc05e434272d510d222"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42ad1256c54a3aabfc05e434272d510d222">QCBOR_ERR_TOO_MANY_TAGS</a></div><div class="ttdoc">During decoding, too many tags in the caller-configured tag list, or not enough space in QCBORTagList...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00644">qcbor.h:644</a></div></div>
<div class="ttc" id="qcbor_8h_html_a531e2d609d863de2e6cd1287d42c0357"><div class="ttname"><a href="qcbor_8h.html#a531e2d609d863de2e6cd1287d42c0357">CBOR_TAG_B64URL</a></div><div class="ttdeci">#define CBOR_TAG_B64URL</div><div class="ttdoc">The data in the string is a base 64&amp;#39;d URL. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00294">qcbor.h:294</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a52c51d8c1ab843c1c1d550414ea378ad"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a52c51d8c1ab843c1c1d550414ea378ad">QCBOR_ERR_EXTRA_BYTES</a></div><div class="ttdoc">Returned by QCBORDecode_Finish() if all the inputs bytes have not been consumed. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00621">qcbor.h:621</a></div></div>
<div class="ttc" id="qcbor_8h_html_a985cbeda0da0d80a30cd1619d812ac01"><div class="ttname"><a href="qcbor_8h.html#a985cbeda0da0d80a30cd1619d812ac01">QCBOREncode_AddUndef</a></div><div class="ttdeci">static void QCBOREncode_AddUndef(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Add an "undef" to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02487">qcbor.h:2487</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a72071afbe1fe98d8b5b8e798e2b50878"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a72071afbe1fe98d8b5b8e798e2b50878">QCBOR_ERR_MAP_LABEL_TYPE</a></div><div class="ttdoc">During decoding, the label for a map entry is bad. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00597">qcbor.h:597</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_decode_context_html"><div class="ttname"><a href="struct___q_c_b_o_r_decode_context.html">_QCBORDecodeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00177">qcbor.h:177</a></div></div>
<div class="ttc" id="qcbor_8h_html_a84881d4d0c59bb05e414bbeb2d38f1c8"><div class="ttname"><a href="qcbor_8h.html#a84881d4d0c59bb05e414bbeb2d38f1c8">QCBOREncode_AddDateString</a></div><div class="ttdeci">static void QCBOREncode_AddDateString(QCBOREncodeContext *pCtx, const char *szDate)</div><div class="ttdoc">Add an RFC 3339 date string. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02408">qcbor.h:2408</a></div></div>
<div class="ttc" id="qcbor_8h_html_aee2d572e423cfed0a2c774b2999c53dc"><div class="ttname"><a href="qcbor_8h.html#aee2d572e423cfed0a2c774b2999c53dc">QCBORDecode_SetMemPool</a></div><div class="ttdeci">QCBORError QCBORDecode_SetMemPool(QCBORDecodeContext *pCtx, UsefulBuf MemPool, bool bAllStrings)</div><div class="ttdoc">Set up the MemPool string allocator for indefinite length strings. </div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_abc918d2ee9e41334ad8744116fcd848e"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#abc918d2ee9e41334ad8744116fcd848e">_QCBORItem::uLabelType</a></div><div class="ttdeci">uint8_t uLabelType</div><div class="ttdoc">How deep the nesting from arrays and maps are. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00727">qcbor.h:727</a></div></div>
<div class="ttc" id="qcbor_8h_html_aea839bfa7b1375ed4f903de7bf3212f8"><div class="ttname"><a href="qcbor_8h.html#aea839bfa7b1375ed4f903de7bf3212f8">QCBOREncode_OpenMap</a></div><div class="ttdeci">static void QCBOREncode_OpenMap(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Indicates that the next items added are in a map. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02528">qcbor.h:2528</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a28a14738c0cabacf70b82a7cd644266a"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a28a14738c0cabacf70b82a7cd644266a">_QCBORItem::uSimple</a></div><div class="ttdeci">uint8_t uSimple</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_BIGNUM. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00746">qcbor.h:746</a></div></div>
<div class="ttc" id="qcbor_8h_html_a9c3e4d266c63c327bc963931ac27a12c"><div class="ttname"><a href="qcbor_8h.html#a9c3e4d266c63c327bc963931ac27a12c">QCBOREncode_AddDouble</a></div><div class="ttdeci">void QCBOREncode_AddDouble(QCBOREncodeContext *pCtx, double dNum)</div><div class="ttdoc">Add a floating-point number to the encoded output. </div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_abe003e63b65be77aadef7ecd3a42461e"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#abe003e63b65be77aadef7ecd3a42461e">_QCBORItem::uNextNestLevel</a></div><div class="ttdeci">uint8_t uNextNestLevel</div><div class="ttdoc">Like uDataAlloc, but for label. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00730">qcbor.h:730</a></div></div>
<div class="ttc" id="struct_q_c_b_o_r_string_allocator_html"><div class="ttname"><a href="struct_q_c_b_o_r_string_allocator.html">QCBORStringAllocator</a></div><div class="ttdoc">This is a set of functions and pointer context (in object-oriented parlance, an "object") used to all...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00784">qcbor.h:784</a></div></div>
<div class="ttc" id="structuseful__out__buf_html"><div class="ttname"><a href="structuseful__out__buf.html">useful_out_buf</a></div><div class="ttdoc">UsefulOutBuf is a structure and functions (an object) that are good for serializing data into a buffe...</div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00642">UsefulBuf.h:642</a></div></div>
<div class="ttc" id="struct_q_c_b_o_r_tag_list_out_html"><div class="ttname"><a href="struct_q_c_b_o_r_tag_list_out.html">QCBORTagListOut</a></div><div class="ttdoc">This is for QCBORDecode_GetNextWithTags() to be able to return the full list of tags on an item...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00831">qcbor.h:831</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a90bbf40200a6be9f7838db9557eff274"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a90bbf40200a6be9f7838db9557eff274">QCBOR_ERR_INDEFINITE_STRING_CHUNK</a></div><div class="ttdoc">One of the chunks in an indefinite length string is not of the type of the string. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00633">qcbor.h:633</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a21166fd2b73f0edc2592e3c71812e3ec"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a21166fd2b73f0edc2592e3c71812e3ec">_QCBORItem::bigNum</a></div><div class="ttdeci">UsefulBufC bigNum</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_DATE_STRING. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00745">qcbor.h:745</a></div></div>
<div class="ttc" id="qcbor_8h_html_aa7779154b7b3d4ce7e074866255192d1"><div class="ttname"><a href="qcbor_8h.html#aa7779154b7b3d4ce7e074866255192d1">QCBOREncode_AddInt64</a></div><div class="ttdeci">void QCBOREncode_AddInt64(QCBOREncodeContext *pCtx, int64_t nNum)</div><div class="ttdoc">Add a signed 64-bit integer to the encoded output. </div></div>
<div class="ttc" id="qcbor_8h_html_a6ee9ac410485977b75b733e049719f03"><div class="ttname"><a href="qcbor_8h.html#a6ee9ac410485977b75b733e049719f03">QCBOREncode_AddB64URLText</a></div><div class="ttdeci">static void QCBOREncode_AddB64URLText(QCBOREncodeContext *pCtx, UsefulBufC B64Text)</div><div class="ttdoc">Add base 64URL -encoded URL to encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02345">qcbor.h:2345</a></div></div>
<div class="ttc" id="qcbor_8h_html_a90f361b7c37de1b35c8ef2d30082366b"><div class="ttname"><a href="qcbor_8h.html#a90f361b7c37de1b35c8ef2d30082366b">QCBOREncode_CloseMapOrArray</a></div><div class="ttdeci">void QCBOREncode_CloseMapOrArray(QCBOREncodeContext *pCtx, uint8_t uMajorType, UsefulBufC *pWrappedCBOR)</div><div class="ttdoc">Semi-private method to close a map, array or bstr wrapped CBOR. </div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42af59ba798361a9a941d7312c6304a6fba"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42af59ba798361a9a941d7312c6304a6fba">QCBOR_SUCCESS</a></div><div class="ttdoc">The encode or decode completely correctly. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00555">qcbor.h:555</a></div></div>
<div class="ttc" id="qcbor_8h_html_a1b3d900725dceb91bf246c012361e5b3"><div class="ttname"><a href="qcbor_8h.html#a1b3d900725dceb91bf246c012361e5b3">QCBOREncode_AddBinaryUUID</a></div><div class="ttdeci">static void QCBOREncode_AddBinaryUUID(QCBOREncodeContext *pCtx, UsefulBufC Bytes)</div><div class="ttdoc">Add a binary UUID to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02239">qcbor.h:2239</a></div></div>
<div class="ttc" id="_useful_buf_8h_html_a29f51e2194792e98be0a0192579e3e2b"><div class="ttname"><a href="_useful_buf_8h.html#a29f51e2194792e98be0a0192579e3e2b">UsefulBuf_FromSZ</a></div><div class="ttdeci">static UsefulBufC UsefulBuf_FromSZ(const char *szString)</div><div class="ttdoc">Convert a NULL terminated string to a UsefulBufC. </div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l00342">UsefulBuf.h:342</a></div></div>
<div class="ttc" id="structuseful__input__buf_html"><div class="ttname"><a href="structuseful__input__buf.html">useful_input_buf</a></div><div class="ttdef"><b>Definition:</b> <a href="_useful_buf_8h_source.html#l01202">UsefulBuf.h:1202</a></div></div>
<div class="ttc" id="qcbor_8h_html_aca97fa078fae2e0afb50b65590bdf72b"><div class="ttname"><a href="qcbor_8h.html#aca97fa078fae2e0afb50b65590bdf72b">QCBOREncode_AddSZString</a></div><div class="ttdeci">static void QCBOREncode_AddSZString(QCBOREncodeContext *pCtx, const char *szString)</div><div class="ttdoc">Add a UTF-8 text string to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02169">qcbor.h:2169</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42aea5398e1a2b27fc437b99b9ab91aaafd"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42aea5398e1a2b27fc437b99b9ab91aaafd">QCBOR_ERR_BUFFER_TOO_SMALL</a></div><div class="ttdoc">The buffer provided for the encoded output when doing encoding was too small and the encoded output w...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00560">qcbor.h:560</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42adf78b2cf913ea4a47220db8a8c352bc2"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42adf78b2cf913ea4a47220db8a8c352bc2">QCBOR_ERR_MEM_POOL_INTERNAL</a></div><div class="ttdoc">Returned by QCBORDecode_SetMemPool() when xx is too small. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00649">qcbor.h:649</a></div></div>
<div class="ttc" id="qcbor_8h_html_ab7f85546a84e1301d1a6af6890cb191e"><div class="ttname"><a href="qcbor_8h.html#ab7f85546a84e1301d1a6af6890cb191e">QCBOREncode_Init</a></div><div class="ttdeci">void QCBOREncode_Init(QCBOREncodeContext *pCtx, UsefulBuf Storage)</div><div class="ttdoc">Initialize the the encoder to prepare to encode some CBOR. </div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_ada1db914c30f5d52f4df8f51f17fed9b"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#ada1db914c30f5d52f4df8f51f17fed9b">_QCBORItem::uCount</a></div><div class="ttdeci">uint16_t uCount</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_BYTE_STRING and QCBOR_TYPE_TEXT_STRING. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00737">qcbor.h:737</a></div></div>
<div class="ttc" id="qcbor_8h_html_a8c24ab9ee7f6b953315f4b48ef14895e"><div class="ttname"><a href="qcbor_8h.html#a8c24ab9ee7f6b953315f4b48ef14895e">QCBOREncode_CloseArray</a></div><div class="ttdeci">static void QCBOREncode_CloseArray(QCBOREncodeContext *pCtx)</div><div class="ttdoc">Close an open array. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02522">qcbor.h:2522</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a306b98088326b10d0768c89de4cf7b7e"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a306b98088326b10d0768c89de4cf7b7e">_QCBORItem::dfnum</a></div><div class="ttdeci">double dfnum</div><div class="ttdoc">The "value" for uDataType QCBOR_TYPE_ARRAY or QCBOR_TYPE_MAP – the number of items in the array or m...</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00739">qcbor.h:739</a></div></div>
<div class="ttc" id="qcbor_8h_html_a5822b9efabd2a4bb1ce13390bf378b61"><div class="ttname"><a href="qcbor_8h.html#a5822b9efabd2a4bb1ce13390bf378b61">QCBORDecode_GetNext</a></div><div class="ttdeci">QCBORError QCBORDecode_GetNext(QCBORDecodeContext *pCtx, QCBORItem *pDecodedItem)</div><div class="ttdoc">Gets the next item (integer, byte string, array...) in pre order traversal of CBOR tree...</div></div>
<div class="ttc" id="qcbor_8h_html_a83d58429f77ffbe918a6d923b0c54735"><div class="ttname"><a href="qcbor_8h.html#a83d58429f77ffbe918a6d923b0c54735">CBOR_TAG_BIN_UUID</a></div><div class="ttdeci">#define CBOR_TAG_BIN_UUID</div><div class="ttdoc">Binary UUID. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00302">qcbor.h:302</a></div></div>
<div class="ttc" id="qcbor_8h_html_afb1592b19f254b747e6ad788189e8c58a25dbb7ce42d1c8113a26c9d14a417ccf"><div class="ttname"><a href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58a25dbb7ce42d1c8113a26c9d14a417ccf">QCBOR_DECODE_MODE_NORMAL</a></div><div class="ttdoc">See QCBORDecode_Init() </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00656">qcbor.h:656</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_aaaa1de70ec2e25957a0bb02edf84c23a"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#aaaa1de70ec2e25957a0bb02edf84c23a">_QCBORItem::uNestingLevel</a></div><div class="ttdeci">uint8_t uNestingLevel</div><div class="ttdoc">Tells what element of the val union to use. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00726">qcbor.h:726</a></div></div>
<div class="ttc" id="qcbor_8h_html_a82fe584ddba0632aeda34609d4fabeed"><div class="ttname"><a href="qcbor_8h.html#a82fe584ddba0632aeda34609d4fabeed">CBOR_TAG_B64</a></div><div class="ttdeci">#define CBOR_TAG_B64</div><div class="ttdoc">The data in the string is base 64&amp;#39;d. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00296">qcbor.h:296</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_ad22bb44931a291374a3013153804bc35"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#ad22bb44931a291374a3013153804bc35">_QCBORItem::uTagBits</a></div><div class="ttdeci">uint64_t uTagBits</div><div class="ttdoc">Union holding the different label types selected based on uLabelType. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00757">qcbor.h:757</a></div></div>
<div class="ttc" id="struct___q_c_b_o_r_item_html_a6ff40d695ba97a9cabbf48b34af1a6e3"><div class="ttname"><a href="struct___q_c_b_o_r_item.html#a6ff40d695ba97a9cabbf48b34af1a6e3">_QCBORItem::uint64</a></div><div class="ttdeci">uint64_t uint64</div><div class="ttdoc">The value for uDataType QCBOR_TYPE_INT64. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00734">qcbor.h:734</a></div></div>
<div class="ttc" id="qcbor_8h_html_a7c6985587a00a60907d846c2805fd910"><div class="ttname"><a href="qcbor_8h.html#a7c6985587a00a60907d846c2805fd910">QCBOREncode_CloseBstrWrap</a></div><div class="ttdeci">static void QCBOREncode_CloseBstrWrap(QCBOREncodeContext *pCtx, UsefulBufC *pWrappedCBOR)</div><div class="ttdoc">Close a wrapping bstr. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02568">qcbor.h:2568</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a16d78e7c134706bfa0c5b221774cc9b4"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a16d78e7c134706bfa0c5b221774cc9b4">QCBOR_ERR_ARRAY_TOO_LONG</a></div><div class="ttdoc">During decoding or encoding, the array or map had too many items in it. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00570">qcbor.h:570</a></div></div>
<div class="ttc" id="qcbor_8h_html_ad3e02d6fe09d15e8282b0c1b049a3c4a"><div class="ttname"><a href="qcbor_8h.html#ad3e02d6fe09d15e8282b0c1b049a3c4a">QCBOREncode_AddURI</a></div><div class="ttdeci">static void QCBOREncode_AddURI(QCBOREncodeContext *pCtx, UsefulBufC URI)</div><div class="ttdoc">Add a text URI to the encoded output. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02302">qcbor.h:2302</a></div></div>
<div class="ttc" id="qcbor_8h_html_afb1592b19f254b747e6ad788189e8c58"><div class="ttname"><a href="qcbor_8h.html#afb1592b19f254b747e6ad788189e8c58">QCBORDecodeMode</a></div><div class="ttdeci">QCBORDecodeMode</div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00654">qcbor.h:654</a></div></div>
<div class="ttc" id="qcbor_8h_html_a5f01747fee8d393dd1bda112484ab040"><div class="ttname"><a href="qcbor_8h.html#a5f01747fee8d393dd1bda112484ab040">CBOR_TAG_DATE_STRING</a></div><div class="ttdeci">#define CBOR_TAG_DATE_STRING</div><div class="ttdoc">See QCBOREncode_AddDateString() below. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00272">qcbor.h:272</a></div></div>
<div class="ttc" id="qcbor_8h_html_a525abace5fffcbd4d932a132dcd6888a"><div class="ttname"><a href="qcbor_8h.html#a525abace5fffcbd4d932a132dcd6888a">QCBOREncode_AddBool</a></div><div class="ttdeci">static void QCBOREncode_AddBool(QCBOREncodeContext *pCtx, bool b)</div><div class="ttdoc">Add a standard boolean. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l02447">qcbor.h:2447</a></div></div>
<div class="ttc" id="qcbor_8h_html_a917c840b71af72c2cdd4b31bb2a4fb42a30db911b5d817e7a56499f50a3b59dfa"><div class="ttname"><a href="qcbor_8h.html#a917c840b71af72c2cdd4b31bb2a4fb42a30db911b5d817e7a56499f50a3b59dfa">QCBOR_ERR_BAD_BREAK</a></div><div class="ttdoc">During decoding, a break occurred outside an indefinite length item. </div><div class="ttdef"><b>Definition:</b> <a href="qcbor_8h_source.html#l00640">qcbor.h:640</a></div></div>
<div class="ttc" id="qcbor_8h_html_ab573db9aecf8eb82861b9e2df6dc5d9e"><div class="ttname"><a href="qcbor_8h.html#ab573db9aecf8eb82861b9e2df6dc5d9e">QCBORDecode_SetUpAllocator</a></div><div class="ttdeci">void QCBORDecode_SetUpAllocator(QCBORDecodeContext *pCtx, const QCBORStringAllocator *pAllocator, bool bAllStrings)</div><div class="ttdoc">Sets up a custom string allocator for indefinite length strings. </div></div>
</div><!-- fragment --></div><!-- contents -->
        
    


        
<footer class="global-footer">
    <ul class="global-footer-media global-footer-row">
        <li>
            <a class="footer-media-icon" title="Twitter" href="https://twitter.com/ArmSoftwareDev">
                <span class="fab fa-twitter-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Twitter</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="YouTube" href="https://www.youtube.com/c/ArmSoftwareDevelopers">
                <span class="fab fa-youtube-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">YouTube</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Forum" href="http://forums.mbed.com/">
                <span class="fas fa-comments fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Forum</span>
            </a>
        </li>
        <li>
            <a class="footer-media-icon" title="Blog" href="http://blog.mbed.com/">
                <span class="fas fa-pen-square fa-2x"></span>
                <span class="global-footer-show-on-large-screens">Blog</span>
            </a>
        </li>
    </ul>

    <div class="global-footer-copyright global-footer-row">
        <div class="copyright-statement">Copyright © <script>document.write(new Date().getFullYear());</script> Arm Limited (or its affiliates).</div>
        <ul class="copyright-links">
            <li><a href="https://os.mbed.com/">Home</a></li>
            <li><a href="https://www.arm.com/company/policies/terms-and-conditions">Website Terms</a></li>
            <li><a href="https://www.arm.com/company/policies/privacy">Privacy</a></li>
            <li><a href="https://www.arm.com/company/policies/cookies">Cookies</a></li>
            <li><a href="http://www.arm.com/company/policies/trademarks">Trademarks</a></li>
        </ul>
    </div>
</footer>



    <div id="cookiemodule">
    <h5>Important Information for this Arm website</h5>
    <div id="cookiecontent">
        <p>
            This site uses cookies to store information on your computer.
            By continuing to use our site, you consent to our cookies.
            If you are not happy with the use of these cookies, please review our
            <a href="https://www.arm.com/company/policies/cookies">Cookie Policy</a>
            to learn how they can be disabled.
            By disabling cookies, some features of the site will not work.
        </p>
        <button id="acceptcookie">Accept and hide this message</button>
    </div>
</div>
<script src="../../../../static/js/cookie_law.js"></script>




    </body>

<!-- Mirrored from os.mbed.com/docs/mbed-os/v6.16/mbed-os-api-doxy/qcbor_8h_source.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 16 Sep 2024 15:26:29 GMT -->
</html>
